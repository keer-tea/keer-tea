<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>08 聚合函数 | my course</title>
    <meta name="description" content="i want be a lazy person">
    <meta name="generator" content="VitePress v2.0.0-alpha.2">
    <link rel="preload stylesheet" href="/static/style.CmmVnYhJ.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/static/chunks/metadata.ea8c5903.js"></script>
    <script type="module" src="/static/app.5vsHm8gy.js"></script>
    <link rel="preload" href="/static/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/static/chunks/theme.BrGL3O7d.js">
    <link rel="modulepreload" href="/static/chunks/framework.gpVTZwhR.js">
    <link rel="modulepreload" href="/static/javadoc_MySql_08 聚合函数.md.DBFkx0kT.lean.js">
    <link rel="icon" href="/public-course-website/logo.png" crossorigin="">
    <script async src="https://www.googletagmanager.com/gtag/js?id=TAG_ID"></script>
    <script async id="MathJax-script" src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/js/tex-chtml.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1d4a3ce0><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0ce387ad></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0ce387ad>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1d4a3ce0 data-v-6460e198><div class="VPNavBar" data-v-6460e198 data-v-cf82b728><div class="wrapper" data-v-cf82b728><div class="container" data-v-cf82b728><div class="title" data-v-cf82b728><div class="VPNavBarTitle has-sidebar" data-v-cf82b728 data-v-b66b7b67><a class="title" href="/" data-v-b66b7b67><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://img.shields.io/github/package-json/v/vuejs/vitepress/main?label=vitepress&amp;labelColor=000&amp;logo=Vite&amp;logoColor=42d392&amp;color=000&amp;style=flat" alt data-v-10dbb6c9><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-cf82b728><div class="content-body" data-v-cf82b728><!--[--><!--]--><div class="VPNavBarSearch search" data-v-cf82b728><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-cf82b728 data-v-f3b7305d><span id="main-nav-aria-label" class="visually-hidden" data-v-f3b7305d> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f3b7305d data-v-accb2001><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-accb2001><span class="text" data-v-accb2001><!----><span data-v-accb2001>高中</span><span class="vpi-chevron-down text-icon" data-v-accb2001></span></span></button><div class="menu" data-v-accb2001><div class="VPMenu" data-v-accb2001 data-v-eb64f352><div class="items" data-v-eb64f352><!--[--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E8%AF%AD%E6%96%87/%E9%A6%96%E9%A1%B5.html" data-v-7488da32><!--[--><span data-v-7488da32>语文</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E6%95%B0%E5%AD%A6/%E9%A6%96%E9%A1%B5.html" data-v-7488da32><!--[--><span data-v-7488da32>数学</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E8%8B%B1%E8%AF%AD/%E9%A6%96%E9%A1%B5.html" data-v-7488da32><!--[--><span data-v-7488da32>英语</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E7%89%A9%E7%90%86/%E9%A6%96%E9%A1%B5.html" data-v-7488da32><!--[--><span data-v-7488da32>物理</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E5%8C%96%E5%AD%A6/%E9%A6%96%E9%A1%B5.html" data-v-7488da32><!--[--><span data-v-7488da32>化学</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E7%94%9F%E7%89%A9/%E9%A6%96%E9%A1%B5.html" data-v-7488da32><!--[--><span data-v-7488da32>生物</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/gaozhong/%E5%85%B6%E5%AE%83/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92.html" data-v-7488da32><!--[--><span data-v-7488da32>每日学习计划</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/useful/LaTex/LaTex%20%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AC%A6%E5%8F%B7.html" tabindex="0" data-v-f3b7305d data-v-48d3ccb3><!--[--><span data-v-48d3ccb3>useful</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/draw/drawing.html" tabindex="0" data-v-f3b7305d data-v-48d3ccb3><!--[--><span data-v-48d3ccb3>draw</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/javadoc/java%20%E8%AE%B0%E5%BD%95.html" tabindex="0" data-v-f3b7305d data-v-48d3ccb3><!--[--><span data-v-48d3ccb3>java</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f3b7305d data-v-accb2001><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-accb2001><span class="text" data-v-accb2001><!----><span data-v-accb2001>home-page</span><span class="vpi-chevron-down text-icon" data-v-accb2001></span></span></button><div class="menu" data-v-accb2001><div class="VPMenu" data-v-accb2001 data-v-eb64f352><div class="items" data-v-eb64f352><!--[--><!--[--><div class="VPMenuLink" data-v-eb64f352 data-v-7488da32><a class="VPLink link" href="/home-page/routine-index.html" data-v-7488da32><!--[--><span data-v-7488da32>routine-index</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-cf82b728 data-v-791c2557><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-791c2557 data-v-1ed04b86 data-v-3f4fb692><span class="check" data-v-3f4fb692><span class="icon" data-v-3f4fb692><!--[--><span class="vpi-sun sun" data-v-1ed04b86></span><span class="vpi-moon moon" data-v-1ed04b86></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-cf82b728 data-v-a2e5d81d data-v-a1e3d6d2><!--[--><a class="VPSocialLink no-icon" href="https://juejin.cn/user/1742041823325422" aria-label="my juejin" target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m2 12l10 7.422L22 12"/><path d="m7 9l5 4l5-4m-6-3l1 .8l1-.8l-1-.8z"/></g></svg></a><a class="VPSocialLink no-icon" href="https://github.com/keer-tea/my-course" aria-label="my github homepage" target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://keer-tea-github-io.pages.dev/" aria-label target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"/></svg></a><a class="VPSocialLink no-icon" href="https://keer-tea.github.io/" aria-label target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-cf82b728 data-v-3339cf50 data-v-accb2001><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-accb2001><span class="vpi-more-horizontal icon" data-v-accb2001></span></button><div class="menu" data-v-accb2001><div class="VPMenu" data-v-accb2001 data-v-eb64f352><!----><!--[--><!--[--><!----><div class="group" data-v-3339cf50><div class="item appearance" data-v-3339cf50><p class="label" data-v-3339cf50>Appearance</p><div class="appearance-action" data-v-3339cf50><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3339cf50 data-v-1ed04b86 data-v-3f4fb692><span class="check" data-v-3f4fb692><span class="icon" data-v-3f4fb692><!--[--><span class="vpi-sun sun" data-v-1ed04b86></span><span class="vpi-moon moon" data-v-1ed04b86></span><!--]--></span></span></button></div></div></div><div class="group" data-v-3339cf50><div class="item social-links" data-v-3339cf50><div class="VPSocialLinks social-links-list" data-v-3339cf50 data-v-a1e3d6d2><!--[--><a class="VPSocialLink no-icon" href="https://juejin.cn/user/1742041823325422" aria-label="my juejin" target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m2 12l10 7.422L22 12"/><path d="m7 9l5 4l5-4m-6-3l1 .8l1-.8l-1-.8z"/></g></svg></a><a class="VPSocialLink no-icon" href="https://github.com/keer-tea/my-course" aria-label="my github homepage" target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://keer-tea-github-io.pages.dev/" aria-label target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"/></svg></a><a class="VPSocialLink no-icon" href="https://keer-tea.github.io/" aria-label target="_blank" rel="noopener" data-v-a1e3d6d2 data-v-b14327b4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-cf82b728 data-v-7a500726><span class="container" data-v-7a500726><span class="top" data-v-7a500726></span><span class="middle" data-v-7a500726></span><span class="bottom" data-v-7a500726></span></span></button></div></div></div></div><div class="divider" data-v-cf82b728><div class="divider-line" data-v-cf82b728></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1d4a3ce0 data-v-c50109b6><div class="container" data-v-c50109b6><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-c50109b6><span class="vpi-align-left menu-icon" data-v-c50109b6></span><span class="menu-text" data-v-c50109b6>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-c50109b6 data-v-5b3ba495><button data-v-5b3ba495>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-1d4a3ce0 data-v-9a413eb6><div class="curtain" data-v-9a413eb6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-9a413eb6><span class="visually-hidden" id="sidebar-aria-label" data-v-9a413eb6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-0a393ee8><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a393ee8 data-v-236ac526><div class="item" role="button" tabindex="0" data-v-236ac526><div class="indicator" data-v-236ac526></div><h2 class="text" data-v-236ac526>Java 的面向对象编程</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-236ac526><span class="vpi-chevron-right caret-icon" data-v-236ac526></span></div></div><div class="items" data-v-236ac526><!--[--><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/1.%20%E5%9F%BA%E7%A1%80.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>1. 基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/2.%20%E8%BF%9B%E9%98%B6.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>2. 进阶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/3.%20%E9%AB%98%E7%BA%A7.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>3. 高级</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a393ee8><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-0a393ee8 data-v-236ac526><div class="item" role="button" tabindex="0" data-v-236ac526><div class="indicator" data-v-236ac526></div><h2 class="text" data-v-236ac526>MySql</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-236ac526><span class="vpi-chevron-right caret-icon" data-v-236ac526></span></div></div><div class="items" data-v-236ac526><!--[--><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/01%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>01 数据库概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/02%20MySQL%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>02 MySQL 环境搭建</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/03%20%E5%9F%BA%E6%9C%AC%E7%9A%84%20SELECT%20%E8%AF%AD%E5%8F%A5.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>03 基本的 SELECT 语句</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/04%20%E8%BF%90%E7%AE%97%E7%AC%A6.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>04 运算符</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/05%20%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>05 排序与分页</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/06%20%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>06 多表查询</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/07%20%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>07 单行函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/08%20%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>08 聚合函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/09%20%E5%AD%90%E6%9F%A5%E8%AF%A2.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>09 子查询</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/10%20%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E8%A1%A8.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>10 创建和管理表</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/11%20%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>11 数据处理之增删改</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/12%20MySQL%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%B2%BE%E8%AE%B2.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>12 MySQL 数据类型精讲</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/13%20%E7%BA%A6%E6%9D%9F.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>13 约束</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/14%20%E8%A7%86%E5%9B%BE.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>14 视图</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/15%20%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%87%BD%E6%95%B0.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>15 存储过程与函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/16%20%E5%8F%98%E9%87%8F%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%B8%B8%E6%A0%87.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>16 变量、流程控制与游标</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/17%20%E8%A7%A6%E5%8F%91%E5%99%A8.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>17 触发器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/MySql/18%20MySQL8%20%E5%85%B6%E5%AE%83%E6%96%B0%E7%89%B9%E6%80%A7.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>18 MySQL8 其它新特性</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a393ee8><section class="VPSidebarItem level-0" data-v-0a393ee8 data-v-236ac526><!----><div class="items" data-v-236ac526><!--[--><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/1.%E7%AC%AC%E4%B8%80%E5%A4%A9.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>1.第一天</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/2.%E7%AC%AC%E4%BA%8C%E5%A4%A9.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>2.第二天</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>网络编程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%20java.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>为什么学 java</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E7%9A%84%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E5%9F%BA%E7%A1%80%20API.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 的常用类和基础 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 的多线程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 的异常处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 反射机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E6%B3%9B%E5%9E%8B.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 泛型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 集合框架</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/java%20%E8%AE%B0%E5%BD%95.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>java 记录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E9%9B%86%E5%90%88%E6%BA%90%E7%A0%81.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java 数据结构与集合源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/Java%20File%20%E7%B1%BB%E4%B8%8E%20IO%20%E6%B5%81.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>Java File 类与 IO 流</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/JDK8~17%20%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%88%E4%B8%8A%EF%BC%89.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>JDK8~17 新特性（上）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-236ac526 data-v-236ac526><div class="item" data-v-236ac526><div class="indicator" data-v-236ac526></div><a class="VPLink link link" href="/javadoc/JDK8~17%20%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%88%E4%B8%8B%EF%BC%89.html" data-v-236ac526><!--[--><p class="text" data-v-236ac526>JDK8~17 新特性（下）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1d4a3ce0 data-v-9c51ed11><div class="VPDoc has-sidebar has-aside" data-v-9c51ed11 data-v-27b17872><!--[--><!--]--><div class="container" data-v-27b17872><div class="aside" data-v-27b17872><div class="aside-curtain" data-v-27b17872></div><div class="aside-container" data-v-27b17872><div class="aside-content" data-v-27b17872><div class="VPDocAside" data-v-27b17872 data-v-329ea813><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-329ea813 data-v-c4d7806b><div class="content" data-v-c4d7806b><div class="outline-marker" data-v-c4d7806b></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c4d7806b>outline</div><ul class="VPDocOutlineItem root" data-v-c4d7806b data-v-bb1d9fe6><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-329ea813></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-27b17872><div class="content-container" data-v-27b17872><!--[--><!--]--><main class="main" data-v-27b17872><div style="position:relative;" class="vp-doc _javadoc_MySql_08%20%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0" data-v-27b17872><div><h1 id="_08-聚合函数" tabindex="-1">08 聚合函数 <a class="header-anchor" href="#_08-聚合函数" aria-label="Permalink to &quot;08 聚合函数&quot;">​</a></h1><p>我们上一章讲到了 SQL 单行函数。实际上 SQL 函数还有一类，叫做聚合（或聚集、分组）函数，它是对 一组数据进行汇总的函数，输入的是一组数据的集合，输出的是单个值。</p><h2 id="聚合函数介绍" tabindex="-1">聚合函数介绍 <a class="header-anchor" href="#聚合函数介绍" aria-label="Permalink to &quot;聚合函数介绍&quot;">​</a></h2><p><strong>什么是聚合函数</strong></p><p>聚合函数作用于一组数据，并对一组数据返回一个值。</p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql77.png"><p><strong>聚合函数类型</strong></p><ul><li>AVG()，求一列数据的平均值，忽略 null 值</li><li>SUM()，求一列数据的总和，忽略 null 值</li><li>MAX()，求一列数据的最大值</li><li>MIN()，求一列数据的最小值</li><li>COUNT()，求一列数据的个数，忽略 null 值</li></ul><p><strong>聚合函数语法</strong></p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql78.png"><p>聚合函数不能嵌套调用。比如不能出现类似“AVG(SUM(字段名称))”形式的调用。</p><h3 id="avg-和-sum-函数" tabindex="-1">AVG 和 SUM 函数 <a class="header-anchor" href="#avg-和-sum-函数" aria-label="Permalink to &quot;AVG 和 SUM 函数&quot;">​</a></h3><p>可以对数值型数据使用 AVG 和 SUM 函数。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MAX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,MIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SUM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  job_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LIKE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%REP%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql79.png"><h3 id="min-和-max-函数" tabindex="-1">MIN 和 MAX 函数 <a class="header-anchor" href="#min-和-max-函数" aria-label="Permalink to &quot;MIN 和 MAX 函数&quot;">​</a></h3><p>可以对任意数据类型的数据使用 MIN 和 MAX 函数。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hire_date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MAX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hire_date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      employees</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql80.png"><h3 id="count-函数" tabindex="-1">COUNT 函数 <a class="header-anchor" href="#count-函数" aria-label="Permalink to &quot;COUNT 函数&quot;">​</a></h3><p><code>COUNT(*)</code> 返回表中记录总数，适用于任意数据类型，并且不会忽略 null 值，null 也会计算在内。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COUNT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  department_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql81.png"><p>而 COUNT(expr) 返回的是 expr 不为空的记录总数。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COUNT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commission_pct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  department_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>因为 commission_pct 都为 null，所以记录总数为 0。</p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql82.png"><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql83.png"><div class="tip custom-block"><p class="custom-block-title">问题</p><p><code>count(*)</code> 和 <code>count(1) 或 count(列名)</code> 的区别？</p><p><code>count(*)</code> 是 SQL92 定义的标准统计行数的语法，跟数据库无关，跟 NULL 和非 NULL 无关。</p><p><code>count(*)</code> 会统计值为 NULL 的行，而 <code>count(1) 或 count(列名)</code> 不会统计此列为 NULL 值的行。</p></div><h2 id="group-by" tabindex="-1">GROUP BY <a class="header-anchor" href="#group-by" aria-label="Permalink to &quot;GROUP BY&quot;">​</a></h2><h3 id="基本使用" tabindex="-1">基本使用 <a class="header-anchor" href="#基本使用" aria-label="Permalink to &quot;基本使用&quot;">​</a></h3><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql84.png"><p>可以使用 GROUP BY 子句将某一列分成若干组进行计算。</p><p>语法：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> column,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> group_function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> table</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[WHERE  condition]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[GROUP BY   group_by_expression]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ORDER BY   column];</span></span></code></pre></div><p>WHERE 一定放在 FROM 后面。</p><p>在 SELECT 列表中所有未包含在组函数中的列都应该包含在 GROUP BY 子句中。举例：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   department_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql85.png"><p>包含在 GROUP BY 子句中的列不必包含在 SELECT 列表中</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql86.png"><h3 id="使用多个列分组" tabindex="-1">使用多个列分组 <a class="header-anchor" href="#使用多个列分组" aria-label="Permalink to &quot;使用多个列分组&quot;">​</a></h3><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql87.png"><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   department_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dept_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> job_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SUM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> job_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql88.png"><h3 id="group-by-中使用-with-rollup" tabindex="-1">GROUP BY 中使用 WITH ROLLUP <a class="header-anchor" href="#group-by-中使用-with-rollup" aria-label="Permalink to &quot;GROUP BY 中使用 WITH ROLLUP&quot;">​</a></h3><p>使用 WITH ROLLUP 关键字之后，在所有查询出的分组记录之后增加一条记录，该记录计算查询出的所 有记录的总和，即统计记录数量。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id,AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WITH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ROLLUP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>注意， 当使用 ROLLUP 时，不能同时使用 ORDER BY 子句进行结果排序，即 ROLLUP 和 ORDER BY 是互相排斥 的。</p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql89.png"><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql90.png"><h2 id="having" tabindex="-1">HAVING <a class="header-anchor" href="#having" aria-label="Permalink to &quot;HAVING&quot;">​</a></h2><h3 id="基本使用-1" tabindex="-1">基本使用 <a class="header-anchor" href="#基本使用-1" aria-label="Permalink to &quot;基本使用&quot;">​</a></h3><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql91.png"><p><strong>过滤分组：HAVING 子句</strong></p><ol><li>行已经被分组。</li><li>使用了聚合函数。</li><li>满足 HAVING 子句中条件的分组将被显示。</li><li>HAVING 不能单独使用，必须要跟 GROUP BY 一起使用。</li></ol><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql92.png"><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   department_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MAX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   MAX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql93.png"><p><strong>非法使用聚合函数：不能在 WHERE 子句中使用聚合函数。如下：</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   department_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     employees</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">salary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> department_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/assets/sql/sql94.png"><h3 id="where-和-having-的对比" tabindex="-1">WHERE 和 HAVING 的对比 <a class="header-anchor" href="#where-和-having-的对比" aria-label="Permalink to &quot;WHERE 和 HAVING 的对比&quot;">​</a></h3><p>区别 1：WHERE 可以直接使用表中的字段作为筛选条件，但不能使用分组中的计算函数作为筛选条件； HAVING 必须要与 GROUP BY 配合使用，可以把分组计算的函数和分组字段作为筛选条件。</p><p>这决定了，在需要对数据进行分组统计的时候，HAVING 可以完成 WHERE 不能完成的任务。这是因为， 在查询语法结构中，WHERE 在 GROUP BY 之前，所以无法对分组结果进行筛选。HAVING 在 GROUP BY 之 后，可以使用分组字段和分组中的计算函数，对分组的结果集进行筛选，这个功能是 WHERE 无法完成 的。另外，WHERE 排除的记录不再包括在分组中。</p><p>区别 2：如果需要通过连接从关联表中获取需要的数据，WHERE 是先筛选后连接，而 HAVING 是先连接 后筛选。</p><p>这一点，就决定了在关联查询中，WHERE 比 HAVING 更高效。因为 WHERE 可以先筛选，用一 个筛选后的较小数据集和关联表进行连接，这样占用的资源比较少，执行效率也比较高。HAVING 则需要 先把结果集准备好，也就是用未被筛选的数据集进行关联，然后对这个大的数据集进行筛选，这样占用 的资源就比较多，执行效率也较低。</p><p>小结如下：</p><table tabindex="0"><thead><tr><th></th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>WHERE</td><td>先筛选数据再关联，执行效率高</td><td>不能使用分组中的计算函数进行筛选</td></tr><tr><td>HAVING</td><td>可以使用分组中的计算函数</td><td>在最后的结果集中进行筛选，执行效率较低</td></tr></tbody></table><p>开发中的选择：</p><p>WHERE 和 HAVING 也不是互相排斥的，我们可以在一个查询里面同时使用 WHERE 和 HAVING。包含分组 统计函数的条件用 HAVING，普通条件用 WHERE。这样，我们就既利用了 WHERE 条件的高效快速，又发 挥了 HAVING 可以使用包含分组统计函数的查询条件的优点。当数据量特别大的时候，运行效率会有很 大的差别。</p><h2 id="select-的执行过程" tabindex="-1">SELECT 的执行过程 <a class="header-anchor" href="#select-的执行过程" aria-label="Permalink to &quot;SELECT 的执行过程&quot;">​</a></h2><h3 id="查询的结构" tabindex="-1">查询的结构 <a class="header-anchor" href="#查询的结构" aria-label="Permalink to &quot;查询的结构&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#方式 1：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,....,...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,...,....</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 多表的连接条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 不包含组函数的过滤条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 包含组函数的过滤条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ORDER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ASC/DESC</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LIMIT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#方式 2：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,....,...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> JOIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 多表的连接条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JOIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 不包含组函数的过滤条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AND/OR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 不包含组函数的过滤条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 包含组函数的过滤条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ORDER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ASC/DESC</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LIMIT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...,...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#其中：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（1）from：从哪些表中筛选</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（2）on：关联多表查询时，去除笛卡尔积</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（3）where：从表中筛选的条件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（4）group by：分组依据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（5）having：在统计结果中再次筛选</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（6）order by：排序</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#（7）limit：分页</span></span></code></pre></div><h3 id="select-执行顺序" tabindex="-1">SELECT 执行顺序 <a class="header-anchor" href="#select-执行顺序" aria-label="Permalink to &quot;SELECT 执行顺序&quot;">​</a></h3><p>你需要记住 SELECT 查询时的两个顺序：</p><ol><li>关键字的顺序是不能颠倒的：</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ORDER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LIMIT...</span></span></code></pre></div><ol start="2"><li>SELECT 语句的执行顺序（在 MySQL 和 Oracle 中，SELECT 执行顺序基本相同）：</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HAVING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 的字段</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DISTINCT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ORDER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LIMIT</span></span></code></pre></div><p>比如你写了一个 SQL 语句，那么它的关键字顺序和执行顺序是下面这样的：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DISTINCT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> player_id,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> player_name,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> num</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> player</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> JOIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> team</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> player.team_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> team.team_id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.80</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> player.team_id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> num</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ORDER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> num</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DESC</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 顺序 7</span></span></code></pre></div><p>在 SELECT 语句执行这些步骤的时候，每个步骤都会产生一个 虚拟表，然后将这个虚拟表传入下一个步 骤中作为输入。需要注意的是，这些步骤隐含在 SQL 的执行过程中，对于我们来说是不可见的。</p><h3 id="sql-的执行原理" tabindex="-1">SQL 的执行原理 <a class="header-anchor" href="#sql-的执行原理" aria-label="Permalink to &quot;SQL 的执行原理&quot;">​</a></h3><p>SELECT 是先执行 FROM 这一步的。在这个阶段，如果是多张表联查，还会经历下面的几个步骤：</p><ol><li>首先先通过 CROSS JOIN 求笛卡尔积，相当于得到虚拟表 vt（virtual table）1-1；</li><li>通过 ON 进行筛选，在虚拟表 vt1-1 的基础上进行筛选，得到虚拟表 vt1-2；</li><li>添加外部行。如果我们使用的是左连接、右链接或者全连接，就会涉及到外部行，也就是在虚拟 表 vt1-2 的基础上增加外部行，得到虚拟表 vt1-3。</li></ol><p>当然如果我们操作的是两张以上的表，还会重复上面的步骤，直到所有表都被处理完为止。这个过程得 到是我们的原始数据。</p><p>当我们拿到了查询数据表的原始数据，也就是最终的虚拟表 vt1，就可以在此基础上再进行 WHERE 阶 段。在这个阶段中，会根据 vt1 表的结果进行筛选过滤，得到虚拟表 vt2。</p><p>然后进入第三步和第四步，也就是 GROUP 和 HAVING 阶段。在这个阶段中，实际上是在虚拟表 vt2 的 基础上进行分组和分组过滤，得到中间的虚拟表 vt3 和 vt4。</p><p>当我们完成了条件筛选部分之后，就可以筛选表中提取的字段，也就是进入到 SELECT 和 DISTINCT 阶段。</p><p>首先在 SELECT 阶段会提取想要的字段，然后在 DISTINCT 阶段过滤掉重复的行，分别得到中间的虚拟表 vt5-1 和 vt5-2。</p><p>当我们提取了想要的字段数据之后，就可以按照指定的字段进行排序，也就是 ORDER BY 阶段，得到 虚拟表 vt6。</p><p>最后在 vt6 的基础上，取出指定行的记录，也就是 LIMIT 阶段，得到最终的结果，对应的是虚拟表 vt7 。</p><p>当然我们在写 SELECT 语句的时候，不一定存在所有的关键字，相应的阶段就会省略。</p><p>同时因为 SQL 是一门类似英语的结构化查询语言，所以我们在写 SELECT 语句的时候，还要注意相应的 关键字顺序，所谓底层运行的原理，就是我们刚才讲到的执行顺序。</p></div></div></main><footer class="VPDocFooter" data-v-27b17872 data-v-de4d1972><!--[--><!--]--><div class="edit-info" data-v-de4d1972><!----><div class="last-updated" data-v-de4d1972><p class="VPLastUpdated" data-v-de4d1972 data-v-b47568ad>最后一次提交在: <time datetime="2025-02-03T15:40:17.000Z" data-v-b47568ad></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-de4d1972><span class="visually-hidden" id="doc-footer-aria-label" data-v-de4d1972>Pager</span><div class="pager" data-v-de4d1972><a class="VPLink link pager-link prev" href="/javadoc/MySql/07%20%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0.html" data-v-de4d1972><!--[--><span class="desc" data-v-de4d1972>上一篇</span><span class="title" data-v-de4d1972>07 单行函数</span><!--]--></a></div><div class="pager" data-v-de4d1972><a class="VPLink link pager-link next" href="/javadoc/MySql/09%20%E5%AD%90%E6%9F%A5%E8%AF%A2.html" data-v-de4d1972><!--[--><span class="desc" data-v-de4d1972>下一篇</span><span class="title" data-v-de4d1972>09 子查询</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-1d4a3ce0 data-v-62d00863><div class="container" data-v-62d00863><p class="message" data-v-62d00863>Released under the MIT License.</p><p class="copyright" data-v-62d00863>Copyright © 2021-present</p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>