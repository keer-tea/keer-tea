import{g as Mt}from"./chunks/theme.BrGL3O7d.js";import{d as jt,p as ot,c as Ye,o as et,F as xt,j as it,e as _t,B as Pt,N as Ot,C as Lt,G as wt,w as Ft}from"./chunks/framework.gpVTZwhR.js";var lt={exports:{}},Kt=lt.exports,It;function Ht(){return It||(It=1,function(dt,ft){(function(ue,w){dt.exports=w()})(Kt,function(){return function(V){var ue={};function w(M){if(ue[M])return ue[M].exports;var I=ue[M]={i:M,l:!1,exports:{}};return V[M].call(I.exports,I,I.exports,w),I.l=!0,I.exports}return w.m=V,w.c=ue,w.d=function(M,I,s){w.o(M,I)||Object.defineProperty(M,I,{enumerable:!0,get:s})},w.r=function(M){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},w.t=function(M,I){if(I&1&&(M=w(M)),I&8||I&4&&typeof M=="object"&&M&&M.__esModule)return M;var s=Object.create(null);if(w.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:M}),I&2&&typeof M!="string")for(var j in M)w.d(s,j,(function(E){return M[E]}).bind(null,j));return s},w.n=function(M){var I=M&&M.__esModule?function(){return M.default}:function(){return M};return w.d(I,"a",I),I},w.o=function(M,I){return Object.prototype.hasOwnProperty.call(M,I)},w.p="/dist/",w(w.s="./index.js")}({"./index.js":function(V,ue,w){var M=w("./src/cos.js");V.exports=M},"./lib/base64.js":function(V,ue){var w=function(M){M=M||{};var I=M.Base64,s="2.1.9",j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=function(o){for(var c={},p=0,A=o.length;p<A;p++)c[o.charAt(p)]=p;return c}(j),F=String.fromCharCode,C=function(c){if(c.length<2){var p=c.charCodeAt(0);return p<128?c:p<2048?F(192|p>>>6)+F(128|p&63):F(224|p>>>12&15)+F(128|p>>>6&63)+F(128|p&63)}else{var p=65536+(c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320);return F(240|p>>>18&7)+F(128|p>>>12&63)+F(128|p>>>6&63)+F(128|p&63)}},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,T=function(c){return c.replace(d,C)},f=function(c){var p=[0,2,1][c.length%3],A=c.charCodeAt(0)<<16|(c.length>1?c.charCodeAt(1):0)<<8|(c.length>2?c.charCodeAt(2):0),R=[j.charAt(A>>>18),j.charAt(A>>>12&63),p>=2?"=":j.charAt(A>>>6&63),p>=1?"=":j.charAt(A&63)];return R.join("")},y=M.btoa?function(o){return M.btoa(o)}:function(o){return o.replace(/[\s\S]{1,3}/g,f)},B=function(o){return y(T(o))},m=function(c,p){return p?B(String(c)).replace(/[+\/]/g,function(A){return A=="+"?"-":"_"}).replace(/=/g,""):B(String(c))},P=function(c){return m(c,!0)},N=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),H=function(c){switch(c.length){case 4:var p=(7&c.charCodeAt(0))<<18|(63&c.charCodeAt(1))<<12|(63&c.charCodeAt(2))<<6|63&c.charCodeAt(3),A=p-65536;return F((A>>>10)+55296)+F((A&1023)+56320);case 3:return F((15&c.charCodeAt(0))<<12|(63&c.charCodeAt(1))<<6|63&c.charCodeAt(2));default:return F((31&c.charCodeAt(0))<<6|63&c.charCodeAt(1))}},D=function(c){return c.replace(N,H)},h=function(c){var p=c.length,A=p%4,R=(p>0?E[c.charAt(0)]<<18:0)|(p>1?E[c.charAt(1)]<<12:0)|(p>2?E[c.charAt(2)]<<6:0)|(p>3?E[c.charAt(3)]:0),_=[F(R>>>16),F(R>>>8&255),F(R&255)];return _.length-=[0,0,2,1][A],_.join("")},l=M.atob?function(o){return M.atob(o)}:function(o){return o.replace(/[\s\S]{1,4}/g,h)},S=function(o){return D(l(o))},i=function(c){return S(String(c).replace(/[-_]/g,function(p){return p=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},t=function(){var c=M.Base64;return M.Base64=I,c},n={VERSION:s,atob:l,btoa:y,fromBase64:i,toBase64:m,utob:T,encode:m,encodeURI:P,btou:D,decode:i,noConflict:t};return n}();V.exports=w},"./lib/crypto.js":function(V,ue,w){(function(M){var I=w("./node_modules/@babel/runtime/helpers/typeof.js"),s=s||function(j,E){var F={},C=F.lib={},d=function(){},T=C.Base={extend:function(h){d.prototype=this;var l=new d;return h&&l.mixIn(h),l.hasOwnProperty("init")||(l.init=function(){l.$super.init.apply(this,arguments)}),l.init.prototype=l,l.$super=this,l},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var l in h)h.hasOwnProperty(l)&&(this[l]=h[l]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}},f=C.WordArray=T.extend({init:function(h,l){h=this.words=h||[],this.sigBytes=l!=E?l:4*h.length},toString:function(h){return(h||B).stringify(this)},concat:function(h){var l=this.words,S=h.words,i=this.sigBytes;if(h=h.sigBytes,this.clamp(),i%4)for(var t=0;t<h;t++)l[i+t>>>2]|=(S[t>>>2]>>>24-8*(t%4)&255)<<24-8*((i+t)%4);else if(65535<S.length)for(t=0;t<h;t+=4)l[i+t>>>2]=S[t>>>2];else l.push.apply(l,S);return this.sigBytes+=h,this},clamp:function(){var h=this.words,l=this.sigBytes;h[l>>>2]&=4294967295<<32-8*(l%4),h.length=j.ceil(l/4)},clone:function(){var h=T.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var l=[],S=0;S<h;S+=4)l.push(4294967296*j.random()|0);return new f.init(l,h)}}),y=F.enc={},B=y.Hex={stringify:function(h){var l=h.words;h=h.sigBytes;for(var S=[],i=0;i<h;i++){var t=l[i>>>2]>>>24-8*(i%4)&255;S.push((t>>>4).toString(16)),S.push((t&15).toString(16))}return S.join("")},parse:function(h){for(var l=h.length,S=[],i=0;i<l;i+=2)S[i>>>3]|=parseInt(h.substr(i,2),16)<<24-4*(i%8);return new f.init(S,l/2)}},m=y.Latin1={stringify:function(h){var l=h.words;h=h.sigBytes;for(var S=[],i=0;i<h;i++)S.push(String.fromCharCode(l[i>>>2]>>>24-8*(i%4)&255));return S.join("")},parse:function(h){for(var l=h.length,S=[],i=0;i<l;i++)S[i>>>2]|=(h.charCodeAt(i)&255)<<24-8*(i%4);return new f.init(S,l)}},P=y.Utf8={stringify:function(h){try{return decodeURIComponent(escape(m.stringify(h)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(h){return m.parse(unescape(encodeURIComponent(h)))}},N=C.BufferedBlockAlgorithm=T.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=P.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var l=this._data,S=l.words,i=l.sigBytes,t=this.blockSize,n=i/(4*t),n=h?j.ceil(n):j.max((n|0)-this._minBufferSize,0);if(h=n*t,i=j.min(4*h,i),h){for(var o=0;o<h;o+=t)this._doProcessBlock(S,o);o=S.splice(0,h),l.sigBytes-=i}return new f.init(o,i)},clone:function(){var h=T.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0});C.Hasher=N.extend({cfg:T.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){N.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){return h&&this._append(h),this._doFinalize()},blockSize:16,_createHelper:function(h){return function(l,S){return new h.init(S).finalize(l)}},_createHmacHelper:function(h){return function(l,S){return new H.HMAC.init(h,S).finalize(l)}}});var H=F.algo={};return F}(Math);(function(){var j=s,d=j.lib,E=d.WordArray,F=d.Hasher,C=[],d=j.algo.SHA1=F.extend({_doReset:function(){this._hash=new E.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,y){for(var B=this._hash.words,m=B[0],P=B[1],N=B[2],H=B[3],D=B[4],h=0;80>h;h++){if(16>h)C[h]=f[y+h]|0;else{var l=C[h-3]^C[h-8]^C[h-14]^C[h-16];C[h]=l<<1|l>>>31}l=(m<<5|m>>>27)+D+C[h],l=20>h?l+((P&N|~P&H)+1518500249):40>h?l+((P^N^H)+1859775393):60>h?l+((P&N|P&H|N&H)-1894007588):l+((P^N^H)-899497514),D=H,H=N,N=P<<30|P>>>2,P=m,m=l}B[0]=B[0]+m|0,B[1]=B[1]+P|0,B[2]=B[2]+N|0,B[3]=B[3]+H|0,B[4]=B[4]+D|0},_doFinalize:function(){var f=this._data,y=f.words,B=8*this._nDataBytes,m=8*f.sigBytes;return y[m>>>5]|=128<<24-m%32,y[(m+64>>>9<<4)+14]=Math.floor(B/4294967296),y[(m+64>>>9<<4)+15]=B,f.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var f=F.clone.call(this);return f._hash=this._hash.clone(),f}});j.SHA1=F._createHelper(d),j.HmacSHA1=F._createHmacHelper(d)})(),function(){var j=s,E=j.enc.Utf8;j.algo.HMAC=j.lib.Base.extend({init:function(C,d){C=this._hasher=new C.init,typeof d=="string"&&(d=E.parse(d));var T=C.blockSize,f=4*T;d.sigBytes>f&&(d=C.finalize(d)),d.clamp();for(var y=this._oKey=d.clone(),B=this._iKey=d.clone(),m=y.words,P=B.words,N=0;N<T;N++)m[N]^=1549556828,P[N]^=909522486;y.sigBytes=B.sigBytes=f,this.reset()},reset:function(){var C=this._hasher;C.reset(),C.update(this._iKey)},update:function(C){return this._hasher.update(C),this},finalize:function(C){var d=this._hasher;return C=d.finalize(C),d.reset(),d.finalize(this._oKey.clone().concat(C))}})}(),function(){var j=s,E=j.lib,F=E.WordArray,C=j.enc;C.Base64={stringify:function(T){var f=T.words,y=T.sigBytes,B=this._map;T.clamp();for(var m=[],P=0;P<y;P+=3)for(var N=f[P>>>2]>>>24-P%4*8&255,H=f[P+1>>>2]>>>24-(P+1)%4*8&255,D=f[P+2>>>2]>>>24-(P+2)%4*8&255,h=N<<16|H<<8|D,l=0;l<4&&P+l*.75<y;l++)m.push(B.charAt(h>>>6*(3-l)&63));var S=B.charAt(64);if(S)for(;m.length%4;)m.push(S);return m.join("")},parse:function(T){var f=T.length,y=this._map,B=y.charAt(64);if(B){var m=T.indexOf(B);m!=-1&&(f=m)}for(var P=[],N=0,H=0;H<f;H++)if(H%4){var D=y.indexOf(T.charAt(H-1))<<H%4*2,h=y.indexOf(T.charAt(H))>>>6-H%4*2;P[N>>>2]|=(D|h)<<24-N%4*8,N++}return F.create(P,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),I(M)==="object"?M.exports=s:window.CryptoJS=s}).call(this,w("./node_modules/webpack/buildin/module.js")(V))},"./lib/md5.js":function(V,ue,w){(function(M){var I,s=w("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var j=(typeof window>"u"?"undefined":s(window))==="object",E=j?window:{};E.JS_MD5_NO_WINDOW&&(j=!1);var F=!j&&(typeof self>"u"?"undefined":s(self))==="object";F&&(E=self);var C=!E.JS_MD5_NO_COMMON_JS&&s(M)==="object"&&M.exports,d=w("./node_modules/webpack/buildin/amd-options.js"),T=!E.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),y=[128,32768,8388608,-2147483648],B=[0,8,16,24],m=["hex","array","digest","buffer","arrayBuffer","base64"],P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),N=[],H;if(T){var D=new ArrayBuffer(68);H=new Uint8Array(D),N=new Uint32Array(D)}(E.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),T&&(E.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return s(t)==="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var h=function(n){return function(o,c){return new S(!0).update(o,c)[n]()}},l=function(){var n=h("hex");n.getCtx=n.create=function(){return new S},n.update=function(p){return n.create().update(p)};for(var o=0;o<m.length;++o){var c=m[o];n[c]=h(c)}return n};function S(t){if(t)N[0]=N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0,this.blocks=N,this.buffer8=H;else if(T){var n=new ArrayBuffer(68);this.buffer8=new Uint8Array(n),this.blocks=new Uint32Array(n)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}S.prototype.update=function(t,n){if(!this.finalized){for(var o,c=0,p,A=t.length,R=this.blocks,_=this.buffer8;c<A;){if(this.hashed&&(this.hashed=!1,R[0]=R[16],R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0),T)for(p=this.start;c<A&&p<64;++c)o=t.charCodeAt(c),n||o<128?_[p++]=o:o<2048?(_[p++]=192|o>>6,_[p++]=128|o&63):o<55296||o>=57344?(_[p++]=224|o>>12,_[p++]=128|o>>6&63,_[p++]=128|o&63):(o=65536+((o&1023)<<10|t.charCodeAt(++c)&1023),_[p++]=240|o>>18,_[p++]=128|o>>12&63,_[p++]=128|o>>6&63,_[p++]=128|o&63);else for(p=this.start;c<A&&p<64;++c)o=t.charCodeAt(c),n||o<128?R[p>>2]|=o<<B[p++&3]:o<2048?(R[p>>2]|=(192|o>>6)<<B[p++&3],R[p>>2]|=(128|o&63)<<B[p++&3]):o<55296||o>=57344?(R[p>>2]|=(224|o>>12)<<B[p++&3],R[p>>2]|=(128|o>>6&63)<<B[p++&3],R[p>>2]|=(128|o&63)<<B[p++&3]):(o=65536+((o&1023)<<10|t.charCodeAt(++c)&1023),R[p>>2]|=(240|o>>18)<<B[p++&3],R[p>>2]|=(128|o>>12&63)<<B[p++&3],R[p>>2]|=(128|o>>6&63)<<B[p++&3],R[p>>2]|=(128|o&63)<<B[p++&3]);this.lastByteIndex=p,this.bytes+=p-this.start,p>=64?(this.start=p-64,this.hash(),this.hashed=!0):this.start=p}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,n=this.lastByteIndex;t[n>>2]|=y[n&3],n>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},S.prototype.hash=function(){var t,n,o,c,p,A,R=this.blocks;this.first?(t=R[0]-680876937,t=(t<<7|t>>>25)-271733879<<0,c=(-1732584194^t&2004318071)+R[1]-117830708,c=(c<<12|c>>>20)+t<<0,o=(-271733879^c&(t^-271733879))+R[2]-1126478375,o=(o<<17|o>>>15)+c<<0,n=(t^o&(c^t))+R[3]-1316259209,n=(n<<22|n>>>10)+o<<0):(t=this.h0,n=this.h1,o=this.h2,c=this.h3,t+=(c^n&(o^c))+R[0]-680876936,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[1]-389564586,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[2]+606105819,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[3]-1044525330,n=(n<<22|n>>>10)+o<<0),t+=(c^n&(o^c))+R[4]-176418897,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[5]+1200080426,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[6]-1473231341,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[7]-45705983,n=(n<<22|n>>>10)+o<<0,t+=(c^n&(o^c))+R[8]+1770035416,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[9]-1958414417,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[10]-42063,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[11]-1990404162,n=(n<<22|n>>>10)+o<<0,t+=(c^n&(o^c))+R[12]+1804603682,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[13]-40341101,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[14]-1502002290,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[15]+1236535329,n=(n<<22|n>>>10)+o<<0,t+=(o^c&(n^o))+R[1]-165796510,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[6]-1069501632,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[11]+643717713,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[0]-373897302,n=(n<<20|n>>>12)+o<<0,t+=(o^c&(n^o))+R[5]-701558691,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[10]+38016083,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[15]-660478335,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[4]-405537848,n=(n<<20|n>>>12)+o<<0,t+=(o^c&(n^o))+R[9]+568446438,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[14]-1019803690,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[3]-187363961,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[8]+1163531501,n=(n<<20|n>>>12)+o<<0,t+=(o^c&(n^o))+R[13]-1444681467,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[2]-51403784,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[7]+1735328473,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[12]-1926607734,n=(n<<20|n>>>12)+o<<0,p=n^o,t+=(p^c)+R[5]-378558,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[8]-2022574463,c=(c<<11|c>>>21)+t<<0,A=c^t,o+=(A^n)+R[11]+1839030562,o=(o<<16|o>>>16)+c<<0,n+=(A^o)+R[14]-35309556,n=(n<<23|n>>>9)+o<<0,p=n^o,t+=(p^c)+R[1]-1530992060,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[4]+1272893353,c=(c<<11|c>>>21)+t<<0,A=c^t,o+=(A^n)+R[7]-155497632,o=(o<<16|o>>>16)+c<<0,n+=(A^o)+R[10]-1094730640,n=(n<<23|n>>>9)+o<<0,p=n^o,t+=(p^c)+R[13]+681279174,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[0]-358537222,c=(c<<11|c>>>21)+t<<0,A=c^t,o+=(A^n)+R[3]-722521979,o=(o<<16|o>>>16)+c<<0,n+=(A^o)+R[6]+76029189,n=(n<<23|n>>>9)+o<<0,p=n^o,t+=(p^c)+R[9]-640364487,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[12]-421815835,c=(c<<11|c>>>21)+t<<0,A=c^t,o+=(A^n)+R[15]+530742520,o=(o<<16|o>>>16)+c<<0,n+=(A^o)+R[2]-995338651,n=(n<<23|n>>>9)+o<<0,t+=(o^(n|~c))+R[0]-198630844,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[7]+1126891415,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[14]-1416354905,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[5]-57434055,n=(n<<21|n>>>11)+o<<0,t+=(o^(n|~c))+R[12]+1700485571,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[3]-1894986606,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[10]-1051523,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[1]-2054922799,n=(n<<21|n>>>11)+o<<0,t+=(o^(n|~c))+R[8]+1873313359,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[15]-30611744,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[6]-1560198380,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[13]+1309151649,n=(n<<21|n>>>11)+o<<0,t+=(o^(n|~c))+R[4]-145523070,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[11]-1120210379,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[2]+718787259,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[9]-343485551,n=(n<<21|n>>>11)+o<<0,this.first?(this.h0=t+1732584193<<0,this.h1=n-271733879<<0,this.h2=o-1732584194<<0,this.h3=c+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+n<<0,this.h2=this.h2+o<<0,this.h3=this.h3+c<<0)},S.prototype.hex=function(){this.finalize();var t=this.h0,n=this.h1,o=this.h2,c=this.h3;return f[t>>4&15]+f[t&15]+f[t>>12&15]+f[t>>8&15]+f[t>>20&15]+f[t>>16&15]+f[t>>28&15]+f[t>>24&15]+f[n>>4&15]+f[n&15]+f[n>>12&15]+f[n>>8&15]+f[n>>20&15]+f[n>>16&15]+f[n>>28&15]+f[n>>24&15]+f[o>>4&15]+f[o&15]+f[o>>12&15]+f[o>>8&15]+f[o>>20&15]+f[o>>16&15]+f[o>>28&15]+f[o>>24&15]+f[c>>4&15]+f[c&15]+f[c>>12&15]+f[c>>8&15]+f[c>>20&15]+f[c>>16&15]+f[c>>28&15]+f[c>>24&15]},S.prototype.toString=S.prototype.hex,S.prototype.digest=function(t){if(t==="hex")return this.hex();this.finalize();var n=this.h0,o=this.h1,c=this.h2,p=this.h3,A=[n&255,n>>8&255,n>>16&255,n>>24&255,o&255,o>>8&255,o>>16&255,o>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,p&255,p>>8&255,p>>16&255,p>>24&255];return A},S.prototype.array=S.prototype.digest,S.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),n=new Uint32Array(t);return n[0]=this.h0,n[1]=this.h1,n[2]=this.h2,n[3]=this.h3,t},S.prototype.buffer=S.prototype.arrayBuffer,S.prototype.base64=function(){for(var t,n,o,c="",p=this.array(),A=0;A<15;)t=p[A++],n=p[A++],o=p[A++],c+=P[t>>>2]+P[(t<<4|n>>>4)&63]+P[(n<<2|o>>>6)&63]+P[o&63];return t=p[A],c+=P[t>>>2]+P[t<<4&63]+"==",c};var i=l();C?M.exports=i:(E.md5=i,d&&(I=(function(){return i}).call(i,w,i,M),I!==void 0&&(M.exports=I)))})()}).call(this,w("./node_modules/webpack/buildin/module.js")(V))},"./lib/request.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/typeof.js"),I=function(d){switch(M(d)){case"string":return d;case"boolean":return d?"true":"false";case"number":return isFinite(d)?d:"";default:return""}},s=function(d,T,f,y){return T=T||"&",f=f||"=",d===null&&(d=void 0),M(d)==="object"?Object.keys(d).map(function(B){var m=encodeURIComponent(I(B))+f;return Array.isArray(d[B])?d[B].map(function(P){return m+encodeURIComponent(I(P))}).join(T):m+encodeURIComponent(I(d[B]))}).filter(Boolean).join(T):""},j=function(d,T,f){var y={},B=T.getAllResponseHeaders();return B&&B.length>0&&B.trim().split(`
`).forEach(function(m){if(m){var P=m.indexOf(":"),N=m.substr(0,P).trim().toLowerCase(),H=m.substr(P+1).trim();y[N]=H}}),{error:d,statusCode:T.status,statusMessage:T.statusText,headers:y,body:f}},E=function(d,T){return!T&&T==="text"?d.responseText:d.response},F=function(d,T){var f=(d.method||"GET").toUpperCase(),y=d.url;if(d.qs){var B=s(d.qs);B&&(y+=(y.indexOf("?")===-1?"?":"&")+B)}var m=new XMLHttpRequest;if(m.open(f,y,!0),m.responseType=d.dataType||"text",d.xhrFields)for(var P in d.xhrFields)m[P]=d.xhrFields[P];var N=d.headers;if(N)for(var H in N)N.hasOwnProperty(H)&&H.toLowerCase()!=="content-length"&&H.toLowerCase()!=="user-agent"&&H.toLowerCase()!=="origin"&&H.toLowerCase()!=="host"&&m.setRequestHeader(H,N[H]);return d.onProgress&&m.upload&&(m.upload.onprogress=d.onProgress),d.onDownloadProgress&&(m.onprogress=d.onDownloadProgress),d.timeout&&(m.timeout=d.timeout),m.ontimeout=function(D){var h=new Error("timeout");T(j(h,m))},m.onload=function(){T(j(null,m,E(m,d.dataType)))},m.onerror=function(D){var h=E(m,d.dataType);if(h)T(j(null,m,h));else{var l=m.statusText;!l&&m.status===0&&(l=new Error("CORS blocked or network error")),T(j(l,m,h))}},m.send(d.body||""),m};V.exports=F},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(V,ue){function w(M,I){if(!(M instanceof I))throw new TypeError("Cannot call a class as a function")}V.exports=w,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function I(j,E){for(var F=0;F<E.length;F++){var C=E[F];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,M(C.key),C)}}function s(j,E,F){return E&&I(j.prototype,E),F&&I(j,F),Object.defineProperty(j,"prototype",{writable:!1}),j}V.exports=s,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/typeof.js").default;function I(s,j){if(M(s)!=="object"||s===null)return s;var E=s[Symbol.toPrimitive];if(E!==void 0){var F=E.call(s,j||"default");if(M(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(s)}V.exports=I,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/typeof.js").default,I=w("./node_modules/@babel/runtime/helpers/toPrimitive.js");function s(j){var E=I(j,"string");return M(E)==="symbol"?E:String(E)}V.exports=s,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(V,ue){function w(M){"@babel/helpers - typeof";return V.exports=w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},V.exports.__esModule=!0,V.exports.default=V.exports,w(M)}V.exports=w,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(V,ue,w){const M=w("./node_modules/fast-xml-parser/src/validator.js"),I=w("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),s=w("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");V.exports={XMLParser:I,XMLValidator:M,XMLBuilder:s}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(V,ue){function w(M){return typeof M=="function"?M:Array.isArray(M)?I=>{for(const s of M)if(typeof s=="string"&&I===s||s instanceof RegExp&&s.test(I))return!0}:()=>!1}V.exports=w},"./node_modules/fast-xml-parser/src/util.js":function(V,ue,w){const M=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",I=M+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s="["+M+"]["+I+"]*",j=new RegExp("^"+s+"$"),E=function(C,d){const T=[];let f=d.exec(C);for(;f;){const y=[];y.startIndex=d.lastIndex-f[0].length;const B=f.length;for(let m=0;m<B;m++)y.push(f[m]);T.push(y),f=d.exec(C)}return T},F=function(C){const d=j.exec(C);return!(d===null||typeof d>"u")};ue.isExist=function(C){return typeof C<"u"},ue.isEmptyObject=function(C){return Object.keys(C).length===0},ue.merge=function(C,d,T){if(d){const f=Object.keys(d),y=f.length;for(let B=0;B<y;B++)T==="strict"?C[f[B]]=[d[f[B]]]:C[f[B]]=d[f[B]]}},ue.getValue=function(C){return ue.isExist(C)?C:""},ue.isName=F,ue.getAllMatches=E,ue.nameRegexp=s},"./node_modules/fast-xml-parser/src/validator.js":function(V,ue,w){const M=w("./node_modules/fast-xml-parser/src/util.js"),I={allowBooleanAttributes:!1,unpairedTags:[]};ue.validate=function(h,l){l=Object.assign({},I,l);const S=[];let i=!1,t=!1;h[0]==="\uFEFF"&&(h=h.substr(1));for(let n=0;n<h.length;n++)if(h[n]==="<"&&h[n+1]==="?"){if(n+=2,n=j(h,n),n.err)return n}else if(h[n]==="<"){let o=n;if(n++,h[n]==="!"){n=E(h,n);continue}else{let c=!1;h[n]==="/"&&(c=!0,n++);let p="";for(;n<h.length&&h[n]!==">"&&h[n]!==" "&&h[n]!=="	"&&h[n]!==`
`&&h[n]!=="\r";n++)p+=h[n];if(p=p.trim(),p[p.length-1]==="/"&&(p=p.substring(0,p.length-1),n--),!N(p)){let _;return p.trim().length===0?_="Invalid space after '<'.":_="Tag '"+p+"' is an invalid name.",m("InvalidTag",_,H(h,n))}const A=d(h,n);if(A===!1)return m("InvalidAttr","Attributes for '"+p+"' have open quote.",H(h,n));let R=A.value;if(n=A.index,R[R.length-1]==="/"){const _=n-R.length;R=R.substring(0,R.length-1);const L=f(R,l);if(L===!0)i=!0;else return m(L.err.code,L.err.msg,H(h,_+L.err.line))}else if(c)if(A.tagClosed){if(R.trim().length>0)return m("InvalidTag","Closing tag '"+p+"' can't have attributes or invalid starting.",H(h,o));if(S.length===0)return m("InvalidTag","Closing tag '"+p+"' has not been opened.",H(h,o));{const _=S.pop();if(p!==_.tagName){let L=H(h,_.tagStartPos);return m("InvalidTag","Expected closing tag '"+_.tagName+"' (opened in line "+L.line+", col "+L.col+") instead of closing tag '"+p+"'.",H(h,o))}S.length==0&&(t=!0)}}else return m("InvalidTag","Closing tag '"+p+"' doesn't have proper closing.",H(h,n));else{const _=f(R,l);if(_!==!0)return m(_.err.code,_.err.msg,H(h,n-R.length+_.err.line));if(t===!0)return m("InvalidXml","Multiple possible root nodes found.",H(h,n));l.unpairedTags.indexOf(p)!==-1||S.push({tagName:p,tagStartPos:o}),i=!0}for(n++;n<h.length;n++)if(h[n]==="<")if(h[n+1]==="!"){n++,n=E(h,n);continue}else if(h[n+1]==="?"){if(n=j(h,++n),n.err)return n}else break;else if(h[n]==="&"){const _=B(h,n);if(_==-1)return m("InvalidChar","char '&' is not expected.",H(h,n));n=_}else if(t===!0&&!s(h[n]))return m("InvalidXml","Extra text at the end",H(h,n));h[n]==="<"&&n--}}else{if(s(h[n]))continue;return m("InvalidChar","char '"+h[n]+"' is not expected.",H(h,n))}if(i){if(S.length==1)return m("InvalidTag","Unclosed tag '"+S[0].tagName+"'.",H(h,S[0].tagStartPos));if(S.length>0)return m("InvalidXml","Invalid '"+JSON.stringify(S.map(n=>n.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return m("InvalidXml","Start tag expected.",1);return!0};function s(h){return h===" "||h==="	"||h===`
`||h==="\r"}function j(h,l){const S=l;for(;l<h.length;l++)if(h[l]=="?"||h[l]==" "){const i=h.substr(S,l-S);if(l>5&&i==="xml")return m("InvalidXml","XML declaration allowed only at the start of the document.",H(h,l));if(h[l]=="?"&&h[l+1]==">"){l++;break}else continue}return l}function E(h,l){if(h.length>l+5&&h[l+1]==="-"&&h[l+2]==="-"){for(l+=3;l<h.length;l++)if(h[l]==="-"&&h[l+1]==="-"&&h[l+2]===">"){l+=2;break}}else if(h.length>l+8&&h[l+1]==="D"&&h[l+2]==="O"&&h[l+3]==="C"&&h[l+4]==="T"&&h[l+5]==="Y"&&h[l+6]==="P"&&h[l+7]==="E"){let S=1;for(l+=8;l<h.length;l++)if(h[l]==="<")S++;else if(h[l]===">"&&(S--,S===0))break}else if(h.length>l+9&&h[l+1]==="["&&h[l+2]==="C"&&h[l+3]==="D"&&h[l+4]==="A"&&h[l+5]==="T"&&h[l+6]==="A"&&h[l+7]==="["){for(l+=8;l<h.length;l++)if(h[l]==="]"&&h[l+1]==="]"&&h[l+2]===">"){l+=2;break}}return l}const F='"',C="'";function d(h,l){let S="",i="",t=!1;for(;l<h.length;l++){if(h[l]===F||h[l]===C)i===""?i=h[l]:i!==h[l]||(i="");else if(h[l]===">"&&i===""){t=!0;break}S+=h[l]}return i!==""?!1:{value:S,index:l,tagClosed:t}}const T=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function f(h,l){const S=M.getAllMatches(h,T),i={};for(let t=0;t<S.length;t++){if(S[t][1].length===0)return m("InvalidAttr","Attribute '"+S[t][2]+"' has no space in starting.",D(S[t]));if(S[t][3]!==void 0&&S[t][4]===void 0)return m("InvalidAttr","Attribute '"+S[t][2]+"' is without value.",D(S[t]));if(S[t][3]===void 0&&!l.allowBooleanAttributes)return m("InvalidAttr","boolean attribute '"+S[t][2]+"' is not allowed.",D(S[t]));const n=S[t][2];if(!P(n))return m("InvalidAttr","Attribute '"+n+"' is an invalid name.",D(S[t]));if(!i.hasOwnProperty(n))i[n]=1;else return m("InvalidAttr","Attribute '"+n+"' is repeated.",D(S[t]))}return!0}function y(h,l){let S=/\d/;for(h[l]==="x"&&(l++,S=/[\da-fA-F]/);l<h.length;l++){if(h[l]===";")return l;if(!h[l].match(S))break}return-1}function B(h,l){if(l++,h[l]===";")return-1;if(h[l]==="#")return l++,y(h,l);let S=0;for(;l<h.length;l++,S++)if(!(h[l].match(/\w/)&&S<20)){if(h[l]===";")break;return-1}return l}function m(h,l,S){return{err:{code:h,msg:l,line:S.line||S,col:S.col}}}function P(h){return M.isName(h)}function N(h){return M.isName(h)}function H(h,l){const S=h.substring(0,l).split(/\r?\n/);return{line:S.length,col:S[S.length-1].length+1}}function D(h){return h.startIndex+h[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(V,ue,w){const M=w("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),I=w("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,T){return T},attributeValueProcessor:function(d,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function j(d){this.options=Object.assign({},s,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=I(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=C),this.processTextOrObjNode=E,this.options.format?(this.indentate=F,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}j.prototype.build=function(d){return this.options.preserveOrder?M(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},j.prototype.j2x=function(d,T,f){let y="",B="";const m=f.join(".");for(let P in d)if(Object.prototype.hasOwnProperty.call(d,P))if(typeof d[P]>"u")this.isAttribute(P)&&(B+="");else if(d[P]===null)this.isAttribute(P)?B+="":P[0]==="?"?B+=this.indentate(T)+"<"+P+"?"+this.tagEndChar:B+=this.indentate(T)+"<"+P+"/"+this.tagEndChar;else if(d[P]instanceof Date)B+=this.buildTextValNode(d[P],P,"",T);else if(typeof d[P]!="object"){const N=this.isAttribute(P);if(N&&!this.ignoreAttributesFn(N,m))y+=this.buildAttrPairStr(N,""+d[P]);else if(!N)if(P===this.options.textNodeName){let H=this.options.tagValueProcessor(P,""+d[P]);B+=this.replaceEntitiesValue(H)}else B+=this.buildTextValNode(d[P],P,"",T)}else if(Array.isArray(d[P])){const N=d[P].length;let H="",D="";for(let h=0;h<N;h++){const l=d[P][h];if(!(typeof l>"u"))if(l===null)P[0]==="?"?B+=this.indentate(T)+"<"+P+"?"+this.tagEndChar:B+=this.indentate(T)+"<"+P+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){const S=this.j2x(l,T+1,f.concat(P));H+=S.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(D+=S.attrStr)}else H+=this.processTextOrObjNode(l,P,T,f);else if(this.options.oneListGroup){let S=this.options.tagValueProcessor(P,l);S=this.replaceEntitiesValue(S),H+=S}else H+=this.buildTextValNode(l,P,"",T)}this.options.oneListGroup&&(H=this.buildObjectNode(H,P,D,T)),B+=H}else if(this.options.attributesGroupName&&P===this.options.attributesGroupName){const N=Object.keys(d[P]),H=N.length;for(let D=0;D<H;D++)y+=this.buildAttrPairStr(N[D],""+d[P][N[D]])}else B+=this.processTextOrObjNode(d[P],P,T,f);return{attrStr:y,val:B}},j.prototype.buildAttrPairStr=function(d,T){return T=this.options.attributeValueProcessor(d,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+d:" "+d+'="'+T+'"'};function E(d,T,f,y){const B=this.j2x(d,f+1,y.concat(T));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],T,B.attrStr,f):this.buildObjectNode(B.val,T,B.attrStr,f)}j.prototype.buildObjectNode=function(d,T,f,y){if(d==="")return T[0]==="?"?this.indentate(y)+"<"+T+f+"?"+this.tagEndChar:this.indentate(y)+"<"+T+f+this.closeTag(T)+this.tagEndChar;{let B="</"+T+this.tagEndChar,m="";return T[0]==="?"&&(m="?",B=""),(f||f==="")&&d.indexOf("<")===-1?this.indentate(y)+"<"+T+f+m+">"+d+B:this.options.commentPropName!==!1&&T===this.options.commentPropName&&m.length===0?this.indentate(y)+`<!--${d}-->`+this.newLine:this.indentate(y)+"<"+T+f+m+this.tagEndChar+d+this.indentate(y)+B}},j.prototype.closeTag=function(d){let T="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${d}`,T},j.prototype.buildTextValNode=function(d,T,f,y){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(y)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(y)+`<!--${d}-->`+this.newLine;if(T[0]==="?")return this.indentate(y)+"<"+T+f+"?"+this.tagEndChar;{let B=this.options.tagValueProcessor(T,d);return B=this.replaceEntitiesValue(B),B===""?this.indentate(y)+"<"+T+f+this.closeTag(T)+this.tagEndChar:this.indentate(y)+"<"+T+f+">"+B+"</"+T+this.tagEndChar}},j.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const f=this.options.entities[T];d=d.replace(f.regex,f.val)}return d};function F(d){return this.options.indentBy.repeat(d)}function C(d){return d.startsWith(this.options.attributeNamePrefix)&&d!==this.options.textNodeName?d.substr(this.attrPrefixLen):!1}V.exports=j},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(V,ue){const w=`
`;function M(C,d){let T="";return d.format&&d.indentBy.length>0&&(T=w),I(C,d,"",T)}function I(C,d,T,f){let y="",B=!1;for(let m=0;m<C.length;m++){const P=C[m],N=s(P);if(N===void 0)continue;let H="";if(T.length===0?H=N:H=`${T}.${N}`,N===d.textNodeName){let i=P[N];E(H,d)||(i=d.tagValueProcessor(N,i),i=F(i,d)),B&&(y+=f),y+=i,B=!1;continue}else if(N===d.cdataPropName){B&&(y+=f),y+=`<![CDATA[${P[N][0][d.textNodeName]}]]>`,B=!1;continue}else if(N===d.commentPropName){y+=f+`<!--${P[N][0][d.textNodeName]}-->`,B=!0;continue}else if(N[0]==="?"){const i=j(P[":@"],d),t=N==="?xml"?"":f;let n=P[N][0][d.textNodeName];n=n.length!==0?" "+n:"",y+=t+`<${N}${n}${i}?>`,B=!0;continue}let D=f;D!==""&&(D+=d.indentBy);const h=j(P[":@"],d),l=f+`<${N}${h}`,S=I(P[N],d,H,D);d.unpairedTags.indexOf(N)!==-1?d.suppressUnpairedNode?y+=l+">":y+=l+"/>":(!S||S.length===0)&&d.suppressEmptyNode?y+=l+"/>":S&&S.endsWith(">")?y+=l+`>${S}${f}</${N}>`:(y+=l+">",S&&f!==""&&(S.includes("/>")||S.includes("</"))?y+=f+d.indentBy+S+f:y+=S,y+=`</${N}>`),B=!0}return y}function s(C){const d=Object.keys(C);for(let T=0;T<d.length;T++){const f=d[T];if(C.hasOwnProperty(f)&&f!==":@")return f}}function j(C,d){let T="";if(C&&!d.ignoreAttributes)for(let f in C){if(!C.hasOwnProperty(f))continue;let y=d.attributeValueProcessor(f,C[f]);y=F(y,d),y===!0&&d.suppressBooleanAttributes?T+=` ${f.substr(d.attributeNamePrefix.length)}`:T+=` ${f.substr(d.attributeNamePrefix.length)}="${y}"`}return T}function E(C,d){C=C.substr(0,C.length-d.textNodeName.length-1);let T=C.substr(C.lastIndexOf(".")+1);for(let f in d.stopNodes)if(d.stopNodes[f]===C||d.stopNodes[f]==="*."+T)return!0;return!1}function F(C,d){if(C&&C.length>0&&d.processEntities)for(let T=0;T<d.entities.length;T++){const f=d.entities[T];C=C.replace(f.regex,f.val)}return C}V.exports=M},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(V,ue,w){const M=w("./node_modules/fast-xml-parser/src/util.js");function I(f,y){const B={};if(f[y+3]==="O"&&f[y+4]==="C"&&f[y+5]==="T"&&f[y+6]==="Y"&&f[y+7]==="P"&&f[y+8]==="E"){y=y+9;let m=1,P=!1,N=!1,H="";for(;y<f.length;y++)if(f[y]==="<"&&!N){if(P&&E(f,y))y+=7,[entityName,val,y]=s(f,y+1),val.indexOf("&")===-1&&(B[T(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(P&&F(f,y))y+=8;else if(P&&C(f,y))y+=8;else if(P&&d(f,y))y+=9;else if(j)N=!0;else throw new Error("Invalid DOCTYPE");m++,H=""}else if(f[y]===">"){if(N?f[y-1]==="-"&&f[y-2]==="-"&&(N=!1,m--):m--,m===0)break}else f[y]==="["?P=!0:H+=f[y];if(m!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:B,i:y}}function s(f,y){let B="";for(;y<f.length&&f[y]!=="'"&&f[y]!=='"';y++)B+=f[y];if(B=B.trim(),B.indexOf(" ")!==-1)throw new Error("External entites are not supported");const m=f[y++];let P="";for(;y<f.length&&f[y]!==m;y++)P+=f[y];return[B,P,y]}function j(f,y){return f[y+1]==="!"&&f[y+2]==="-"&&f[y+3]==="-"}function E(f,y){return f[y+1]==="!"&&f[y+2]==="E"&&f[y+3]==="N"&&f[y+4]==="T"&&f[y+5]==="I"&&f[y+6]==="T"&&f[y+7]==="Y"}function F(f,y){return f[y+1]==="!"&&f[y+2]==="E"&&f[y+3]==="L"&&f[y+4]==="E"&&f[y+5]==="M"&&f[y+6]==="E"&&f[y+7]==="N"&&f[y+8]==="T"}function C(f,y){return f[y+1]==="!"&&f[y+2]==="A"&&f[y+3]==="T"&&f[y+4]==="T"&&f[y+5]==="L"&&f[y+6]==="I"&&f[y+7]==="S"&&f[y+8]==="T"}function d(f,y){return f[y+1]==="!"&&f[y+2]==="N"&&f[y+3]==="O"&&f[y+4]==="T"&&f[y+5]==="A"&&f[y+6]==="T"&&f[y+7]==="I"&&f[y+8]==="O"&&f[y+9]==="N"}function T(f){if(M.isName(f))return f;throw new Error(`Invalid entity name ${f}`)}V.exports=I},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(V,ue){const w={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(I,s){return s},attributeValueProcessor:function(I,s){return s},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(I,s,j){return I}},M=function(I){return Object.assign({},w,I)};ue.buildOptions=M,ue.defaultOptions=w},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(V,ue,w){const M=w("./node_modules/fast-xml-parser/src/util.js"),I=w("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),s=w("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),j=w("./node_modules/strnum/strnum.js"),E=w("./node_modules/fast-xml-parser/src/ignoreAttributes.js");class F{constructor(n){this.options=n,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(o,c)=>String.fromCharCode(Number.parseInt(c,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(o,c)=>String.fromCharCode(Number.parseInt(c,16))}},this.addExternalEntities=C,this.parseXml=B,this.parseTextData=d,this.resolveNameSpace=T,this.buildAttributesMap=y,this.isItStopNode=H,this.replaceEntitiesValue=P,this.readStopNodeData=S,this.saveTextToParentTag=N,this.addChild=m,this.ignoreAttributesFn=E(this.options.ignoreAttributes)}}function C(t){const n=Object.keys(t);for(let o=0;o<n.length;o++){const c=n[o];this.lastEntities[c]={regex:new RegExp("&"+c+";","g"),val:t[c]}}}function d(t,n,o,c,p,A,R){if(t!==void 0&&(this.options.trimValues&&!c&&(t=t.trim()),t.length>0)){R||(t=this.replaceEntitiesValue(t));const _=this.options.tagValueProcessor(n,t,o,p,A);return _==null?t:typeof _!=typeof t||_!==t?_:this.options.trimValues?i(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?i(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function T(t){if(this.options.removeNSPrefix){const n=t.split(":"),o=t.charAt(0)==="/"?"/":"";if(n[0]==="xmlns")return"";n.length===2&&(t=o+n[1])}return t}const f=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function y(t,n,o){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const c=M.getAllMatches(t,f),p=c.length,A={};for(let R=0;R<p;R++){const _=this.resolveNameSpace(c[R][1]);if(this.ignoreAttributesFn(_,n))continue;let L=c[R][4],J=this.options.attributeNamePrefix+_;if(_.length)if(this.options.transformAttributeName&&(J=this.options.transformAttributeName(J)),J==="__proto__"&&(J="#__proto__"),L!==void 0){this.options.trimValues&&(L=L.trim()),L=this.replaceEntitiesValue(L);const Q=this.options.attributeValueProcessor(_,L,n);Q==null?A[J]=L:typeof Q!=typeof L||Q!==L?A[J]=Q:A[J]=i(L,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(A[J]=!0)}if(!Object.keys(A).length)return;if(this.options.attributesGroupName){const R={};return R[this.options.attributesGroupName]=A,R}return A}}const B=function(t){t=t.replace(/\r\n?/g,`
`);const n=new I("!xml");let o=n,c="",p="";for(let A=0;A<t.length;A++)if(t[A]==="<")if(t[A+1]==="/"){const _=h(t,">",A,"Closing Tag is not closed.");let L=t.substring(A+2,_).trim();if(this.options.removeNSPrefix){const Y=L.indexOf(":");Y!==-1&&(L=L.substr(Y+1))}this.options.transformTagName&&(L=this.options.transformTagName(L)),o&&(c=this.saveTextToParentTag(c,o,p));const J=p.substring(p.lastIndexOf(".")+1);if(L&&this.options.unpairedTags.indexOf(L)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${L}>`);let Q=0;J&&this.options.unpairedTags.indexOf(J)!==-1?(Q=p.lastIndexOf(".",p.lastIndexOf(".")-1),this.tagsNodeStack.pop()):Q=p.lastIndexOf("."),p=p.substring(0,Q),o=this.tagsNodeStack.pop(),c="",A=_}else if(t[A+1]==="?"){let _=l(t,A,!1,"?>");if(!_)throw new Error("Pi Tag is not closed.");if(c=this.saveTextToParentTag(c,o,p),!(this.options.ignoreDeclaration&&_.tagName==="?xml"||this.options.ignorePiTags)){const L=new I(_.tagName);L.add(this.options.textNodeName,""),_.tagName!==_.tagExp&&_.attrExpPresent&&(L[":@"]=this.buildAttributesMap(_.tagExp,p,_.tagName)),this.addChild(o,L,p)}A=_.closeIndex+1}else if(t.substr(A+1,3)==="!--"){const _=h(t,"-->",A+4,"Comment is not closed.");if(this.options.commentPropName){const L=t.substring(A+4,_-2);c=this.saveTextToParentTag(c,o,p),o.add(this.options.commentPropName,[{[this.options.textNodeName]:L}])}A=_}else if(t.substr(A+1,2)==="!D"){const _=s(t,A);this.docTypeEntities=_.entities,A=_.i}else if(t.substr(A+1,2)==="!["){const _=h(t,"]]>",A,"CDATA is not closed.")-2,L=t.substring(A+9,_);c=this.saveTextToParentTag(c,o,p);let J=this.parseTextData(L,o.tagname,p,!0,!1,!0,!0);J==null&&(J=""),this.options.cdataPropName?o.add(this.options.cdataPropName,[{[this.options.textNodeName]:L}]):o.add(this.options.textNodeName,J),A=_+2}else{let _=l(t,A,this.options.removeNSPrefix),L=_.tagName;const J=_.rawTagName;let Q=_.tagExp,Y=_.attrExpPresent,te=_.closeIndex;this.options.transformTagName&&(L=this.options.transformTagName(L)),o&&c&&o.tagname!=="!xml"&&(c=this.saveTextToParentTag(c,o,p,!1));const he=o;if(he&&this.options.unpairedTags.indexOf(he.tagname)!==-1&&(o=this.tagsNodeStack.pop(),p=p.substring(0,p.lastIndexOf("."))),L!==n.tagname&&(p+=p?"."+L:L),this.isItStopNode(this.options.stopNodes,p,L)){let ce="";if(Q.length>0&&Q.lastIndexOf("/")===Q.length-1)L[L.length-1]==="/"?(L=L.substr(0,L.length-1),p=p.substr(0,p.length-1),Q=L):Q=Q.substr(0,Q.length-1),A=_.closeIndex;else if(this.options.unpairedTags.indexOf(L)!==-1)A=_.closeIndex;else{const Z=this.readStopNodeData(t,J,te+1);if(!Z)throw new Error(`Unexpected end of ${J}`);A=Z.i,ce=Z.tagContent}const ie=new I(L);L!==Q&&Y&&(ie[":@"]=this.buildAttributesMap(Q,p,L)),ce&&(ce=this.parseTextData(ce,L,p,!0,Y,!0,!0)),p=p.substr(0,p.lastIndexOf(".")),ie.add(this.options.textNodeName,ce),this.addChild(o,ie,p)}else{if(Q.length>0&&Q.lastIndexOf("/")===Q.length-1){L[L.length-1]==="/"?(L=L.substr(0,L.length-1),p=p.substr(0,p.length-1),Q=L):Q=Q.substr(0,Q.length-1),this.options.transformTagName&&(L=this.options.transformTagName(L));const ce=new I(L);L!==Q&&Y&&(ce[":@"]=this.buildAttributesMap(Q,p,L)),this.addChild(o,ce,p),p=p.substr(0,p.lastIndexOf("."))}else{const ce=new I(L);this.tagsNodeStack.push(o),L!==Q&&Y&&(ce[":@"]=this.buildAttributesMap(Q,p,L)),this.addChild(o,ce,p),o=ce}c="",A=te}}else c+=t[A];return n.child};function m(t,n,o){const c=this.options.updateTag(n.tagname,o,n[":@"]);c===!1||(typeof c=="string"&&(n.tagname=c),t.addChild(n))}const P=function(t){if(this.options.processEntities){for(let n in this.docTypeEntities){const o=this.docTypeEntities[n];t=t.replace(o.regx,o.val)}for(let n in this.lastEntities){const o=this.lastEntities[n];t=t.replace(o.regex,o.val)}if(this.options.htmlEntities)for(let n in this.htmlEntities){const o=this.htmlEntities[n];t=t.replace(o.regex,o.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function N(t,n,o,c){return t&&(c===void 0&&(c=Object.keys(n.child).length===0),t=this.parseTextData(t,n.tagname,o,!1,n[":@"]?Object.keys(n[":@"]).length!==0:!1,c),t!==void 0&&t!==""&&n.add(this.options.textNodeName,t),t=""),t}function H(t,n,o){const c="*."+o;for(const p in t){const A=t[p];if(c===A||n===A)return!0}return!1}function D(t,n,o=">"){let c,p="";for(let A=n;A<t.length;A++){let R=t[A];if(c)R===c&&(c="");else if(R==='"'||R==="'")c=R;else if(R===o[0])if(o[1]){if(t[A+1]===o[1])return{data:p,index:A}}else return{data:p,index:A};else R==="	"&&(R=" ");p+=R}}function h(t,n,o,c){const p=t.indexOf(n,o);if(p===-1)throw new Error(c);return p+n.length-1}function l(t,n,o,c=">"){const p=D(t,n+1,c);if(!p)return;let A=p.data;const R=p.index,_=A.search(/\s/);let L=A,J=!0;_!==-1&&(L=A.substring(0,_),A=A.substring(_+1).trimStart());const Q=L;if(o){const Y=L.indexOf(":");Y!==-1&&(L=L.substr(Y+1),J=L!==p.data.substr(Y+1))}return{tagName:L,tagExp:A,closeIndex:R,attrExpPresent:J,rawTagName:Q}}function S(t,n,o){const c=o;let p=1;for(;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){const A=h(t,">",o,`${n} is not closed`);if(t.substring(o+2,A).trim()===n&&(p--,p===0))return{tagContent:t.substring(c,o),i:A};o=A}else if(t[o+1]==="?")o=h(t,"?>",o+1,"StopNode is not closed.");else if(t.substr(o+1,3)==="!--")o=h(t,"-->",o+3,"StopNode is not closed.");else if(t.substr(o+1,2)==="![")o=h(t,"]]>",o,"StopNode is not closed.")-2;else{const A=l(t,o,">");A&&((A&&A.tagName)===n&&A.tagExp[A.tagExp.length-1]!=="/"&&p++,o=A.closeIndex)}}function i(t,n,o){if(n&&typeof t=="string"){const c=t.trim();return c==="true"?!0:c==="false"?!1:j(t,o)}else return M.isExist(t)?t:""}V.exports=F},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(V,ue,w){const{buildOptions:M}=w("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),I=w("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:s}=w("./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),j=w("./node_modules/fast-xml-parser/src/validator.js");class E{constructor(C){this.externalEntities={},this.options=M(C)}parse(C,d){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(d){d===!0&&(d={});const y=j.validate(C,d);if(y!==!0)throw Error(`${y.err.msg}:${y.err.line}:${y.err.col}`)}const T=new I(this.options);T.addExternalEntities(this.externalEntities);const f=T.parseXml(C);return this.options.preserveOrder||f===void 0?f:s(f,this.options)}addEntity(C,d){if(d.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(d==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[C]=d}}V.exports=E},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(V,ue,w){function M(F,C){return I(F,C)}function I(F,C,d){let T;const f={};for(let y=0;y<F.length;y++){const B=F[y],m=s(B);let P="";if(d===void 0?P=m:P=d+"."+m,m===C.textNodeName)T===void 0?T=B[m]:T+=""+B[m];else{if(m===void 0)continue;if(B[m]){let N=I(B[m],C,P);const H=E(N,C);B[":@"]?j(N,B[":@"],P,C):Object.keys(N).length===1&&N[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?N=N[C.textNodeName]:Object.keys(N).length===0&&(C.alwaysCreateTextNode?N[C.textNodeName]="":N=""),f[m]!==void 0&&f.hasOwnProperty(m)?(Array.isArray(f[m])||(f[m]=[f[m]]),f[m].push(N)):C.isArray(m,P,H)?f[m]=[N]:f[m]=N}}}return typeof T=="string"?T.length>0&&(f[C.textNodeName]=T):T!==void 0&&(f[C.textNodeName]=T),f}function s(F){const C=Object.keys(F);for(let d=0;d<C.length;d++){const T=C[d];if(T!==":@")return T}}function j(F,C,d,T){if(C){const f=Object.keys(C),y=f.length;for(let B=0;B<y;B++){const m=f[B];T.isArray(m,d+"."+m,!0,!0)?F[m]=[C[m]]:F[m]=C[m]}}}function E(F,C){const{textNodeName:d}=C,T=Object.keys(F).length;return!!(T===0||T===1&&(F[d]||typeof F[d]=="boolean"||F[d]===0))}ue.prettify=M},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(V,ue,w){class M{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,j){s==="__proto__"&&(s="#__proto__"),this.child.push({[s]:j})}addChild(s){s.tagname==="__proto__"&&(s.tagname="#__proto__"),s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,":@":s[":@"]}):this.child.push({[s.tagname]:s.child})}}V.exports=M},"./node_modules/process/browser.js":function(V,ue){var w=V.exports={},M,I;function s(){throw new Error("setTimeout has not been defined")}function j(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?M=setTimeout:M=s}catch{M=s}try{typeof clearTimeout=="function"?I=clearTimeout:I=j}catch{I=j}})();function E(N){if(M===setTimeout)return setTimeout(N,0);if((M===s||!M)&&setTimeout)return M=setTimeout,setTimeout(N,0);try{return M(N,0)}catch{try{return M.call(null,N,0)}catch{return M.call(this,N,0)}}}function F(N){if(I===clearTimeout)return clearTimeout(N);if((I===j||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(N);try{return I(N)}catch{try{return I.call(null,N)}catch{return I.call(this,N)}}}var C=[],d=!1,T,f=-1;function y(){!d||!T||(d=!1,T.length?C=T.concat(C):f=-1,C.length&&B())}function B(){if(!d){var N=E(y);d=!0;for(var H=C.length;H;){for(T=C,C=[];++f<H;)T&&T[f].run();f=-1,H=C.length}T=null,d=!1,F(N)}}w.nextTick=function(N){var H=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)H[D-1]=arguments[D];C.push(new m(N,H)),C.length===1&&!d&&E(B)};function m(N,H){this.fun=N,this.array=H}m.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function P(){}w.on=P,w.addListener=P,w.once=P,w.off=P,w.removeListener=P,w.removeAllListeners=P,w.emit=P,w.prependListener=P,w.prependOnceListener=P,w.listeners=function(N){return[]},w.binding=function(N){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(N){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(V,ue){const w=/^[-+]?0x[a-fA-F0-9]+$/,M=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const I={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function s(E,F={}){if(F=Object.assign({},I,F),!E||typeof E!="string")return E;let C=E.trim();if(F.skipLike!==void 0&&F.skipLike.test(C))return E;if(F.hex&&w.test(C))return Number.parseInt(C,16);{const d=M.exec(C);if(d){const T=d[1],f=d[2];let y=j(d[3]);const B=d[4]||d[6];if(!F.leadingZeros&&f.length>0&&T&&C[2]!==".")return E;if(!F.leadingZeros&&f.length>0&&!T&&C[1]!==".")return E;{const m=Number(C),P=""+m;return P.search(/[eE]/)!==-1||B?F.eNotation?m:E:C.indexOf(".")!==-1?P==="0"&&y===""||P===y||T&&P==="-"+y?m:E:f?y===P||T+y===P?m:E:C===P||C===T+P?m:E}}else return E}}function j(E){return E&&E.indexOf(".")!==-1&&(E=E.replace(/0+$/,""),E==="."?E="0":E[0]==="."?E="0"+E:E[E.length-1]==="."&&(E=E.substr(0,E.length-1))),E}V.exports=s},"./node_modules/webpack/buildin/amd-options.js":function(V,ue){(function(w){V.exports=w}).call(this,{})},"./node_modules/webpack/buildin/module.js":function(V,ue){V.exports=function(w){return w.webpackPolyfill||(w.deprecate=function(){},w.paths=[],w.children||(w.children=[]),Object.defineProperty(w,"loaded",{enumerable:!0,get:function(){return w.l}}),Object.defineProperty(w,"id",{enumerable:!0,get:function(){return w.i}}),w.webpackPolyfill=1),w}},"./package.json":function(V){V.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.8.7","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/typeof.js"),I=w("./src/session.js"),s=w("./src/async.js"),j=w("./src/event.js").EventProxy,E=w("./src/util.js"),F=w("./src/tracker.js");function C(i,t){var n=this,o=new j,c=i.TaskId,p=i.Bucket,A=i.Region,R=i.Key,_=i.Body,L=i.ChunkSize||i.SliceSize||n.options.ChunkSize,J=i.AsyncLimit,Q=i.StorageClass,Y=i.ServerSideEncryption,te,he,ce=i.onHashProgress,ie=i.tracker;ie&&ie.setParams({chunkSize:L}),o.on("error",function(Z){if(n._isRunningTask(c))return i.UploadData.UploadId&&I.removeUsing(i.UploadData.UploadId),Z.UploadId=i.UploadData.UploadId||"",t(Z)}),o.on("upload_complete",function(Z){var G=E.extend({UploadId:i.UploadData.UploadId||""},Z);t(null,G)}),o.on("upload_slice_complete",function(Z){var G={};E.each(i.Headers,function(ee,de){var ae=de.toLowerCase();(ae.indexOf("x-cos-meta-")===0||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(ae))&&(G[de]=ee)}),m.call(n,{Bucket:p,Region:A,Key:R,UploadId:Z.UploadId,SliceList:Z.SliceList,Headers:G,tracker:ie},function(ee,de){if(n._isRunningTask(c)){if(I.removeUsing(Z.UploadId),ee)return he(null,!0),o.emit("error",ee);I.removeUploadId.call(n,Z.UploadId),he({loaded:te,total:te},!0),o.emit("upload_complete",de)}})}),o.on("get_upload_data_finish",function(Z){var G=I.getFileId(_,i.ChunkSize,p,R);G&&I.saveUploadId.call(n,G,Z.UploadId,n.options.UploadIdCacheLimit),I.setUsing(Z.UploadId),he(null,!0),y.call(n,{TaskId:c,Bucket:p,Region:A,Key:R,Body:_,FileSize:te,SliceSize:L,AsyncLimit:J,ServerSideEncryption:Y,UploadData:Z,Headers:i.Headers,onProgress:he,tracker:ie},function(ee,de){if(n._isRunningTask(c)){if(ee)return he(null,!0),o.emit("error",ee);o.emit("upload_slice_complete",de)}})}),o.on("get_file_size_finish",function(){if(he=E.throttleOnProgress.call(n,te,i.onProgress),i.UploadData.UploadId)o.emit("get_upload_data_finish",i.UploadData);else{var Z=E.extend({TaskId:c,Bucket:p,Region:A,Key:R,Headers:i.Headers,StorageClass:Q,Body:_,FileSize:te,SliceSize:L,onHashProgress:ce,tracker:ie},i);d.call(n,Z,function(G,ee){if(n._isRunningTask(c)){if(G)return o.emit("error",G);i.UploadData.UploadId=ee.UploadId,i.UploadData.PartList=ee.PartList,o.emit("get_upload_data_finish",i.UploadData)}})}}),te=i.ContentLength,delete i.ContentLength,!i.Headers&&(i.Headers={}),E.each(i.Headers,function(Z,G){G.toLowerCase()==="content-length"&&delete i.Headers[G]}),function(){for(var Z=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],G=1024*1024,ee=0;ee<Z.length&&(G=Z[ee]*1024*1024,!(te/G<=n.options.MaxPartNumber));ee++);i.ChunkSize=i.SliceSize=L=Math.max(L,G)}(),te===0?(i.Body="",i.ContentLength=0,i.SkipTask=!0,n.putObject(i,t)):o.emit("get_file_size_finish")}function d(i,t){var n=i.TaskId,o=i.Bucket,c=i.Region,p=i.Key,A=i.StorageClass,R=this,_={},L=i.FileSize,J=i.SliceSize,Q=Math.ceil(L/J),Y=0,te=E.throttleOnProgress.call(R,L,i.onHashProgress),he=function(G,ee){var de=J*(G-1),ae=Math.min(de+J,L),re=ae-de;_[G]?ee(null,{PartNumber:G,ETag:_[G],Size:re}):E.fileSlice(i.Body,de,ae,!1,function(oe){E.getFileMd5(oe,function(ye,ge){if(ye)return ee(E.error(ye));var ke='"'+ge+'"';_[G]=ke,Y+=re,te({loaded:Y,total:L}),ee(null,{PartNumber:G,ETag:ke,Size:re})})})},ce=function(G,ee){var de=G.length;if(de===0)return ee(null,!0);if(de>Q)return ee(null,!1);if(de>1){var ae=Math.max(G[0].Size,G[1].Size);if(ae!==J)return ee(null,!1)}var re=function oe(ye){if(ye<de){var ge=G[ye];he(ge.PartNumber,function(ke,me){me&&me.ETag===ge.ETag&&me.Size===ge.Size?oe(ye+1):ee(null,!1)})}else ee(null,!0)};re(0)},ie=new j;ie.on("error",function(Z){if(R._isRunningTask(n))return t(Z)}),ie.on("upload_id_available",function(Z){var G={},ee=[];E.each(Z.PartList,function(re){G[re.PartNumber]=re});for(var de=1;de<=Q;de++){var ae=G[de];ae?(ae.PartNumber=de,ae.Uploaded=!0):ae={PartNumber:de,ETag:null,Uploaded:!1},ee.push(ae)}Z.PartList=ee,t(null,Z)}),ie.on("no_available_upload_id",function(){if(R._isRunningTask(n)){var Z=E.extend({Bucket:o,Region:c,Key:p,Query:E.clone(i.Query),StorageClass:A,Body:i.Body,calledBySdk:"sliceUploadFile",tracker:i.tracker},i),G=E.clone(i.Headers);delete G["x-cos-mime-limit"],Z.Headers=G,R.multipartInit(Z,function(ee,de){if(R._isRunningTask(n)){if(ee)return ie.emit("error",ee);var ae=de.UploadId;if(!ae)return t(E.error(new Error("no such upload id")));ie.emit("upload_id_available",{UploadId:ae,PartList:[]})}})}}),ie.on("has_and_check_upload_id",function(Z){Z=Z.reverse(),s.eachLimit(Z,1,function(G,ee){if(R._isRunningTask(n)){if(I.using[G]){ee();return}f.call(R,{Bucket:o,Region:c,Key:p,UploadId:G,tracker:i.tracker},function(de,ae){if(R._isRunningTask(n)){if(de)return I.removeUsing(G),ie.emit("error",de);var re=ae.PartList;re.forEach(function(oe){oe.PartNumber*=1,oe.Size*=1,oe.ETag=oe.ETag||""}),ce(re,function(oe,ye){if(R._isRunningTask(n)){if(oe)return ie.emit("error",oe);ye?ee({UploadId:G,PartList:re}):ee()}})}})}},function(G){R._isRunningTask(n)&&(te(null,!0),G&&G.UploadId?ie.emit("upload_id_available",G):ie.emit("no_available_upload_id"))})}),ie.on("seek_local_avail_upload_id",function(Z){var G=I.getFileId(i.Body,i.ChunkSize,o,p),ee=I.getUploadIdList.call(R,G);if(!G||!ee){ie.emit("has_and_check_upload_id",Z);return}var de=function ae(re){if(re>=ee.length){ie.emit("has_and_check_upload_id",Z);return}var oe=ee[re];if(!E.isInArray(Z,oe)){I.removeUploadId.call(R,oe),ae(re+1);return}if(I.using[oe]){ae(re+1);return}f.call(R,{Bucket:o,Region:c,Key:p,UploadId:oe,tracker:i.tracker},function(ye,ge){R._isRunningTask(n)&&(ye?(I.removeUploadId.call(R,oe),ae(re+1)):ie.emit("upload_id_available",{UploadId:oe,PartList:ge.PartList}))})};de(0)}),ie.on("get_remote_upload_id_list",function(){T.call(R,{Bucket:o,Region:c,Key:p,tracker:i.tracker},function(Z,G){if(R._isRunningTask(n)){if(Z)return ie.emit("error",Z);var ee=E.filter(G.UploadList,function(re){return re.Key===p&&(!A||re.StorageClass.toUpperCase()===A.toUpperCase())}).reverse().map(function(re){return re.UploadId||re.UploadID});if(ee.length)ie.emit("seek_local_avail_upload_id",ee);else{var de=I.getFileId(i.Body,i.ChunkSize,o,p),ae;de&&(ae=I.getUploadIdList.call(R,de))&&E.each(ae,function(re){I.removeUploadId.call(R,re)}),ie.emit("no_available_upload_id")}}})}),ie.emit("get_remote_upload_id_list")}function T(i,t){var n=this,o=[],c={Bucket:i.Bucket,Region:i.Region,Prefix:i.Key,calledBySdk:i.calledBySdk||"sliceUploadFile",tracker:i.tracker},p=function A(){n.multipartList(c,function(R,_){if(R)return t(R);o.push.apply(o,_.Upload||[]),_.IsTruncated==="true"?(c.KeyMarker=_.NextKeyMarker,c.UploadIdMarker=_.NextUploadIdMarker,A()):t(null,{UploadList:o})})};p()}function f(i,t){var n=this,o=[],c={Bucket:i.Bucket,Region:i.Region,Key:i.Key,UploadId:i.UploadId,calledBySdk:"sliceUploadFile",tracker:i.tracker},p=function A(){n.multipartListPart(c,function(R,_){if(R)return t(R);o.push.apply(o,_.Part||[]),_.IsTruncated==="true"?(c.PartNumberMarker=_.NextPartNumberMarker,A()):t(null,{PartList:o})})};p()}function y(i,t){var n=this,o=i.TaskId,c=i.Bucket,p=i.Region,A=i.Key,R=i.UploadData,_=i.FileSize,L=i.SliceSize,J=Math.min(i.AsyncLimit||n.options.ChunkParallelLimit||1,256),Q=i.Body,Y=Math.ceil(_/L),te=0,he=i.ServerSideEncryption,ce=i.Headers,ie=E.filter(R.PartList,function(G){return G.Uploaded&&(te+=G.PartNumber>=Y&&_%L||L),!G.Uploaded}),Z=i.onProgress;s.eachLimit(ie,J,function(G,ee){if(n._isRunningTask(o)){var de=G.PartNumber,ae=Math.min(_,G.PartNumber*L)-(G.PartNumber-1)*L,re=0;B.call(n,{TaskId:o,Bucket:c,Region:p,Key:A,SliceSize:L,FileSize:_,PartNumber:de,ServerSideEncryption:he,Body:Q,UploadData:R,Headers:ce,onProgress:function(ye){te+=ye.loaded-re,re=ye.loaded,Z({loaded:te,total:_})},tracker:i.tracker},function(oe,ye){n._isRunningTask(o)&&(!oe&&!ye.ETag&&(oe='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )'),oe?te-=re:(te+=ae-re,G.ETag=ye.ETag),Z({loaded:te,total:_}),ee(oe||null,ye))})}},function(G){if(n._isRunningTask(o)){if(G)return t(G);t(null,{UploadId:R.UploadId,SliceList:R.PartList})}})}function B(i,t){var n=this,o=i.TaskId,c=i.Bucket,p=i.Region,A=i.Key,R=i.FileSize,_=i.Body,L=i.PartNumber*1,J=i.SliceSize,Q=i.ServerSideEncryption,Y=i.UploadData,te=i.Headers||{},he=n.options.ChunkRetryTimes+1,ce=J*(L-1),ie=J,Z=ce+J;Z>R&&(Z=R,ie=Z-ce);var G=["x-cos-traffic-limit","x-cos-mime-limit"],ee={};E.each(te,function(ae,re){G.indexOf(re)>-1&&(ee[re]=ae)});var de=Y.PartList[L-1];s.retry(he,function(ae){n._isRunningTask(o)&&E.fileSlice(_,ce,Z,!0,function(re){n.multipartUpload({TaskId:o,Bucket:c,Region:p,Key:A,ContentLength:ie,PartNumber:L,UploadId:Y.UploadId,ServerSideEncryption:Q,Body:re,Headers:ee,onProgress:i.onProgress,calledBySdk:"sliceUploadFile",tracker:i.tracker},function(oe,ye){if(n._isRunningTask(o))return oe?ae(oe):(de.Uploaded=!0,ae(null,ye))})})},function(ae,re){if(n._isRunningTask(o))return t(ae,re)})}function m(i,t){var n=i.Bucket,o=i.Region,c=i.Key,p=i.UploadId,A=i.SliceList,R=this,_=this.options.ChunkRetryTimes+1,L=i.Headers,J=A.map(function(Q){return{PartNumber:Q.PartNumber,ETag:Q.ETag}});s.retry(_,function(Q){R.multipartComplete({Bucket:n,Region:o,Key:c,UploadId:p,Parts:J,Headers:L,calledBySdk:"sliceUploadFile",tracker:i.tracker},Q)},function(Q,Y){t(Q,Y)})}function P(i,t){var n=i.Bucket,o=i.Region,c=i.Key,p=i.UploadId,A=i.Level||"task",R=i.AsyncLimit,_=this,L=new j;if(L.on("error",function(J){return t(J)}),L.on("get_abort_array",function(J){N.call(_,{Bucket:n,Region:o,Key:c,Headers:i.Headers,AsyncLimit:R,AbortArray:J},t)}),A==="bucket")T.call(_,{Bucket:n,Region:o,calledBySdk:"abortUploadTask"},function(J,Q){if(J)return t(J);L.emit("get_abort_array",Q.UploadList||[])});else if(A==="file"){if(!c)return t(E.error(new Error("abort_upload_task_no_key")));T.call(_,{Bucket:n,Region:o,Key:c,calledBySdk:"abortUploadTask"},function(J,Q){if(J)return t(J);L.emit("get_abort_array",Q.UploadList||[])})}else if(A==="task"){if(!p)return t(E.error(new Error("abort_upload_task_no_id")));if(!c)return t(E.error(new Error("abort_upload_task_no_key")));L.emit("get_abort_array",[{Key:c,UploadId:p}])}else return t(E.error(new Error("abort_unknown_level")))}function N(i,t){var n=i.Bucket,o=i.Region,c=i.Key,p=i.AbortArray,A=i.AsyncLimit||1,R=this,_=0,L=new Array(p.length);s.eachLimit(p,A,function(J,Q){var Y=_;if(c&&c!==J.Key){L[Y]={error:{KeyNotMatch:!0}},Q(null);return}var te=J.UploadId||J.UploadID;R.multipartAbort({Bucket:n,Region:o,Key:J.Key,Headers:i.Headers,UploadId:te},function(he){var ce={Bucket:n,Region:o,Key:J.Key,UploadId:te};L[Y]={error:he,task:ce},Q(null)}),_++},function(J){if(J)return t(J);for(var Q=[],Y=[],te=0,he=L.length;te<he;te++){var ce=L[te];ce.task&&(ce.error?Y.push(ce.task):Q.push(ce.task))}return t(null,{successList:Q,errorList:Y})})}function H(i,t){var n=this,o=i.SliceSize===void 0?n.options.SliceSize:i.SliceSize,c=[],p=i.Body,A=p.size||p.length||0,R={TaskId:""};if(n.options.EnableReporter){var _=n.options.UseAccelerate||typeof n.options.Domain=="string"&&n.options.Domain.includes("accelerate."),L=A>o?"sliceUploadFile":"putObject";i.tracker=new F({Beacon:n.options.BeaconReporter,clsReporter:n.options.ClsReporter,bucket:i.Bucket,region:i.Region,apiName:"uploadFile",realApi:L,fileKey:i.Key,fileSize:A,accelerate:_,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}E.each(i,function(ce,ie){M(ce)!=="object"&&typeof ce!="function"&&(R[ie]=ce)});var J=i.onTaskReady,Q=function(ie){R.TaskId=ie,J&&J(ie)};i.onTaskReady=Q;var Y=A>o?"sliceUploadFile":"putObject",te=i.onFileFinish,he=function(ie,Z){i.tracker&&i.tracker.report(ie,Z),te&&te(ie,Z,R),t&&t(ie,Z)};c.push({api:Y,params:i,callback:he}),n._addTasks(c)}function D(i,t){var n=this,o=i.SliceSize===void 0?n.options.SliceSize:i.SliceSize,c=0,p=0,A=E.throttleOnProgress.call(n,p,i.onProgress),R=i.files.length,_=i.onFileFinish,L=Array(R),J=function(te,he,ce){A(null,!0),_&&_(te,he,ce),L[ce.Index]={options:ce,error:te,data:he},--R<=0&&t&&t(null,{files:L})},Q=[];E.each(i.files,function(Y,te){(function(){var he=Y.Body,ce=he.size||he.length||0,ie={Index:te,TaskId:""};if(!n.options.UseRawKey&&Y.Key&&Y.Key.substr(0,1)==="/"&&(Y.Key=Y.Key.substr(1)),c+=ce,n.options.EnableReporter){var Z=n.options.UseAccelerate||typeof n.options.Domain=="string"&&n.options.Domain.includes("accelerate."),G=ce>o?"sliceUploadFile":"putObject";Y.tracker=new F({Beacon:n.options.BeaconReporter,clsReporter:n.options.ClsReporter,bucket:Y.Bucket,region:Y.Region,apiName:"uploadFiles",realApi:G,fileKey:Y.Key,fileSize:ce,accelerate:Z,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}E.each(Y,function(me,Re){M(me)!=="object"&&typeof me!="function"&&(ie[Re]=me)});var ee=Y.onTaskReady,de=function(Re){ie.TaskId=Re,ee&&ee(Re)};Y.onTaskReady=de;var ae=0,re=Y.onProgress,oe=function(Re){p=p-ae+Re.loaded,ae=Re.loaded,re&&re(Re),A({loaded:p,total:c})};Y.onProgress=oe;var ye=ce>o?"sliceUploadFile":"putObject",ge=Y.onFileFinish,ke=function(Re,Oe){Y.tracker&&Y.tracker.report(Re,Oe),ge&&ge(Re,Oe),J&&J(Re,Oe,ie)};Q.push({api:ye,params:Y,callback:ke})})()}),n._addTasks(Q)}function h(i,t){var n=new j,o=this,c=i.Bucket,p=i.Region,A=i.Key,R=i.CopySource,_=E.getSourceParams.call(this,R);if(!_){t(E.error(new Error("CopySource format error")));return}var L=_.Bucket,J=_.Region,Q=decodeURIComponent(_.Key),Y=i.CopySliceSize===void 0?o.options.CopySliceSize:i.CopySliceSize;Y=Math.max(0,Y);var te=i.CopyChunkSize||this.options.CopyChunkSize,he=this.options.CopyChunkParallelLimit,ce=this.options.ChunkRetryTimes+1,ie=0,Z=0,G,ee,de={},ae={},re={};n.on("copy_slice_complete",function(oe){E.each(i.Headers,function(ge,ke){ke.toLowerCase().indexOf("x-cos-meta-")});var ye=E.map(oe.PartList,function(ge){return{PartNumber:ge.PartNumber,ETag:ge.ETag}});s.retry(ce,function(ge){o.multipartComplete({Bucket:c,Region:p,Key:A,UploadId:oe.UploadId,Parts:ye,tracker:i.tracker,calledBySdk:"sliceCopyFile"},ge)},function(ge,ke){if(I.removeUsing(oe.UploadId),ge)return ee(null,!0),t(ge);I.removeUploadId(oe.UploadId),ee({loaded:G,total:G},!0),t(null,ke)})}),n.on("get_copy_data_finish",function(oe){var ye=I.getCopyFileId(R,de,te,c,A);ye&&I.saveUploadId(ye,oe.UploadId,o.options.UploadIdCacheLimit),I.setUsing(oe.UploadId);var ge=E.filter(oe.PartList,function(ke){return ke.Uploaded&&(Z+=ke.PartNumber>=ie&&G%te||te),!ke.Uploaded});s.eachLimit(ge,he,function(ke,me){var Re=ke.PartNumber,Oe=ke.CopySourceRange,ze=ke.end-ke.start;s.retry(ce,function(Me){l.call(o,{Bucket:c,Region:p,Key:A,CopySource:R,UploadId:oe.UploadId,PartNumber:Re,CopySourceRange:Oe,tracker:i.tracker,calledBySdk:"sliceCopyFile"},Me)},function(Me,De){if(Me)return me(Me);Z+=ze,ee({loaded:Z,total:G}),ke.ETag=De.ETag,me(Me||null,De)})},function(ke){if(ke)return I.removeUsing(oe.UploadId),ee(null,!0),t(ke);n.emit("copy_slice_complete",oe)})}),n.on("get_chunk_size_finish",function(){var oe=function(){o.multipartInit({Bucket:c,Region:p,Key:A,Headers:re,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(Re,Oe){if(Re)return t(Re);i.UploadId=Oe.UploadId,n.emit("get_copy_data_finish",{UploadId:i.UploadId,PartList:i.PartList})})},ye=I.getCopyFileId(R,de,te,c,A),ge=I.getUploadIdList(ye);if(!ye||!ge)return oe();var ke=function me(Re){if(Re>=ge.length)return oe();var Oe=ge[Re];if(I.using[Oe])return me(Re+1);f.call(o,{Bucket:c,Region:p,Key:A,UploadId:Oe,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(ze,Me){if(ze)I.removeUploadId(Oe),me(Re+1);else{if(I.using[Oe])return me(Re+1);var De={},Qe=0;E.each(Me.PartList,function(je){var We=parseInt(je.Size),rt=Qe+We-1;De[je.PartNumber+"|"+Qe+"|"+rt]=je.ETag,Qe+=We}),E.each(i.PartList,function(je){var We=De[je.PartNumber+"|"+je.start+"|"+je.end];We&&(je.ETag=We,je.Uploaded=!0)}),n.emit("get_copy_data_finish",{UploadId:Oe,PartList:i.PartList})}})};ke(0)}),n.on("get_file_size_finish",function(){if(function(){for(var ye=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],ge=1024*1024,ke=0;ke<ye.length&&(ge=ye[ke]*1024*1024,!(G/ge<=o.options.MaxPartNumber));ke++);i.ChunkSize=te=Math.max(te,ge),ie=Math.ceil(G/te);for(var me=[],Re=1;Re<=ie;Re++){var Oe=(Re-1)*te,ze=Re*te<G?Re*te-1:G-1,Me={PartNumber:Re,start:Oe,end:ze,CopySourceRange:"bytes="+Oe+"-"+ze};me.push(Me)}i.PartList=me}(),i.Headers["x-cos-metadata-directive"]==="Replaced"?re=i.Headers:re=ae,re["x-cos-storage-class"]=i.Headers["x-cos-storage-class"]||ae["x-cos-storage-class"],re=E.clearKey(re),ae["x-cos-storage-class"]==="ARCHIVE"||ae["x-cos-storage-class"]==="DEEP_ARCHIVE"){var oe=ae["x-cos-restore"];if(!oe||oe==='ongoing-request="true"'){t(E.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete re["x-cos-copy-source"],delete re["x-cos-metadata-directive"],delete re["x-cos-copy-source-If-Modified-Since"],delete re["x-cos-copy-source-If-Unmodified-Since"],delete re["x-cos-copy-source-If-Match"],delete re["x-cos-copy-source-If-None-Match"],n.emit("get_chunk_size_finish")}),o.headObject({Bucket:L,Region:J,Key:Q,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(oe,ye){if(oe){oe.statusCode&&oe.statusCode===404?t(E.error(oe,{ErrorStatus:Q+" Not Exist"})):t(oe);return}if(G=i.FileSize=ye.headers["content-length"],G===void 0||!G){t(E.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(i.tracker&&i.tracker.setParams({httpSize:G}),ee=E.throttleOnProgress.call(o,G,i.onProgress),G<=Y)i.Headers["x-cos-metadata-directive"]||(i.Headers["x-cos-metadata-directive"]="Copy"),o.putObjectCopy(Object.assign(i,{calledBySdk:"sliceCopyFile"}),function(ke,me){if(ke)return ee(null,!0),t(ke);ee({loaded:G,total:G},!0),t(ke,me)});else{var ge=ye.headers;de=ge,ae={"Cache-Control":ge["cache-control"],"Content-Disposition":ge["content-disposition"],"Content-Encoding":ge["content-encoding"],"Content-Type":ge["content-type"],Expires:ge.expires,"x-cos-storage-class":ge["x-cos-storage-class"]},E.each(ge,function(ke,me){var Re="x-cos-meta-";me.indexOf(Re)===0&&me.length>Re.length&&(ae[me]=ke)}),n.emit("get_file_size_finish")}})}function l(i,t){var n=i.TaskId,o=i.Bucket,c=i.Region,p=i.Key,A=i.CopySource,R=i.UploadId,_=i.PartNumber*1,L=i.CopySourceRange,J=this.options.ChunkRetryTimes+1,Q=this;s.retry(J,function(Y){Q.uploadPartCopy({TaskId:n,Bucket:o,Region:c,Key:p,CopySource:A,UploadId:R,PartNumber:_,CopySourceRange:L,tracker:i.tracker,calledBySdk:i.calledBySdk},function(te,he){Y(te||null,he)})},function(Y,te){return t(Y,te)})}var S={sliceUploadFile:C,abortUploadTask:P,uploadFile:H,uploadFiles:D,sliceCopyFile:h};V.exports.init=function(i,t){t.transferToTaskMethod(S,"sliceUploadFile"),E.each(S,function(n,o){i.prototype[o]=E.apiWrapper(o,n)})}},"./src/async.js":function(V,ue){var w=function(j,E,F,C){if(C=C||function(){},!j.length||E<=0)return C();var d=0,T=0,f=0;(function y(){if(d>=j.length)return C();for(;f<E&&T<j.length;)T+=1,f+=1,F(j[T-1],function(B){B?(C(B),C=function(){}):(d+=1,f-=1,d>=j.length?C():y())})})()},M=function(j,E,F){var C=function d(T){E(function(f,y){f&&T<j?d(T+1):F(f,y)})};j<1?F():C(1)},I={eachLimit:w,retry:M};V.exports=I},"./src/base.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/typeof.js"),I=w("./lib/request.js"),s=w("./src/util.js");function j(e,a){var r=this.options.Protocol||(s.isBrowser&&(typeof location>"u"?"undefined":M(location))==="object"&&location.protocol==="http:"?"http:":"https:"),u=this.options.ServiceDomain,v=e.AppId||this.options.appId,g=e.Region;u?(u=u.replace(/\{\{AppId\}\}/gi,v||"").replace(/\{\{Region\}\}/gi,g||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(u)||(u=r+"//"+u),u.slice(-1)==="/"&&(u=u.slice(0,-1))):g?u=r+"//cos."+g+".myqcloud.com":u=r+"//service.cos.myqcloud.com";var k="",b=g?"cos."+g+".myqcloud.com":"service.cos.myqcloud.com",K=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");b===K&&(k=b),X.call(this,{Action:"name/cos:GetService",url:u,method:"GET",headers:e.Headers,SignHost:k,tracker:e.tracker},function(le,se){if(le)return a(le);var Te=se&&se.ListAllMyBucketsResult&&se.ListAllMyBucketsResult.Buckets&&se.ListAllMyBucketsResult.Buckets.Bucket||[];Te=s.isArray(Te)?Te:[Te];var W=se&&se.ListAllMyBucketsResult&&se.ListAllMyBucketsResult.Owner||{};a(null,{Buckets:Te,Owner:W,statusCode:se.statusCode,headers:se.headers})})}function E(e,a){var r=this,u="";if(e.BucketAZConfig){var v={BucketAZConfig:e.BucketAZConfig};u=s.json2xml({CreateBucketConfiguration:v})}X.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:u,tracker:e.tracker},function(g,k){if(g)return a(g);var b=Ke({protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});a(null,{Location:b,statusCode:k.statusCode,headers:k.headers})})}function F(e,a){X.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},a)}function C(e,a){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r.marker=e.Marker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,X.call(this,{Action:"name/cos:GetBucket",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.ListBucketResult||{},k=g.Contents||[],b=g.CommonPrefixes||[];k=s.isArray(k)?k:[k],b=s.isArray(b)?b:[b];var K=s.clone(g);s.extend(K,{Contents:k,CommonPrefixes:b,statusCode:v.statusCode,headers:v.headers}),a(null,K)})}function d(e,a){X.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function T(e,a){var r=e.Headers,u="";if(e.AccessControlPolicy){var v=s.clone(e.AccessControlPolicy||{}),g=v.Grants||v.Grant;g=s.isArray(g)?g:[g],delete v.Grant,delete v.Grants,v.AccessControlList={Grant:g},u=s.json2xml({AccessControlPolicy:v}),r["Content-Type"]="application/xml",r["Content-MD5"]=s.b64(s.md5(u))}s.each(r,function(k,b){b.indexOf("x-cos-grant-")===0&&(r[b]=qe(r[b]))}),X.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r,action:"acl",body:u,tracker:e.tracker},function(k,b){if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function f(e,a){X.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(r,u){if(r)return a(r);var v=u.AccessControlPolicy||{},g=v.Owner||{},k=v.AccessControlList.Grant||[];k=s.isArray(k)?k:[k];var b=xe(v);u.headers&&u.headers["x-cos-acl"]&&(b.ACL=u.headers["x-cos-acl"]),b=s.extend(b,{Owner:g,Grants:k,statusCode:u.statusCode,headers:u.headers}),a(null,b)})}function y(e,a){var r=e.CORSConfiguration||{},u=r.CORSRules||e.CORSRules||[];u=s.clone(s.isArray(u)?u:[u]),s.each(u,function(b){s.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(K){var le=K+"s",se=b[le]||b[K]||[];delete b[le],b[K]=s.isArray(se)?se:[se]})});var v={CORSRule:u};e.ResponseVary&&(v.ResponseVary=e.ResponseVary);var g=s.json2xml({CORSConfiguration:v}),k=e.Headers;k["Content-Type"]="application/xml",k["Content-MD5"]=s.b64(s.md5(g)),X.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:g,action:"cors",headers:k,tracker:e.tracker},function(b,K){if(b)return a(b);a(null,{statusCode:K.statusCode,headers:K.headers})})}function B(e,a){X.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchCORSConfiguration"){var v={CORSRules:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=u.CORSConfiguration||{},k=g.CORSRules||g.CORSRule||[];k=s.clone(s.isArray(k)?k:[k]);var b=g.ResponseVary;s.each(k,function(K){s.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(le){var se=le+"s",Te=K[se]||K[le]||[];delete K[le],K[se]=s.isArray(Te)?Te:[Te]})}),a(null,{CORSRules:k,ResponseVary:b,statusCode:u.statusCode,headers:u.headers})})}function m(e,a){X.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode||r.statusCode,headers:u.headers})})}function P(e,a){X.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},a)}function N(e,a){var r=e.Policy;try{typeof r=="string"&&(r=JSON.parse(r))}catch{}if(!r||typeof r=="string")return a(s.error(new Error("Policy format error")));var u=JSON.stringify(r);r.version||(r.version="2.0");var v=e.Headers;v["Content-Type"]="application/json",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:u,headers:v,tracker:e.tracker},function(g,k){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function H(e,a){X.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(r,u){if(r)return r.statusCode&&r.statusCode===403?a(s.error(r,{ErrorStatus:"Access Denied"})):r.statusCode&&r.statusCode===405?a(s.error(r,{ErrorStatus:"Method Not Allowed"})):r.statusCode&&r.statusCode===404?a(s.error(r,{ErrorStatus:"Policy Not Found"})):a(r);var v={};try{v=JSON.parse(u.body)}catch{}a(null,{Policy:v,statusCode:u.statusCode,headers:u.headers})})}function D(e,a){X.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode||r.statusCode,headers:u.headers})})}function h(e,a){var r=e.Tagging||{},u=r.TagSet||r.Tags||e.Tags||[];u=s.clone(s.isArray(u)?u:[u]);var v=s.json2xml({Tagging:{TagSet:{Tag:u}}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"tagging",headers:g,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function l(e,a){X.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var v={Tags:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=[];try{g=u.Tagging.TagSet.Tag||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Tags:g,statusCode:u.statusCode,headers:u.headers})})}function S(e,a){X.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function i(e,a){var r=e.LifecycleConfiguration||{},u=r.Rules||e.Rules||[];u=s.clone(u);var v=s.json2xml({LifecycleConfiguration:{Rule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"lifecycle",headers:g,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function t(e,a){X.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchLifecycleConfiguration"){var v={Rules:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=[];try{g=u.LifecycleConfiguration.Rule||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Rules:g,statusCode:u.statusCode,headers:u.headers})})}function n(e,a){X.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function o(e,a){if(!e.VersioningConfiguration){a(s.error(new Error("missing param VersioningConfiguration")));return}var r=e.VersioningConfiguration||{},u=s.json2xml({VersioningConfiguration:r}),v=e.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"versioning",headers:v,tracker:e.tracker},function(g,k){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function c(e,a){X.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(r,u){r||!u.VersioningConfiguration&&(u.VersioningConfiguration={}),a(r,u)})}function p(e,a){var r=s.clone(e.ReplicationConfiguration),u=s.json2xml({ReplicationConfiguration:r});u=u.replace(/<(\/?)Rules>/gi,"<$1Rule>"),u=u.replace(/<(\/?)Tags>/gi,"<$1Tag>");var v=e.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"replication",headers:v,tracker:e.tracker},function(g,k){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function A(e,a){X.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="ReplicationConfigurationnotFoundError")){var v={ReplicationConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}!u.ReplicationConfiguration&&(u.ReplicationConfiguration={}),u.ReplicationConfiguration.Rule&&(u.ReplicationConfiguration.Rules=s.makeArray(u.ReplicationConfiguration.Rule),delete u.ReplicationConfiguration.Rule),a(r,u)})}function R(e,a){X.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function _(e,a){if(!e.WebsiteConfiguration){a(s.error(new Error("missing param WebsiteConfiguration")));return}var r=s.clone(e.WebsiteConfiguration||{}),u=r.RoutingRules||r.RoutingRule||[];u=s.isArray(u)?u:[u],delete r.RoutingRule,delete r.RoutingRules,u.length&&(r.RoutingRules={RoutingRule:u});var v=s.json2xml({WebsiteConfiguration:r}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"website",headers:g,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function L(e,a){X.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchWebsiteConfiguration"){var v={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=u.WebsiteConfiguration||{};if(g.RoutingRules){var k=s.clone(g.RoutingRules.RoutingRule||[]);k=s.makeArray(k),g.RoutingRules=k}a(null,{WebsiteConfiguration:g,statusCode:u.statusCode,headers:u.headers})})}function J(e,a){X.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function Q(e,a){if(!e.RefererConfiguration){a(s.error(new Error("missing param RefererConfiguration")));return}var r=s.clone(e.RefererConfiguration||{}),u=r.DomainList||{},v=u.Domains||u.Domain||[];v=s.isArray(v)?v:[v],v.length&&(r.DomainList={Domain:v});var g=s.json2xml({RefererConfiguration:r}),k=e.Headers;k["Content-Type"]="application/xml",k["Content-MD5"]=s.b64(s.md5(g)),X.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:g,action:"referer",headers:k,tracker:e.tracker},function(b,K){if(b&&b.statusCode===204)return a(null,{statusCode:b.statusCode});if(b)return a(b);a(null,{statusCode:K.statusCode,headers:K.headers})})}function Y(e,a){X.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchRefererConfiguration"){var v={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=u.RefererConfiguration||{};if(g.DomainList){var k=s.makeArray(g.DomainList.Domain||[]);g.DomainList={Domains:k}}a(null,{RefererConfiguration:g,statusCode:u.statusCode,headers:u.headers})})}function te(e,a){var r=e.DomainConfiguration||{},u=r.DomainRule||e.DomainRule||[];u=s.clone(u);var v=s.json2xml({DomainConfiguration:{DomainRule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"domain",headers:g,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function he(e,a){X.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,u){if(r)return a(r);var v=[];try{v=u.DomainConfiguration.DomainRule||[]}catch{}v=s.clone(s.isArray(v)?v:[v]),a(null,{DomainRule:v,statusCode:u.statusCode,headers:u.headers})})}function ce(e,a){X.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function ie(e,a){var r=e.OriginConfiguration||{},u=r.OriginRule||e.OriginRule||[];u=s.clone(u);var v=s.json2xml({OriginConfiguration:{OriginRule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"origin",headers:g,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function Z(e,a){X.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,u){if(r)return a(r);var v=[];try{v=u.OriginConfiguration.OriginRule||[]}catch{}v=s.clone(s.isArray(v)?v:[v]),a(null,{OriginRule:v,statusCode:u.statusCode,headers:u.headers})})}function G(e,a){X.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function ee(e,a){var r=s.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),u=e.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=s.b64(s.md5(r)),X.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"logging",headers:u,tracker:e.tracker},function(v,g){if(v&&v.statusCode===204)return a(null,{statusCode:v.statusCode});if(v)return a(v);a(null,{statusCode:g.statusCode,headers:g.headers})})}function de(e,a){X.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(r,u){if(r)return a(r);a(null,{BucketLoggingStatus:u.BucketLoggingStatus,statusCode:u.statusCode,headers:u.headers})})}function ae(e,a,r){var u=s.clone(a.InventoryConfiguration);if(u.OptionalFields){var v=u.OptionalFields||[];u.OptionalFields={Field:v}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var g=u.Destination.COSBucketDestination.Encryption;Object.keys(g).indexOf("SSECOS")>-1&&(g["SSE-COS"]=g.SSECOS,delete g.SSECOS)}var k=s.json2xml({InventoryConfiguration:u}),b=a.Headers;b["Content-Type"]="application/xml",b["Content-MD5"]=s.b64(s.md5(k));var K=e==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";X.call(this,{Action:K,method:e,Bucket:a.Bucket,Region:a.Region,body:k,action:"inventory",qs:{id:a.Id},headers:b,tracker:a.tracker},function(le,se){if(le&&le.statusCode===204)return r(null,{statusCode:le.statusCode});if(le)return r(le);r(null,{statusCode:se.statusCode,headers:se.headers})})}function re(e,a){return ae.call(this,"PUT",e,a)}function oe(e,a){return ae.call(this,"POST",e,a)}function ye(e,a){X.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,u){if(r)return a(r);var v=u.InventoryConfiguration;if(v&&v.OptionalFields&&v.OptionalFields.Field){var g=v.OptionalFields.Field;s.isArray(g)||(g=[g]),v.OptionalFields=g}if(v.Destination&&v.Destination.COSBucketDestination&&v.Destination.COSBucketDestination.Encryption){var k=v.Destination.COSBucketDestination.Encryption;Object.keys(k).indexOf("SSE-COS")>-1&&(k.SSECOS=k["SSE-COS"],delete k["SSE-COS"])}a(null,{InventoryConfiguration:v,statusCode:u.statusCode,headers:u.headers})})}function ge(e,a){X.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(r,u){if(r)return a(r);var v=u.ListInventoryConfigurationResult,g=v.InventoryConfiguration||[];g=s.isArray(g)?g:[g],delete v.InventoryConfiguration,s.each(g,function(k){if(k&&k.OptionalFields&&k.OptionalFields.Field){var b=k.OptionalFields.Field;s.isArray(b)||(b=[b]),k.OptionalFields=b}if(k.Destination&&k.Destination.COSBucketDestination&&k.Destination.COSBucketDestination.Encryption){var K=k.Destination.COSBucketDestination.Encryption;Object.keys(K).indexOf("SSE-COS")>-1&&(K.SSECOS=K["SSE-COS"],delete K["SSE-COS"])}}),v.InventoryConfigurations=g,s.extend(v,{statusCode:u.statusCode,headers:u.headers}),a(null,v)})}function ke(e,a){X.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function me(e,a){if(!e.AccelerateConfiguration){a(s.error(new Error("missing param AccelerateConfiguration")));return}var r={AccelerateConfiguration:e.AccelerateConfiguration||{}},u=s.json2xml(r),v={};v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"accelerate",headers:v,tracker:e.tracker},function(g,k){if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function Re(e,a){X.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(r,u){r||!u.AccelerateConfiguration&&(u.AccelerateConfiguration={}),a(r,u)})}function Oe(e,a){var r=e.ServerSideEncryptionConfiguration||{},u=r.Rule||r.Rules||[],v=s.json2xml({ServerSideEncryptionConfiguration:{Rule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"encryption",headers:g,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function ze(e,a){X.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.code==="NoSuchEncryptionConfiguration"){var v={EncryptionConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=s.makeArray(u.EncryptionConfiguration&&u.EncryptionConfiguration.Rule||[]);u.EncryptionConfiguration={Rules:g},a(r,u)})}function Me(e,a){X.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function De(e,a){X.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(r,u){if(r){var v=r.statusCode;return e.Headers["If-Modified-Since"]&&v&&v===304?a(null,{NotModified:!0,statusCode:v}):a(r)}u.ETag=s.attr(u.headers,"etag",""),a(null,u)})}function Qe(e,a){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r["key-marker"]=e.KeyMarker,r["version-id-marker"]=e.VersionIdMarker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,X.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"versions",tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.ListVersionsResult||{},k=g.DeleteMarker||[];k=s.isArray(k)?k:[k];var b=g.Version||[];b=s.isArray(b)?b:[b];var K=s.clone(g);delete K.DeleteMarker,delete K.Version,s.extend(K,{DeleteMarkers:k,Versions:b,statusCode:v.statusCode,headers:v.headers}),a(null,K)})}function je(e,a){if(this.options.ObjectKeySimplifyCheck){var r=s.simplifyPath(e.Key);if(r==="/"){a(s.error(new Error("The Getobject Key is illegal")));return}}var u=e.Query||{},v=e.QueryString||"",g=s.throttleOnProgress.call(this,0,e.onProgress),k=e.tracker;k&&k.setParams({signStartTime:new Date().getTime()}),u["response-content-type"]=e.ResponseContentType,u["response-content-language"]=e.ResponseContentLanguage,u["response-expires"]=e.ResponseExpires,u["response-cache-control"]=e.ResponseCacheControl,u["response-content-disposition"]=e.ResponseContentDisposition,u["response-content-encoding"]=e.ResponseContentEncoding,X.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:u,qsStr:v,rawBody:!0,onDownloadProgress:g,tracker:k},function(b,K){if(g(null,!0),b){var le=b.statusCode;return e.Headers["If-Modified-Since"]&&le&&le===304?a(null,{NotModified:!0}):a(b)}a(null,{Body:K.body,ETag:s.attr(K.headers,"etag",""),statusCode:K.statusCode,headers:K.headers})})}function We(e,a){var r=this,u=e.ContentLength,v=s.throttleOnProgress.call(r,u,e.onProgress),g=e.Headers;!g["Cache-Control"]&&!g["cache-control"]&&(g["Cache-Control"]=""),!g["Content-Type"]&&!g["content-type"]&&(g["Content-Type"]=e.Body&&e.Body.type||"");var k=e.UploadAddMetaMd5||r.options.UploadAddMetaMd5||r.options.UploadCheckContentMd5,b=e.tracker;k&&b&&b.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(k,e.Body,function(K){K&&(b&&b.setParams({md5EndTime:new Date().getTime()}),r.options.UploadCheckContentMd5&&(g["Content-MD5"]=s.b64(K)),(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5)&&(g["x-cos-meta-md5"]=K)),e.ContentLength!==void 0&&(g["Content-Length"]=e.ContentLength),v(null,!0),X.call(r,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:v,tracker:b},function(le,se){if(le)return v(null,!0),a(le);v({loaded:u,total:u},!0);var Te=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key});Te=Te.substr(Te.indexOf("://")+3),se.Location=Te,se.ETag=s.attr(se.headers,"etag",""),a(null,se)})},e.onHashProgress)}function rt(e,a){X.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(r,u){if(r){var v=r.statusCode;return v&&v===404?a(null,{BucketNotFound:!0,statusCode:v}):a(r)}a(null,{statusCode:u.statusCode,headers:u.headers})})}function ht(e,a){var r={};e.VersionId&&(r.versionId=e.VersionId),X.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,action:"acl",tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.AccessControlPolicy||{},k=g.Owner||{},b=g.AccessControlList&&g.AccessControlList.Grant||[];b=s.isArray(b)?b:[b];var K=xe(g);delete K.GrantWrite,v.headers&&v.headers["x-cos-acl"]&&(K.ACL=v.headers["x-cos-acl"]),K=s.extend(K,{Owner:k,Grants:b,statusCode:v.statusCode,headers:v.headers}),a(null,K)})}function gt(e,a){var r=e.Headers,u="";if(e.AccessControlPolicy){var v=s.clone(e.AccessControlPolicy||{}),g=v.Grants||v.Grant;g=s.isArray(g)?g:[g],delete v.Grant,delete v.Grants,v.AccessControlList={Grant:g},u=s.json2xml({AccessControlPolicy:v}),r["Content-Type"]="application/xml",r["Content-MD5"]=s.b64(s.md5(u))}s.each(r,function(k,b){b.indexOf("x-cos-grant-")===0&&(r[b]=qe(r[b]))}),X.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:r,body:u,tracker:e.tracker},function(k,b){if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function vt(e,a){var r=e.Headers;r.Origin=e.Origin,r["Access-Control-Request-Method"]=e.AccessControlRequestMethod,r["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,X.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,tracker:e.tracker},function(u,v){if(u)return u.statusCode&&u.statusCode===403?a(null,{OptionsForbidden:!0,statusCode:u.statusCode}):a(u);var g=v.headers||{};a(null,{AccessControlAllowOrigin:g["access-control-allow-origin"],AccessControlAllowMethods:g["access-control-allow-methods"],AccessControlAllowHeaders:g["access-control-allow-headers"],AccessControlExposeHeaders:g["access-control-expose-headers"],AccessControlMaxAge:g["access-control-max-age"],statusCode:v.statusCode,headers:v.headers})})}function pt(e,a){var r=this,u=e.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]="");var v=e.CopySource||"",g=s.getSourceParams.call(this,v);if(!g){a(s.error(new Error("CopySource format error")));return}var k=g.Bucket,b=g.Region,K=decodeURIComponent(g.Key);X.call(this,{Scope:[{action:"name/cos:GetObject",bucket:k,region:b,prefix:K},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(le,se){if(le)return a(le);var Te=s.clone(se.CopyObjectResult||{}),W=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});s.extend(Te,{Location:W,statusCode:se.statusCode,headers:se.headers}),a(null,Te)})}function Ne(e,a){var r=e.CopySource||"",u=s.getSourceParams.call(this,r);if(!u){a(s.error(new Error("CopySource format error")));return}var v=u.Bucket,g=u.Region,k=decodeURIComponent(u.Key);X.call(this,{Scope:[{action:"name/cos:GetObject",bucket:v,region:g,prefix:k},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(b,K){if(b)return a(b);var le=s.clone(K.CopyPartResult||{});s.extend(le,{statusCode:K.statusCode,headers:K.headers}),a(null,le)})}function z(e,a){var r=e.Objects||[],u=e.Quiet;r=s.isArray(r)?r:[r];var v=s.json2xml({Delete:{Object:r,Quiet:u||!1}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v));var k=s.map(r,function(b){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:b.Key}});X.call(this,{Scope:k,method:"POST",Bucket:e.Bucket,Region:e.Region,body:v,action:"delete",headers:g,tracker:e.tracker},function(b,K){if(b)return a(b);var le=K.DeleteResult||{},se=le.Deleted||[],Te=le.Error||[];se=s.isArray(se)?se:[se],Te=s.isArray(Te)?Te:[Te];var W=s.clone(le);s.extend(W,{Error:Te,Deleted:se,statusCode:K.statusCode,headers:K.headers}),a(null,W)})}function x(e,a){var r=e.Headers;if(!e.RestoreRequest){a(s.error(new Error("missing param RestoreRequest")));return}var u=e.RestoreRequest||{},v=s.json2xml({RestoreRequest:u});r["Content-Type"]="application/xml",r["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:v,action:"restore",headers:r,tracker:e.tracker},a)}function O(e,a){var r=e.Tagging||{},u=r.TagSet||r.Tags||e.Tags||[];u=s.clone(s.isArray(u)?u:[u]);var v=s.json2xml({Tagging:{TagSet:{Tag:u}}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:v,action:"tagging",headers:g,VersionId:e.VersionId,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:b.statusCode,headers:b.headers})})}function U(e,a){X.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var v={Tags:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=[];try{g=u.Tagging.TagSet.Tag||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Tags:g,statusCode:u.statusCode,headers:u.headers})})}function q(e,a){X.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function $(e,a){var r=e.SelectType;if(!r)return a(s.error(new Error("missing param SelectType")));var u=e.SelectRequest||{},v=s.json2xml({SelectRequest:u}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:v,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(k,b){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);var K=s.parseSelectPayload(b.body);a(null,{statusCode:b.statusCode,headers:b.headers,Body:K.body,Payload:K.payload})})}function ne(e,a){var r=this,u=e.Headers,v=e.tracker;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=e.Body&&e.Body.type||"");var g=e.Body&&(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5);g&&v&&v.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(g,e.Body,function(k){k&&(e.Headers["x-cos-meta-md5"]=k),g&&v&&v.setParams({md5EndTime:new Date().getTime()}),X.call(r,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:v},function(b,K){if(b)return v&&v.parent&&v.parent.setParams({errorNode:"multipartInit"}),a(b);if(K=s.clone(K||{}),K&&K.InitiateMultipartUploadResult)return a(null,s.extend(K.InitiateMultipartUploadResult,{statusCode:K.statusCode,headers:K.headers}));a(null,K)})},e.onHashProgress)}function fe(e,a){var r=this;s.getFileSize("multipartUpload",e,function(){var u=e.tracker,v=r.options.UploadCheckContentMd5;v&&u&&u.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(v,e.Body,function(g){g&&(e.Headers["Content-MD5"]=s.b64(g)),v&&u&&u.setParams({md5EndTime:new Date().getTime()}),u&&u.setParams({partNumber:e.PartNumber}),X.call(r,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:u},function(k,b){if(k)return u&&u.parent&&u.parent.setParams({errorNode:"multipartUpload"}),a(k);a(null,{ETag:s.attr(b.headers,"etag",""),statusCode:b.statusCode,headers:b.headers})})})})}function ve(e,a){for(var r=this,u=e.UploadId,v=e.Parts,g=e.tracker,k=0,b=v.length;k<b;k++)v[k].ETag&&v[k].ETag.indexOf('"')===0||(v[k].ETag='"'+v[k].ETag+'"');var K=s.json2xml({CompleteMultipartUpload:{Part:v}});K=K.replace(/\n\s*/g,"");var le=e.Headers;le["Content-Type"]="application/xml",le["Content-MD5"]=s.b64(s.md5(K)),X.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:u},body:K,headers:le,tracker:g},function(se,Te){if(se)return g&&g.parent&&g.parent.setParams({errorNode:"multipartComplete"}),a(se);var W=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),Se=Te.CompleteMultipartUploadResult||{};if(Se.ProcessResults&&(Se.UploadResult={OriginalInfo:{Key:Se.Key,Location:W,ETag:Se.ETag,ImageInfo:Se.ImageInfo},ProcessResults:Se.ProcessResults},delete Se.ImageInfo,delete Se.ProcessResults),Se.CallbackResult){var Le=Se.CallbackResult;if(Le.Status==="200"&&Le.CallbackBody)try{Se.CallbackBody=JSON.parse(s.decodeBase64(Le.CallbackBody))}catch{Se.CallbackBody={}}else Se.CallbackError=Le.Error||{};delete Se.CallbackResult}if(Se.ReturnBodyResult){var Ue=Se.ReturnBodyResult;if(Ue.Status==="200"&&Ue.ReturnBody)try{Se.ReturnBody=JSON.parse(s.decodeBase64(Ue.ReturnBody))}catch{Se.ReturnBody={}}else Se.ReturnError={Code:Ue.Code,Message:Ue.Message,Status:Ue.Status};delete Se.ReturnBodyResult}var Fe=s.extend(Se,{Location:W,statusCode:Te.statusCode,headers:Te.headers});a(null,Fe)})}function Be(e,a){var r={};r.delimiter=e.Delimiter,r["encoding-type"]=e.EncodingType,r.prefix=e.Prefix||"",r["max-uploads"]=e.MaxUploads,r["key-marker"]=e.KeyMarker,r["upload-id-marker"]=e.UploadIdMarker,r=s.clearKey(r);var u=e.tracker;u&&u.setParams({signStartTime:new Date().getTime()}),X.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"uploads",tracker:u},function(v,g){if(v)return u&&u.parent&&u.parent.setParams({errorNode:"multipartList"}),a(v);if(g&&g.ListMultipartUploadsResult){var k=g.ListMultipartUploadsResult.Upload||[];k=s.isArray(k)?k:[k],g.ListMultipartUploadsResult.Upload=k}var b=s.clone(g.ListMultipartUploadsResult||{});s.extend(b,{statusCode:g.statusCode,headers:g.headers}),a(null,b)})}function Ee(e,a){var r={},u=e.tracker;r.uploadId=e.UploadId,r["encoding-type"]=e.EncodingType,r["max-parts"]=e.MaxParts,r["part-number-marker"]=e.PartNumberMarker,X.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:u},function(v,g){if(v)return u&&u.parent&&u.parent.setParams({errorNode:"multipartListPart"}),a(v);var k=g.ListPartsResult||{},b=k.Part||[];b=s.isArray(b)?b:[b],k.Part=b;var K=s.clone(k);s.extend(K,{statusCode:g.statusCode,headers:g.headers}),a(null,K)})}function we(e,a){var r={};r.uploadId=e.UploadId,X.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:e.tracker},function(u,v){if(u)return a(u);a(null,{statusCode:v.statusCode,headers:v.headers})})}function Pe(e,a){X.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(r,u){if(r)return a(r);u&&u.body&&(u.Body=u.body,delete u.body),a(r,u)})}function _e(e,a){var r=e.Headers;!r["Cache-Control"]&&!r["cache-control"]&&(r["Cache-Control"]=""),!r["Content-Type"]&&!r["content-type"]&&(r["Content-Type"]=e.Body&&e.Body.type||""),X.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(u,v){if(u)return a(u);a(null,v)})}function Je(e){var a=this;return s.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:a.options.UseRawKey,SystemClockOffset:a.options.SystemClockOffset})}function Ve(e,a){var r=this,u=e.UseAccelerate===void 0?r.options.UseAccelerate:e.UseAccelerate,v=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:u?"accelerate":e.Region,object:e.Key}),g="";e.Query&&(g+=s.obj2str(e.Query)),e.QueryString&&(g+=(g?"&":"")+e.QueryString);var k=v;if(e.Sign!==void 0&&!e.Sign)return g&&(k+="?"+g),a(null,{Url:k}),k;var b=tt.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:v}),K=st.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:b,ForceSignHost:e.ForceSignHost===!1?!1:r.options.ForceSignHost},function(le,se){if(a){if(le){a(le);return}var Te=function(Le){var Ue=Le.match(/q-url-param-list.*?(?=&)/g)[0],Fe="q-url-param-list="+encodeURIComponent(Ue.replace(/q-url-param-list=/,"")).toLowerCase(),He=new RegExp(Ue,"g"),Ge=Le.replace(He,Fe);return Ge},W=v;W+="?"+(se.Authorization.indexOf("q-signature")>-1?Te(se.Authorization):"sign="+encodeURIComponent(se.Authorization)),se.SecurityToken&&(W+="&x-cos-security-token="+se.SecurityToken),se.ClientIP&&(W+="&clientIP="+se.ClientIP),se.ClientUA&&(W+="&clientUA="+se.ClientUA),se.Token&&(W+="&token="+se.Token),g&&(W+="&"+g),setTimeout(function(){a(null,{Url:W})})}});return K?(k+="?"+K.Authorization+(K.SecurityToken?"&x-cos-security-token="+K.SecurityToken:""),g&&(k+="&"+g)):g&&(k+="?"+g),k}function xe(e){var a={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},r={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},u=e&&e.AccessControlList||{},v=u.Grant;v&&(v=s.isArray(v)?v:[v]);var g={READ:0,WRITE:0,FULL_CONTROL:0};return v&&v.length&&s.each(v,function(k){var b=k.Grantee.URI&&k.Grantee.URI.endsWith("/groups/global/AllUsers");k.Grantee.ID==="qcs::cam::anyone:anyone"||b?g[k.Permission]=1:k.Grantee.ID!==e.Owner.ID&&a[r[k.Permission]].push('id="'+k.Grantee.ID+'"')}),g.FULL_CONTROL||g.WRITE&&g.READ?a.ACL="public-read-write":g.READ?a.ACL="public-read":a.ACL="private",s.each(r,function(k){a[k]=qe(a[k].join(","))}),a}function qe(e){var a=e.split(","),r={},u,v;for(u=0;u<a.length;)v=a[u].trim(),r[v]?a.splice(u,1):(r[v]=!0,a[u]=v,u++);return a.join(",")}function Ke(e){var a=e.region||"",r=e.bucket||"",u=r.substr(0,r.lastIndexOf("-")),v=r.substr(r.lastIndexOf("-")+1),g=e.domain,k=e.object;typeof g=="function"&&(g=g({Bucket:r,Region:a})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var b=e.protocol||(s.isBrowser&&(typeof location>"u"?"undefined":M(location))==="object"&&location.protocol==="http:"?"http:":"https:");g||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(a)>-1?g="{Region}.myqcloud.com":g="cos.{Region}.myqcloud.com",e.ForcePathStyle||(g="{Bucket}."+g)),g=g.replace(/\{\{AppId\}\}/gi,v).replace(/\{\{Bucket\}\}/gi,u).replace(/\{\{Region\}\}/gi,a).replace(/\{\{.*?\}\}/gi,""),g=g.replace(/\{AppId\}/gi,v).replace(/\{BucketName\}/gi,u).replace(/\{Bucket\}/gi,r).replace(/\{Region\}/gi,a).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(g)||(g=b+"//"+g),g.slice(-1)==="/"&&(g=g.slice(0,-1));var K=g;return e.ForcePathStyle&&(K+="/"+r),K+="/",k&&(K+=s.camSafeUrlEncode(k).replace(/%2F/g,"/")),e.isLocation&&(K=K.replace(/^https?:\/\//,"")),K}var tt=function(a){if(!a.Bucket||!a.Region)return"";var r=a.UseAccelerate===void 0?this.options.UseAccelerate:a.UseAccelerate,u=a.Url||Ke({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:a.Bucket,region:r?"accelerate":a.Region}),v=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return v};function st(e,a){var r=s.clone(e.Headers),u="";s.each(r,function(be,Ce){(be===""||["content-type","cache-control","expires"].indexOf(Ce.toLowerCase())>-1)&&delete r[Ce],Ce.toLowerCase()==="host"&&(u=be)});var v=e.ForceSignHost!==!1;!u&&e.SignHost&&v&&(r.Host=e.SignHost);var g=!1,k=function(Ce,pe){g||(g=!0,pe&&pe.XCosSecurityToken&&!pe.SecurityToken&&(pe=s.clone(pe),pe.SecurityToken=pe.XCosSecurityToken,delete pe.XCosSecurityToken),a&&a(Ce,pe))},b=this,K=e.Bucket||"",le=e.Region||"",se=e.Key||"";b.options.ForcePathStyle&&K&&(se=K+"/"+se);var Te="/"+se,W={},Se=e.Scope;if(!Se){var Le=e.Action||"",Ue=e.ResourceKey||e.Key||"";Se=e.Scope||[{action:Le,bucket:K,region:le,prefix:Ue}]}var Fe=s.md5(JSON.stringify(Se));b._StsCache=b._StsCache||[],function(){var be,Ce;for(be=b._StsCache.length-1;be>=0;be--){Ce=b._StsCache[be];var pe=Math.round(s.getSkewTime(b.options.SystemClockOffset)/1e3)+30;if(Ce.StartTime&&pe<Ce.StartTime||pe>=Ce.ExpiredTime){b._StsCache.splice(be,1);continue}if(!Ce.ScopeLimit||Ce.ScopeLimit&&Ce.ScopeKey===Fe){W=Ce;break}}}();var He=function(){var Ce="";W.StartTime&&e.Expires?Ce=W.StartTime+";"+(W.StartTime+e.Expires*1):W.StartTime&&W.ExpiredTime&&(Ce=W.StartTime+";"+W.ExpiredTime);var pe=s.getAuth({SecretId:W.TmpSecretId,SecretKey:W.TmpSecretKey,Method:e.Method,Pathname:Te,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:b.options.UseRawKey,SystemClockOffset:b.options.SystemClockOffset,KeyTime:Ce,ForceSignHost:v}),Ae={Authorization:pe,SecurityToken:W.SecurityToken||W.XCosSecurityToken||"",Token:W.Token||"",ClientIP:W.ClientIP||"",ClientUA:W.ClientUA||"",SignFrom:"client"};k(null,Ae)},Ge=function(Ce){if(Ce.Authorization){var pe=!1,Ae=Ce.Authorization;if(Ae)if(Ae.indexOf(" ")>-1)pe=!1;else if(Ae.indexOf("q-sign-algorithm=")>-1&&Ae.indexOf("q-ak=")>-1&&Ae.indexOf("q-sign-time=")>-1&&Ae.indexOf("q-key-time=")>-1&&Ae.indexOf("q-url-param-list=")>-1)pe=!0;else try{Ae=atob(Ae),Ae.indexOf("a=")>-1&&Ae.indexOf("k=")>-1&&Ae.indexOf("t=")>-1&&Ae.indexOf("r=")>-1&&Ae.indexOf("b=")>-1&&(pe=!0)}catch{}if(!pe)return s.error(new Error("getAuthorization callback params format error"))}else{if(!Ce.TmpSecretId)return s.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Ce.TmpSecretKey)return s.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Ce.SecurityToken&&!Ce.XCosSecurityToken)return s.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Ce.ExpiredTime)return s.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Ce.ExpiredTime&&Ce.ExpiredTime.toString().length!==10)return s.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Ce.StartTime&&Ce.StartTime.toString().length!==10)return s.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(W.ExpiredTime&&W.ExpiredTime-s.getSkewTime(b.options.SystemClockOffset)/1e3>60)He();else if(b.options.getAuthorization)b.options.getAuthorization.call(b,{Bucket:K,Region:le,Method:e.Method,Key:se,Pathname:Te,Query:e.Query,Headers:r,Scope:Se,SystemClockOffset:b.options.SystemClockOffset,ForceSignHost:v},function(be){typeof be=="string"&&(be={Authorization:be});var Ce=Ge(be);if(Ce)return k(Ce);be.Authorization?k(null,be):(W=be||{},W.Scope=Se,W.ScopeKey=Fe,b._StsCache.push(W),He())});else if(b.options.getSTS)b.options.getSTS.call(b,{Bucket:K,Region:le},function(be){W=be||{},W.Scope=Se,W.ScopeKey=Fe,W.TmpSecretId||(W.TmpSecretId=W.SecretId),W.TmpSecretKey||(W.TmpSecretKey=W.SecretKey);var Ce=Ge(W);if(Ce)return k(Ce);b._StsCache.push(W),He()});else return function(){var be="";if(b.options.StartTime&&e.Expires){if(b.options.StartTime.toString().length!==10)return k(s.error(new Error('params "StartTime" should be 10 digits')));be=b.options.StartTime+";"+(b.options.StartTime+e.Expires*1)}else if(b.options.StartTime&&b.options.ExpiredTime){if(b.options.StartTime.toString().length!==10)return k(s.error(new Error('params "StartTime" should be 10 digits')));if(b.options.ExpiredTime.toString().length!==10)return k(s.error(new Error('params "ExpiredTime" should be 10 digits')));be=b.options.StartTime+";"+b.options.ExpiredTime*1}var Ce=s.getAuth({SecretId:e.SecretId||b.options.SecretId,SecretKey:e.SecretKey||b.options.SecretKey,Method:e.Method,Pathname:Te,Query:e.Query,Headers:r,Expires:e.Expires,KeyTime:be,UseRawKey:b.options.UseRawKey,SystemClockOffset:b.options.SystemClockOffset,ForceSignHost:v}),pe={Authorization:Ce,SecurityToken:b.options.SecurityToken||b.options.XCosSecurityToken,SignFrom:"client"};return k(null,pe),pe}();return""}function yt(e){var a=this,r=!1,u=!1,v=!1,g=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var k=e.error.Code,b=e.error.Message;(k==="RequestTimeTooSkewed"||k==="AccessDenied"&&b==="Request has expired")&&(u=!0)}catch{}if(e)if(u&&g){var K=Date.parse(g);this.options.CorrectClockSkew&&Math.abs(s.getSkewTime(this.options.SystemClockOffset)-K)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=K-Date.now(),r=!0)}else Math.floor(e.statusCode/100)===5?r=!0:e.message==="CORS blocked or network error"&&(v=!0,r=a.options.AutoSwitchHost);return{canRetry:r,networkError:v}}function Ct(e){var a=e.requestUrl,r=e.clientCalcSign,u=e.networkError;if(!this.options.AutoSwitchHost||!a||!r||!u)return!1;var v=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,g=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,k=v.test(a)&&!g.test(a);return k}function X(e,a){var r=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=s.clearKey(e.qs),e.headers&&(e.headers=s.clearKey(e.headers)),e.qs&&(e.qs=s.clearKey(e.qs));var u=s.clone(e.qs);e.action&&(u[e.action]="");var v=e.url||e.Url,g=e.SignHost||tt.call(this,{Bucket:e.Bucket,Region:e.Region,Url:v}),k=e.tracker,b=function K(le){var se=r.options.SystemClockOffset;k&&k.setParams({signStartTime:new Date().getTime(),httpRetryTimes:le-1}),e.SwitchHost&&(g=g.replace(/myqcloud.com/,"tencentcos.cn")),st.call(r,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:u,Headers:e.headers,SignHost:g,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:r.options.ForceSignHost,SwitchHost:e.SwitchHost},function(Te,W){if(Te){a(Te);return}k&&k.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=W,kt.call(r,e,function(Se,Le){k&&k.setParams({httpEndTime:new Date().getTime()});var Ue=!1,Fe=!1;if(Se){var He=yt.call(r,Se);Ue=He.canRetry||se!==r.options.SystemClockOffset,Fe=He.networkError}if(Se&&le<2&&Ue){e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var Ge=Ct.call(r,{requestUrl:(Se==null?void 0:Se.url)||"",clientCalcSign:W.SignFrom==="client",networkError:Fe});e.SwitchHost=Ge,e.retry=!0,K(le+1)}else a(Se,Le)})})};b(1)}function kt(e,a){var r=this,u=e.TaskId;if(!(u&&!r._isRunningTask(u))){var v=e.Bucket,g=e.Region,k=e.Key,b=e.method||"GET",K=e.Url||e.url,le=e.body,se=e.rawBody;r.options.UseAccelerate&&(g="accelerate"),K=K||Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:v,region:g,object:k}),e.SwitchHost&&(K=K.replace(/myqcloud.com/,"tencentcos.cn"));var Te=k?K:"";e.action&&(K=K+"?"+(s.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(K.indexOf("?")>-1?K=K+"&"+e.qsStr:K=K+"?"+e.qsStr);var W={method:b,url:K,headers:e.headers,qs:e.qs,body:le},Se="x-cos-security-token";if(s.isCIHost(K)&&(Se="x-ci-security-token"),W.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(W.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(W.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(W.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(W.headers[Se]=e.AuthData.SecurityToken),e.Action&&(W.action=e.Action),W.key=e.Key||e.ResourceKey,W.headers&&(W.headers=s.clearKey(W.headers)),e.retry&&(W.headers["x-cos-sdk-retry"]=!0),W=s.clearKey(W),e.onProgress&&typeof e.onProgress=="function"){var Le=le&&(le.size||le.length)||0;W.onProgress=function(pe){if(!(u&&!r._isRunningTask(u))){var Ae=pe?pe.loaded:0;e.onProgress({loaded:Ae,total:Le})}}}e.onDownloadProgress&&(W.onDownloadProgress=e.onDownloadProgress),e.DataType&&(W.dataType=e.DataType),this.options.Timeout&&(W.timeout=this.options.Timeout),r.options.ForcePathStyle&&(W.pathStyle=r.options.ForcePathStyle),r.emit("before-send",W);var Ue=W.url.includes("accelerate."),Fe=W.qs?Object.keys(W.qs).map(function(pe){return"".concat(pe,"=").concat(W.qs[pe])}).join("&"):"",He=Fe?W.url+"?"+Fe:W.url;if(e.tracker){var Ge;e.tracker.setParams({url:He,httpMethod:W.method,accelerate:Ue,httpSize:((Ge=W.body)===null||Ge===void 0?void 0:Ge.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:Te,accelerate:Ue})}var be=(r.options.Request||I)(W,function(pe){if(!(pe&&pe.error==="abort")){var Ae={options:W,error:pe&&pe.error,statusCode:pe&&pe.statusCode||0,statusMessage:pe&&pe.statusMessage||"",headers:pe&&pe.headers||{},body:pe&&pe.body};r.emit("after-receive",Ae);var St=Ae.error,ut=Ae.body,$e={statusCode:Ae.statusCode,statusMessage:Ae.statusMessage,headers:Ae.headers},mt,Xe=function(Ze,Ie){if(u&&r.off("inner-kill-task",Ce),!mt){mt=!0;var nt={};if($e&&$e.statusCode&&(nt.statusCode=$e.statusCode),$e&&$e.headers&&(nt.headers=$e.headers),Ze)W.url&&(nt.url=W.url),W.method&&(nt.method=W.method),Ze=s.extend(Ze||{},nt),a(Ze,null);else{if(e.Action==="name/cos:PutObject"){var Rt={};for(var Et in e.headers){var Nt=Et.toLowerCase();Rt[Nt]=e.headers[Et]}Rt["x-cos-callback"]?Ie.Error?(Ie.CallbackError=s.clone(Ie.Error),delete Ie.Error):Ie.CallbackBody=s.clone(Ie):Rt["x-cos-return-body"]&&(Ie.Error?(Ie.ReturnError=s.clone(Ie.Error),delete Ie.Error):Ie.ReturnBody=s.clone(Ie))}Ie=s.extend(Ie||{},nt),a(null,Ie)}be=null}};if(St)return Xe(s.error(St));var ct=$e.statusCode,bt=Math.floor(ct/100)===2;if(se){if(bt)return Xe(null,{body:ut});if(ut instanceof Blob){s.readAsBinaryString(ut,function(At){var Ze=s.parseResBody(At),Ie=Ze.Error||Ze;return Xe(s.error(new Error(Ie.Message||"response body error"),{code:Ie.Code,error:Ie}))});return}}var Tt=s.parseResBody(ut),at=Tt.Error||Tt;bt?Xe(null,Tt):at?Xe(s.error(new Error(at.Message),{code:at.Code,error:at})):ct?Xe(s.error(new Error($e.statusMessage),{code:""+ct})):ct&&Xe(s.error(new Error("statusCode error")))}}),Ce=function pe(Ae){Ae.TaskId===u&&(be&&be.abort&&be.abort(),r.off("inner-kill-task",pe))};u&&r.on("inner-kill-task",Ce)}}var Bt={getService:j,putBucket:E,headBucket:F,getBucket:C,deleteBucket:d,putBucketAcl:T,getBucketAcl:f,putBucketCors:y,getBucketCors:B,deleteBucketCors:m,getBucketLocation:P,getBucketPolicy:H,putBucketPolicy:N,deleteBucketPolicy:D,putBucketTagging:h,getBucketTagging:l,deleteBucketTagging:S,putBucketLifecycle:i,getBucketLifecycle:t,deleteBucketLifecycle:n,putBucketVersioning:o,getBucketVersioning:c,putBucketReplication:p,getBucketReplication:A,deleteBucketReplication:R,putBucketWebsite:_,getBucketWebsite:L,deleteBucketWebsite:J,putBucketReferer:Q,getBucketReferer:Y,putBucketDomain:te,getBucketDomain:he,deleteBucketDomain:ce,putBucketOrigin:ie,getBucketOrigin:Z,deleteBucketOrigin:G,putBucketLogging:ee,getBucketLogging:de,putBucketInventory:re,postBucketInventory:oe,getBucketInventory:ye,listBucketInventory:ge,deleteBucketInventory:ke,putBucketAccelerate:me,getBucketAccelerate:Re,putBucketEncryption:Oe,getBucketEncryption:ze,deleteBucketEncryption:Me,getObject:je,headObject:De,listObjectVersions:Qe,putObject:We,deleteObject:rt,getObjectAcl:ht,putObjectAcl:gt,optionsObject:vt,putObjectCopy:pt,deleteMultipleObject:z,restoreObject:x,putObjectTagging:O,getObjectTagging:U,deleteObjectTagging:q,selectObjectContent:$,appendObject:_e,uploadPartCopy:Ne,multipartInit:ne,multipartUpload:fe,multipartComplete:ve,multipartList:Be,multipartListPart:Ee,multipartAbort:we,request:Pe,getObjectUrl:Ve,getAuth:Je};function Ut(e,a,r){s.each(["Cors","Acl"],function(u){if(e.slice(-u.length)===u){var v=e.slice(0,-u.length)+u.toUpperCase(),g=s.apiWrapper(e,a),k=!1;r[v]=function(){!k&&console.warn("warning: cos."+v+" has been deprecated. Please Use cos."+e+" instead."),k=!0,g.apply(this,arguments)}}})}V.exports.init=function(e,a){a.transferToTaskMethod(Bt,"putObject"),s.each(Bt,function(r,u){e.prototype[u]=s.apiWrapper(u,r),Ut(u,r,e.prototype)})}},"./src/cos.js":function(V,ue,w){var M=w("./src/util.js"),I=w("./src/event.js"),s=w("./src/task.js"),j=w("./src/base.js"),E=w("./src/advance.js"),F=w("./package.json"),C={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null},d=function(f){if(this.options=M.extend(M.clone(C),f||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),M.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");I.init(this),s.init(this)};j.init(d,s),E.init(d,s),d.util={md5:M.md5,xml2json:M.xml2json,json2xml:M.json2xml,encodeBase64:M.encodeBase64},d.getAuthorization=M.getAuth,d.version=F.version,V.exports=d},"./src/event.js":function(V,ue){var w=function(s){var j={},E=function(C){return!j[C]&&(j[C]=[]),j[C]};s.on=function(F,C){F==="task-list-update"&&console.warn('warning: Event "'+F+'" has been deprecated. Please use "list-update" instead.'),E(F).push(C)},s.off=function(F,C){for(var d=E(F),T=d.length-1;T>=0;T--)C===d[T]&&d.splice(T,1)},s.emit=function(F,C){for(var d=E(F).map(function(f){return f}),T=0;T<d.length;T++)d[T](C)}},M=function(){w(this)};V.exports.init=w,V.exports.EventProxy=M},"./src/session.js":function(V,ue,w){var M=w("./src/util.js"),I="cos_sdk_upload_cache",s=30*24*3600,j,E,F=function(){try{var B=JSON.parse(localStorage.getItem(I))}catch{}B||(B=[]),j=B},C=function(){try{j.length?localStorage.setItem(I,JSON.stringify(j)):localStorage.removeItem(I)}catch{}},d=function(){if(!j){F.call(this);for(var B=!1,m=Math.round(Date.now()/1e3),P=j.length-1;P>=0;P--){var N=j[P][2];(!N||N+s<m)&&(j.splice(P,1),B=!0)}B&&C()}},T=function(){E||(E=setTimeout(function(){C(),E=null},400))},f={using:{},setUsing:function(B){f.using[B]=!0},removeUsing:function(B){delete f.using[B]},getFileId:function(B,m,P,N){return B.name&&B.size&&B.lastModifiedDate&&m?M.md5([B.name,B.size,B.lastModifiedDate,m,P,N].join("::")):null},getCopyFileId:function(B,m,P,N,H){var D=m["content-length"],h=m.etag||"",l=m["last-modified"];return B&&P?M.md5([B,D,h,l,P,N,H].join("::")):null},getUploadIdList:function(B){if(!B)return null;d.call(this);for(var m=[],P=0;P<j.length;P++)j[P][0]===B&&m.push(j[P][1]);return m.length?m:null},saveUploadId:function(B,m,P){if(d.call(this),!!B){for(var N=j.length-1;N>=0;N--){var H=j[N];H[0]===B&&H[1]===m&&j.splice(N,1)}j.unshift([B,m,Math.round(Date.now()/1e3)]),j.length>P&&j.splice(P),T()}},removeUploadId:function(B){d.call(this),delete f.using[B];for(var m=j.length-1;m>=0;m--)j[m][1]===B&&j.splice(m,1);T()}};V.exports=f},"./src/task.js":function(V,ue,w){var M=w("./src/session.js"),I=w("./src/util.js"),s={},j=function(C,d){s[d]=C[d],C[d]=function(T,f){T.SkipTask?s[d].call(this,T,f):this._addTask(d,T,f)}},E=function(C){var d=[],T={},f=0,y=0,B=function(l){var S={id:l.id,Bucket:l.Bucket,Region:l.Region,Key:l.Key,FilePath:l.FilePath,state:l.state,loaded:l.loaded,size:l.size,speed:l.speed,percent:l.percent,hashPercent:l.hashPercent,error:l.error};return l.FilePath&&(S.FilePath=l.FilePath),l._custom&&(S._custom=l._custom),S},m=function(){var h,l=function(){h=0,C.emit("task-list-update",{list:I.map(d,B)}),C.emit("list-update",{list:I.map(d,B)})};return function(){h||(h=setTimeout(l))}}(),P=function(){if(!(d.length<=C.options.UploadQueueSize)){for(var l=0;l<y&&l<d.length&&d.length>C.options.UploadQueueSize;){var S=d[l].state==="waiting"||d[l].state==="checking"||d[l].state==="uploading";!d[l]||!S?(T[d[l].id]&&delete T[d[l].id],d.splice(l,1),y--):l++}m()}},N=function h(){if(!(f>=C.options.FileParallelLimit)){for(;d[y]&&d[y].state!=="waiting";)y++;if(!(y>=d.length)){var l=d[y];y++,f++,l.state="checking",l.params.onTaskStart&&l.params.onTaskStart(B(l)),!l.params.UploadData&&(l.params.UploadData={});var S=I.formatParams(l.api,l.params);s[l.api].call(C,S,function(i,t){C._isRunningTask(l.id)&&((l.state==="checking"||l.state==="uploading")&&(l.state=i?"error":"success",i&&(l.error=i),f--,m(),h(),l.callback&&l.callback(i,t),l.state==="success"&&(l.params&&(delete l.params.UploadData,delete l.params.Body,delete l.params),delete l.callback)),P())}),m(),setTimeout(h)}}},H=function(l,S){var i=T[l];if(i){var t=i&&i.state==="waiting",n=i&&(i.state==="checking"||i.state==="uploading");if(S==="canceled"&&i.state!=="canceled"||S==="paused"&&t||S==="paused"&&n){i.state=S,C.emit("inner-kill-task",{TaskId:l,toState:S});try{var o=i&&i.params&&i.params.UploadData.UploadId}catch{}S==="canceled"&&o&&M.removeUsing(o),m(),n&&(f--,N()),S==="canceled"&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}P()}};C._addTasks=function(h){I.each(h,function(l){C._addTask(l.api,l.params,l.callback,!0)}),m()};var D=!0;C._addTask=function(h,l,S,i){l=I.formatParams(h,l);var t=I.uuid();l.TaskId=t,l.onTaskReady&&l.onTaskReady(t),l.TaskReady&&(l.TaskReady(t),D&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),D=!1);var n={params:l,callback:S,api:h,index:d.length,id:t,Bucket:l.Bucket,Region:l.Region,Key:l.Key,FilePath:l.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:l._custom},o=l.onHashProgress;l.onHashProgress=function(p){C._isRunningTask(n.id)&&(n.hashPercent=p.percent,o&&o(p),m())};var c=l.onProgress;return l.onProgress=function(p){C._isRunningTask(n.id)&&(n.state==="checking"&&(n.state="uploading"),n.loaded=p.loaded,n.speed=p.speed,n.percent=p.percent,c&&c(p),m())},I.getFileSize(h,l,function(p,A){if(p)return S(I.error(p));T[t]=n,d.push(n),n.size=A,!i&&m(),N(),P()}),t},C._isRunningTask=function(h){var l=T[h];return!!(l&&(l.state==="checking"||l.state==="uploading"))},C.getTaskList=function(){return I.map(d,B)},C.cancelTask=function(h){H(h,"canceled")},C.pauseTask=function(h){H(h,"paused")},C.restartTask=function(h){var l=T[h];l&&(l.state==="paused"||l.state==="error")&&(l.state="waiting",m(),y=Math.min(y,l.index),N())},C.isUploadRunning=function(){return f||y<d.length}};V.exports.transferToTaskMethod=j,V.exports.init=E},"./src/tracker.js":function(V,ue,w){var M=w("./node_modules/@babel/runtime/helpers/classCallCheck.js"),I=w("./node_modules/@babel/runtime/helpers/createClass.js"),s=w("./node_modules/@babel/runtime/helpers/typeof.js"),j=w("./package.json"),E=null,F=function(S,i){if(!E){if(typeof S!="function")throw new Error("Beacon not found");E=new S({appkey:"0WEB05PY6MHRGK0U",versionCode:j.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:i,sessionDuration:60*1e3})}return E},C=function(S){return!S||S<0?0:(S/1e3).toFixed(3)},d={getUid:function(){var S=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S()+S()+"-"+S()+"-"+S()+"-"+S()+"-"+S()+S()+S()},getNetType:function(){if((typeof navigator>"u"?"undefined":s(navigator))==="object"){var S=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(S==null?void 0:S.type)||(S==null?void 0:S.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return(typeof location>"u"?"undefined":s(location))==="object"?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if((typeof navigator>"u"?"undefined":s(navigator))!=="object")return"unknown os";var S=navigator.userAgent.toLowerCase(),i=/macintosh|mac os x/i.test(navigator.userAgent);return S.indexOf("win32")>=0||S.indexOf("wow32")>=0?"win32":S.indexOf("win64")>=0||S.indexOf("wow64")>=0?"win64":i?"mac":"unknown os"},isMobile:function(){var S=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":s(navigator))==="object"&&navigator.userAgent.match(S))},isAndroid:function(){var S=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":s(navigator))==="object"&&navigator.userAgent.match(S))},isIOS:function(){var S=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":s(navigator))==="object"&&navigator.userAgent.match(S))},isOtherMobile:function(){return T&&!isAndroid&&!isIOS},getUA:function(){if((typeof navigator>"u"?"undefined":s(navigator))!=="object")return"unknown device";var S=navigator.userAgent;return S}},T=d.isMobile(),f=d.isAndroid()?"android":d.isIOS?"ios":"other_mobile",y=d.getOsType(),B=T?f:y,m=d.getUA(),P=d.getProtocol(),N=function(S){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(S)?"UploadTask":S==="getObject"?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(S)?"CopyTask":S};function H(l){return l.replace(/([A-Z])/g,"_$1").toLowerCase()}function D(l){var S={},i=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],t=[].concat(i,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),n=l.requestResult==="Success"?i:t;for(var o in l)if(n.includes(o)){var c=H(o);S[c]=l[o]}return S.request_name=l.realApi?N(l.realApi):l.requestName,S}var h=function(){function l(S){M(this,l);var i=S.parent,t=S.traceId,n=S.bucket,o=S.region,c=S.apiName,p=S.realApi,A=S.httpMethod,R=S.fileKey,_=S.fileSize,L=S.accelerate,J=S.customId,Q=S.delay,Y=S.deepTracker,te=S.Beacon,he=S.clsReporter,ce=n&&n.substr(n.lastIndexOf("-")+1)||"";this.parent=i,this.deepTracker=Y,this.delay=Q,he&&!this.clsReporter&&(this.clsReporter=he),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:j.version,osName:B,networkType:"",requestName:c||"",requestResult:"",realApi:p,bucket:n,region:o,accelerate:L,httpMethod:A,url:"",host:"",httpDomain:"",requestPath:R||"",userAgent:m,networkProtocol:P,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:_||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:t||d.getUid(),appid:ce,partNumber:0,httpRetryTimes:0,customId:J||"",partTime:0},te&&(this.beacon=F(te,Q))}return I(l,[{key:"formatResult",value:function(i,t){var n,o,c,p,A,R,_=new Date().getTime(),L=d.getNetType(),J=i?(i==null?void 0:i.code)||(i==null||(n=i.error)===null||n===void 0?void 0:n.code)||(i==null||(o=i.error)===null||o===void 0?void 0:o.Code):"",Q=i?(i==null?void 0:i.message)||(i==null||(c=i.error)===null||c===void 0?void 0:c.message)||(i==null||(p=i.error)===null||p===void 0?void 0:p.Message):"",Y=Q,te=i?(i==null?void 0:i.resource)||(i==null||(A=i.error)===null||A===void 0?void 0:A.resource)||(i==null||(R=i.error)===null||R===void 0?void 0:R.Resource):"",he=i?i==null?void 0:i.statusCode:t.statusCode,ce=i?(i==null?void 0:i.headers)&&(i==null?void 0:i.headers["x-cos-request-id"]):(t==null?void 0:t.headers)&&(t==null?void 0:t.headers["x-cos-request-id"]),ie=i?ce?"Server":"Client":"";this.params.requestName==="getObject"&&(this.params.httpSize=t?t.headers&&t.headers["content-length"]:0);var Z=this.params.realApi==="sliceUploadFile",G=this.params.realApi==="sliceCopyFile";if(Z||G){var ee=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:ee<0?0:ee.toFixed(3)})}else{var de=_-this.params.startTime,ae=this.params.httpEndTime-this.params.httpStartTime,re=this.params.httpSize/1024/(ae/1e3),oe=this.params.md5EndTime-this.params.md5StartTime,ye=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",C(ae)),this.parent.addParamValue("httpFullTime",C(de)),this.parent.addParamValue("httpMd5",C(oe)),this.parent.addParamValue("httpSign",C(ye)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",C(ae))),Object.assign(this.params,{httpFullTime:C(de),httpMd5:C(oe),httpSign:C(ye),httpTookTime:C(ae),httpSpeed:re<0?0:re.toFixed(3)})}if(Object.assign(this.params,{networkType:L,requestResult:i?"Failure":"Success",errorType:ie,errorCode:J,errorHttpCode:he,errorName:Y,errorMessage:Q,errorServiceName:te,errorRequestId:ce}),i&&(!J||!Q)&&(this.params.fullError=i?JSON.stringify(i):""),this.params.url){try{var ge=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=ge[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(i,t){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(i,t);var n=D(this.params);this.beacon&&this.sendEventsToBeacon(n),this.clsReporter&&this.sendEventsToCLS(n)}}},{key:"setParams",value:function(i){Object.assign(this.params,i)}},{key:"addParamValue",value:function(i,t){this.params[i]=(+this.params[i]+ +t).toFixed(3)}},{key:"sendEventsToBeacon",value:function(i){var t=this.params.requestName==="sliceUploadFile"||this.params.realApi==="sliceUploadFile";if(!(t&&!this.deepTracker)){var n="qcloud_track_cos_sdk";this.delay===0?this.beacon&&this.beacon.onDirectUserAction(n,i):this.beacon&&this.beacon.onUserAction(n,i)}}},{key:"sendEventsToCLS",value:function(i){var t=this.delay===0;this.clsReporter.log(i,t)}},{key:"generateSubTracker",value:function(i){return Object.assign(i,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new l(i)}}]),l}();V.exports=h},"./src/util.js":function(V,ue,w){(function(M){var I=w("./node_modules/@babel/runtime/helpers/typeof.js");function s(z,x){var O=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!O){if(Array.isArray(z)||(O=j(z))||x){O&&(z=O);var U=0,q=function(){};return{s:q,n:function(){return U>=z.length?{done:!0}:{done:!1,value:z[U++]}},e:function(Be){throw Be},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $,ne=!0,fe=!1;return{s:function(){O=O.call(z)},n:function(){var Be=O.next();return ne=Be.done,Be},e:function(Be){fe=!0,$=Be},f:function(){try{ne||O.return==null||O.return()}finally{if(fe)throw $}}}}function j(z,x){if(z){if(typeof z=="string")return E(z,x);var O={}.toString.call(z).slice(8,-1);return O==="Object"&&z.constructor&&(O=z.constructor.name),O==="Map"||O==="Set"?Array.from(z):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?E(z,x):void 0}}function E(z,x){(x==null||x>z.length)&&(x=z.length);for(var O=0,U=Array(x);O<x;O++)U[O]=z[O];return U}var F=w("./lib/md5.js"),C=w("./lib/crypto.js"),d=w("./node_modules/fast-xml-parser/src/fxp.js"),T=d.XMLParser,f=d.XMLBuilder,y=new T({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1}),B=new f,m=w("./lib/base64.js"),P=w("./src/tracker.js"),N=function(x){var O=y.parse(x);return O},H=function(x){var O=B.build(x);return O};function D(z){return encodeURIComponent(z).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function h(z,x){var O=[];for(var U in z)z.hasOwnProperty(U)&&O.push(x?D(U).toLowerCase():U);return O.sort(function(q,$){return q=q.toLowerCase(),$=$.toLowerCase(),q===$?0:q>$?1:-1})}var l=function(x,O){var U,q,$,ne=[],fe=h(x);for(U=0;U<fe.length;U++)q=fe[U],$=x[q]===void 0||x[q]===null?"":""+x[q],q=O?D(q).toLowerCase():D(q),$=D($)||"",ne.push(q+"="+$);return ne.join("&")},S=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],i=function(x){var O={};for(var U in x){var q=U.toLowerCase();(q.indexOf("x-cos-")>-1||S.indexOf(q)>-1)&&(O[U]=x[U])}return O},t=function(x){x=x||{};var O=x.SecretId,U=x.SecretKey,q=x.KeyTime,$=(x.method||x.Method||"get").toLowerCase(),ne=he(x.Query||x.params||{}),fe=i(he(x.Headers||x.headers||{})),ve=x.Key||"",Be;x.UseRawKey?Be=x.Pathname||x.pathname||"/"+ve:(Be=x.Pathname||x.pathname||ve,Be.indexOf("/")!==0&&(Be="/"+Be));var Ee=x.ForceSignHost!==!1;if(!fe.Host&&!fe.host&&x.Bucket&&x.Region&&Ee&&(fe.Host=x.Bucket+".cos."+x.Region+".myqcloud.com"),!O)throw new Error("missing param SecretId");if(!U)throw new Error("missing param SecretKey");var we=Math.round(ze(x.SystemClockOffset)/1e3)-1,Pe=we,_e=x.Expires||x.expires;_e===void 0?Pe+=900:Pe+=_e*1||0;var Je="sha1",Ve=O,xe=q||we+";"+Pe,qe=q||we+";"+Pe,Ke=h(fe,!0).join(";").toLowerCase(),tt=h(ne,!0).join(";").toLowerCase(),st=C.HmacSHA1(qe,U).toString(),yt=[$,Be,Ne.obj2str(ne,!0),Ne.obj2str(fe,!0),""].join(`
`),Ct=["sha1",xe,C.SHA1(yt).toString(),""].join(`
`),X=C.HmacSHA1(Ct,st).toString(),kt=["q-sign-algorithm="+Je,"q-ak="+Ve,"q-sign-time="+xe,"q-key-time="+qe,"q-header-list="+Ke,"q-url-param-list="+tt,"q-signature="+X].join("&");return kt},n=function(x,O,U){var q=O/8,$=x.slice(U,U+q);return new Uint8Array($).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[O]($)[0]},o=function(x,O,U,q){var $=x.slice(O,U),ne="";return new Uint8Array($).forEach(function(fe){ne+=String.fromCharCode(fe)}),q&&(ne=decodeURIComponent(escape(ne))),ne},c=function(x){for(var O={},U=o(x),q={records:[]};x.byteLength;){var $=n(x,32,0),ne=n(x,32,4),fe=$-ne-16,ve=0,Be;for(x=x.slice(12);ve<ne;){var Ee=n(x,8,ve),we=o(x,ve+1,ve+1+Ee),Pe=n(x,16,ve+Ee+2),_e=o(x,ve+Ee+4,ve+Ee+4+Pe);O[we]=_e,ve+=Ee+4+Pe}if(O[":event-type"]==="Records")Be=o(x,ve,ve+fe,!0),q.records.push(Be);else if(O[":event-type"]==="Stats")Be=o(x,ve,ve+fe,!0),q.stats=Ne.xml2json(Be).Stats;else if(O[":event-type"]==="error"){var Je=O[":error-code"],Ve=O[":error-message"],xe=new Error(Ve);xe.message=Ve,xe.name=xe.code=Je,q.error=xe}x=x.slice(ve+fe+4)}return{payload:q.records.join(""),body:U}},p=function(x){var O=this.options.CopySourceParser;if(O)return O(x);var U=x.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return U?{Bucket:U[1],Region:U[3],Key:U[7]}:null},A=function(){},R=function(x){var O={};for(var U in x)x.hasOwnProperty(U)&&x[U]!==void 0&&x[U]!==null&&(O[U]=x[U]);return O},_=function(x,O){var U,q=new FileReader;FileReader.prototype.readAsBinaryString?(U=FileReader.prototype.readAsBinaryString,q.onload=function(){O(this.result)}):FileReader.prototype.readAsArrayBuffer?U=function(ne){var fe="",ve=new FileReader;ve.onload=function(Be){for(var Ee=new Uint8Array(ve.result),we=Ee.byteLength,Pe=0;Pe<we;Pe++)fe+=String.fromCharCode(Ee[Pe]);O(fe)},ve.readAsArrayBuffer(ne)}:console.error("FileReader not support readAsBinaryString"),U.call(q,x)},L=function(){var z=function(U,q){U=U.split("."),q=q.split(".");for(var $=0;$<q.length;$++)if(U[$]!==q[$])return parseInt(U[$])>parseInt(q[$])?1:-1;return 0},x=function(U){if(!U)return!1;var q=(U.match(/Chrome\/([.\d]+)/)||[])[1],$=(U.match(/QBCore\/([.\d]+)/)||[])[1],ne=(U.match(/QQBrowser\/([.\d]+)/)||[])[1],fe=q&&z(q,"53.0.2785.116")<0&&$&&z($,"3.53.991.400")<0&&ne&&z(ne,"9.0.2524.400")<=0||!1;return fe};return x(typeof navigator<"u"&&navigator.userAgent)}(),J=function(x,O,U,q,$){var ne;if(x.slice?ne=x.slice(O,U):x.mozSlice?ne=x.mozSlice(O,U):x.webkitSlice&&(ne=x.webkitSlice(O,U)),q&&L){var fe=new FileReader;fe.onload=function(ve){ne=null,$(new Blob([fe.result]))},fe.readAsArrayBuffer(ne)}else $(ne)},Q=function(x,O,U,q){U=U||A,x?typeof O=="string"?U(Ne.md5(O,!0)):Blob&&O instanceof Blob?Ne.getFileMd5(O,function($,ne){U(ne)},q):U():U()},Y=1024*1024,te=function(x,O,U){var q=x.size,$=0,ne=F.getCtx(),fe=function ve(Be){if(Be>=q){var Ee=ne.digest("hex");O(null,Ee);return}var we=Math.min(q,Be+Y);Ne.fileSlice(x,Be,we,!1,function(Pe){_(Pe,function(_e){Pe=null,ne=ne.update(_e,!0),$+=_e.length,_e=null,U&&U({loaded:$,total:q,percent:Math.round($/q*1e4)/1e4}),ve(Be+Y)})})};fe(0)};function he(z){return ae(z,function(x){return I(x)==="object"&&x!==null?he(x):x})}function ce(z,x,O){return z&&x in z?z[x]:O}function ie(z,x){return de(x,function(O,U){z[U]=x[U]}),z}function Z(z){return z instanceof Array}function G(z,x){for(var O=!1,U=0;U<z.length;U++)if(x===z[U]){O=!0;break}return O}function ee(z){return Z(z)?z:[z]}function de(z,x){for(var O in z)z.hasOwnProperty(O)&&x(z[O],O)}function ae(z,x){var O=Z(z)?[]:{};for(var U in z)z.hasOwnProperty(U)&&(O[U]=x(z[U],U));return O}function re(z,x){var O=Z(z),U=O?[]:{};for(var q in z)z.hasOwnProperty(q)&&x(z[q],q)&&(O?U.push(z[q]):U[q]=z[q]);return U}var oe=function(x){var O,U,q,$="";for(O=0,U=x.length/2;O<U;O++)q=parseInt(x[O*2]+x[O*2+1],16),$+=String.fromCharCode(q);return btoa($)},ye=function(){var x=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return x()+x()+"-"+x()+"-"+x()+"-"+x()+"-"+x()+x()+x()},ge=function(x,O){var U=O.Bucket,q=O.Region,$=O.Key,ne=this.options.Domain,fe=!ne||typeof ne=="string"&&ne.indexOf("{Bucket}")>-1,ve=!ne||typeof ne=="string"&&ne.indexOf("{Region}")>-1;if(x.indexOf("Bucket")>-1||x==="deleteMultipleObject"||x==="multipartList"||x==="listObjectVersions"){if(fe&&!U)return"Bucket";if(ve&&!q)return"Region"}else if(x.indexOf("Object")>-1||x.indexOf("multipart")>-1||x==="sliceUploadFile"||x==="abortUploadTask"||x==="uploadFile"){if(fe&&!U)return"Bucket";if(ve&&!q)return"Region";if(!$)return"Key"}return!1},ke=function(x,O){if(O=ie({},O),x!=="getAuth"&&x!=="getV4Auth"&&x!=="getObjectUrl"){var U=O.Headers||{};if(O&&I(O)==="object"){(function(){for(var $ in O)O.hasOwnProperty($)&&$.indexOf("x-cos-")>-1&&(U[$]=O[$])})();var q={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};Ne.each(q,function($,ne){O[$]!==void 0&&(U[ne]=O[$])}),O.Headers=R(U)}}return O},me=function(x,O){return function(U,q){var $=this;typeof U=="function"&&(q=U,U={}),U=ke(x,U);var ne;if($.options.EnableReporter)if(U.calledBySdk==="sliceUploadFile"||U.calledBySdk==="sliceCopyFile")ne=U.tracker&&U.tracker.generateSubTracker({apiName:x});else if(["uploadFile","uploadFiles"].includes(x))ne=null;else{var fe=0;U.Body&&(fe=typeof U.Body=="string"?U.Body.length:U.Body.size||U.Body.byteLength||0);var ve=$.options.UseAccelerate||typeof $.options.Domain=="string"&&$.options.Domain.includes("accelerate.");ne=new P({Beacon:$.options.BeaconReporter,clsReporter:$.options.ClsReporter,bucket:U.Bucket,region:U.Region,apiName:x,realApi:x,accelerate:ve,fileKey:U.Key,fileSize:fe,deepTracker:$.options.DeepTracker,customId:$.options.CustomId,delay:$.options.TrackerDelay})}U.tracker=ne;var Be=function(xe){return xe&&xe.headers&&(xe.headers["x-cos-request-id"]&&(xe.RequestId=xe.headers["x-cos-request-id"]),xe.headers["x-ci-request-id"]&&(xe.RequestId=xe.headers["x-ci-request-id"]),xe.headers["x-cos-version-id"]&&(xe.VersionId=xe.headers["x-cos-version-id"]),xe.headers["x-cos-delete-marker"]&&(xe.DeleteMarker=xe.headers["x-cos-delete-marker"])),xe},Ee=function(xe,qe){ne&&ne.report(xe,qe),q&&q(Be(xe),Be(qe))},we=function(){if(x!=="getService"&&x!=="abortUploadTask"){var xe=ge.call($,x,U);if(xe)return"missing param "+xe;if(U.Region){if($.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(U.Region))return"Region format error."}else{if(U.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(U.Region))return"Region format error."}!$.options.CompatibilityMode&&U.Region.indexOf("-")===-1&&U.Region!=="yfb"&&U.Region!=="default"&&U.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(U.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(U.Bucket))if(U.AppId)U.Bucket=U.Bucket+"-"+U.AppId;else if($.options.AppId)U.Bucket=U.Bucket+"-"+$.options.AppId;else return'Bucket should format as "test-1250000000".';U.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete U.AppId)}!$.options.UseRawKey&&U.Key&&U.Key.substr(0,1)==="/"&&(U.Key=U.Key.substr(1))}},Pe=we(),_e=["getAuth","getObjectUrl"].includes(x);if(typeof Promise=="function"&&!_e&&!q)return new Promise(function(Ve,xe){if(q=function(Ke,tt){Ke?xe(Ke):Ve(tt)},Pe)return Ee(Ne.error(new Error(Pe)));O.call($,U,Ee)});if(Pe)return Ee(Ne.error(new Error(Pe)));var Je=O.call($,U,Ee);if(_e)return Je}},Re=function(x,O){var U=this,q=0,$=0,ne=Date.now(),fe,ve;function Be(){if(ve=0,O&&typeof O=="function"){fe=Date.now();var Ee=Math.max(0,Math.round(($-q)/((fe-ne)/1e3)*100)/100)||0,we;$===0&&x===0?we=1:we=Math.floor($/x*100)/100||0,ne=fe,q=$;try{O({loaded:$,total:x,speed:Ee,percent:we})}catch{}}}return function(Ee,we){if(Ee&&($=Ee.loaded,x=Ee.total),we)clearTimeout(ve),Be();else{if(ve)return;ve=setTimeout(Be,U.options.ProgressInterval)}}},Oe=function(x,O,U){var q;if(typeof O.Body=="string"?O.Body=new Blob([O.Body],{type:"text/plain"}):O.Body instanceof ArrayBuffer&&(O.Body=new Blob([O.Body])),O.Body&&(O.Body instanceof Blob||O.Body.toString()==="[object File]"||O.Body.toString()==="[object Blob]"))q=O.Body.size;else{U(Ne.error(new Error("params body format error, Only allow File|Blob|String.")));return}O.ContentLength=q,U(null,q)},ze=function(x){return Date.now()+(x||0)},Me=function(x,O){var U=x;return x.message=x.message||null,typeof O=="string"?(x.error=O,x.message=O):I(O)==="object"&&O!==null&&(ie(x,O),(O.code||O.name)&&(x.code=O.code||O.name),O.message&&(x.message=O.message),O.stack&&(x.stack=O.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(x,"name",{writable:!0,enumerable:!1}),Object.defineProperty(x,"message",{enumerable:!0})),x.name=O&&O.name||x.name||x.code||"Error",x.code||(x.code=x.name),x.error||(x.error=he(U)),x},De=function(){return(typeof globalThis>"u"?"undefined":I(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},Qe=function(){return(typeof window>"u"?"undefined":I(window))!=="object"&&(typeof M>"u"?"undefined":I(M))==="object"&&!0&&!De()},je=function(x){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(x)},We=function(){if((typeof navigator>"u"?"undefined":I(navigator))!=="object")return!1;var z=navigator.userAgent,x=!!z.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return x}(),rt=function(){return(typeof navigator>"u"?"undefined":I(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),ht=function(x,O){var U=m.encode(x);return O&&(U=U.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),U},gt=function(x){return x?m.decode(x):""},vt=function(x){var O=x.split("/"),U=[],q=s(O),$;try{for(q.s();!($=q.n()).done;){var ne=$.value;ne===".."?U.length&&U.pop():ne.length&&ne!=="."&&U.push(ne)}}catch(fe){q.e(fe)}finally{q.f()}return"/"+U.join("/")},pt=function(x){var O;if(x&&typeof x=="string"){var U=x.trim(),q=U.indexOf("<")===0,$=U.indexOf("{")===0;if(q)O=Ne.xml2json(x)||{};else if($)try{var ne=x.replace(/\n/g," "),fe=JSON.parse(ne);Object.prototype.toString.call(fe)==="[object Object]"?O=fe:O=x}catch{O=x}else O=x}else O=x||{};return O},Ne={noop:A,formatParams:ke,apiWrapper:me,xml2json:N,json2xml:H,md5:F,clearKey:R,fileSlice:J,getBodyMd5:Q,getFileMd5:te,b64:oe,extend:ie,isArray:Z,isInArray:G,makeArray:ee,each:de,map:ae,filter:re,clone:he,attr:ce,uuid:ye,camSafeUrlEncode:D,throttleOnProgress:Re,getFileSize:Oe,getSkewTime:ze,error:Me,obj2str:l,getAuth:t,parseSelectPayload:c,getSourceParams:p,isBrowser:!0,isNode:Qe,isCIHost:je,isIOS_QQ:We&&rt,encodeBase64:ht,decodeBase64:gt,simplifyPath:vt,readAsBinaryString:_,parseResBody:pt};V.exports=Ne}).call(this,w("./node_modules/process/browser.js"))}})})}(lt)),lt.exports}var zt=Ht();const Vt=Mt(zt),qt={key:0,class:"box"},Gt=["src"],Dt=["src"],Wt="https://luxcurl-img-1321046331.cos.ap-shanghai.myqcloud.com",$t="luxcurl-img-1321046331",Qt="ap-shanghai",Jt=jt({__name:"Waterfall",setup(dt){const ft=new Vt({SecretId:"",SecretKey:""});let V;const ue=ot(!1);function w(){ue.value=!0,ft.getBucket({Bucket:$t,Region:Qt,Prefix:""},function(f,y){f?console.error("tenxun",f):(V=y.Contents.filter(B=>{const m=B.Key,P=m.lastIndexOf("."),N=m.substring(P+1);return["png","jpeg","jpg","mp4","webp"].includes(N)}).map(B=>Wt+"/"+B.Key),F())})}async function M(f){return new Promise(y=>{const B=new Image;B.src=f,B.onload=()=>{y(B)}})}const I=ot(null),s=ot(null),j=ot([]),E=ot([]);async function F(){const f=C();for(let y of f)console.error(y),await d(y)}function C(){let f=[],y=V.length,B=j.value.length+E.value.length;return y-B>0&&(f=V.slice(B)),f}async function d(f){const B=await M(f),m=B.width,P=B.height,N=I.value.getBoundingClientRect().height,H=s.value.getBoundingClientRect().height;N>H?E.value.push({url:f,width:m,height:P}):j.value.push({url:f,width:m,height:P})}function T(){}return(f,y)=>(et(),Ye(xt,null,[it("button",{onClick:w},"显示全部图片的瀑布流"),ue.value?(et(),Ye("div",qt,[it("div",{ref_key:"leftRef",ref:I,class:"column"},[(et(!0),Ye(xt,null,Pt(j.value,B=>(et(),Ye("div",{class:"box-content relative",style:Ot(`width: 100%;padding-top: ${B.height*100/B.width}%`),key:B.id,onClick:T},[it("img",{src:B.url,class:"absolute w-full h-full top-0 left-0"},null,8,Gt)],4))),128))],512),it("div",{ref_key:"rightRef",ref:s,class:"column"},[(et(!0),Ye(xt,null,Pt(E.value,B=>(et(),Ye("div",{class:"box-content relative",style:Ot(`width: 100%;padding-top: ${B.height*100/B.width}%`),key:B.id},[it("img",{src:B.url,class:"absolute w-full h-full top-0 left-0"},null,8,Dt)],4))),128))],512)])):_t("",!0)],64))}}),en=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"useful/前端效果实现/瀑布流.md","filePath":"useful/前端效果实现/瀑布流.md","lastUpdated":1709394628000}'),Xt={name:"useful/前端效果实现/瀑布流.md"},tn=Object.assign(Xt,{setup(dt){return(ft,V)=>{const ue=Lt("clientOnly");return et(),Ye("div",null,[wt(ue,null,{default:Ft(()=>[wt(Jt)]),_:1})])}}});export{en as __pageData,tn as default};
