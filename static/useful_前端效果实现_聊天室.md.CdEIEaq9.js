import{_ as f,c as o,o as d,j as s,a as m,t as h,G as c,w as b,F as v,B as _,n as g,al as x,ao as w,av as y,Z as M,C}from"./chunks/framework.gpVTZwhR.js";const S={data(){return{messages:[{avatar:"#rabbit_01",message:"春光无限，冰雪消融，新年佳节，岁岁平安，欢天喜地，百事顺心，笑口常开，阖家欢乐，喜气洋洋，缘遇新友，其乐融融，生活美满。兔年大吉！",direction:"left"},{avatar:"#rabbit_02",message:"祝你兔年大吉，一如既往，二人同心，三口之家，四季欢唱，五福临门，六六顺意，七喜来财，八方鸿福，九九吉祥，十全十美。",direction:"left"},{avatar:"#rabbit_03",message:"兔年到，好运到，我的祝福先送到。一祝你今年无烦恼，二祝你出门贵人罩，三祝你兔年大吉常常微笑，万事都好！",direction:"left"},{avatar:"#rabbit_04",message:"兔年送条兔，全家乐悠悠。兔脚为你开财路，兔耳为你撞鸿运，兔背为你驮康寿，让这头兔伴你左右，永远动如蛟兔！",direction:"left"},{avatar:"#rabbit_05",message:"兔年大吉喜气扬，兔头扬扬好运来，兔眼圆圆看祥瑞，兔须翘翘钱满园，兔身摆摆业登高，兔尾扫扫体健安，兔声震震尽欢颜，祝愿兔年多财气，旺兔载运福满天！",direction:"left"},{avatar:"#rabbit_06",message:"兔年来到，福兔祝你鸿福齐天，万事如意;祥兔祝你财气冲天，好运无穷;吉兔祝你吉星高照，心想事成;灵兔祝你天天开心，福寿安康;朋友则祝你兔年如意，万事顺心！",direction:"left"}],message:"",chatBoxClass:""}},mounted(){this.chatBoxClass=`chat-box-${this._.uid}`,this.$nextTick(()=>{this.handleReceiveMsg()})},methods:{handleSendMsg(){if(!this.message)return;const t=["#rabbit_01","#rabbit_02","#rabbit_03","#rabbit_04","#rabbit_05","#rabbit_06"],a={avatar:t[Math.floor(Math.random()*t.length)],message:this.message,direction:"right"};this.messages.push(a);const n=new Event("send-message");n.key="message",n.newValue=JSON.stringify(a),this.flagMe=!0,window.dispatchEvent(n),this.flagMe=!1,this.message="",this.$nextTick(()=>{const r=document.querySelector("."+this.chatBoxClass);r.scrollTop=r.scrollHeight})},handleReceiveMsg(){window.addEventListener("send-message",t=>{if(t.key==="message"&&!this.flagMe){const e=JSON.parse(t.newValue);this.messages.push({avatar:e.avatar,message:e.message,direction:"left"}),this.$nextTick(()=>{const a=document.querySelector("."+this.chatBoxClass);a.scrollTop=a.scrollHeight})}})}}},k={class:"chat-container"},B={class:"chat-header"},T={class:"message"};function N(t,e,a,n,r,l){return d(),o("div",k,[s("div",B,[m(" 兔年聊到（聊天室"+h(t._.uid)+"）",1),e[3]||(e[3]=s("span",{class:"i-twemoji:rabbit-face"},null,-1))]),s("div",{class:g(["chat-wrap",r.chatBoxClass])},[c(x,{name:"roll",mode:"in-out",appear:""},{default:b(()=>[(d(!0),o(v,null,_(r.messages,(i,p)=>(d(),o("div",{class:g(["message-box",i.direction]),key:p},[e[5]||(e[5]=s("div",{class:"avatar"},[s("div",{class:"i-twemoji:angry-face"})],-1)),s("div",T,[m(h(i.message)+" ",1),e[4]||(e[4]=s("div",{class:"i-twemoji:smiling-face-with-heart-eyes"},null,-1))])],2))),128))]),_:1})],2),s("div",{class:"input-box",onKeyup:e[2]||(e[2]=M((...i)=>l.handleSendMsg&&l.handleSendMsg(...i),["enter"]))},[w(s("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=i=>r.message=i)},null,512),[[y,r.message]]),s("button",{class:"send-btn",onClick:e[1]||(e[1]=(...i)=>l.handleSendMsg&&l.handleSendMsg(...i))},"发送")],32)])}const u=f(S,[["render",N]]),O={class:"flex mt-30px lt-md:flex-col"},V={class:"h-500px border border-gray border-solid rounded-8px md:mr-10px"},j={class:"h-500px border border-gray border-solid rounded-8px lt-md:mt-30px"},D=JSON.parse('{"title":"聊天室","description":"","frontmatter":{"label":["actual combat"]},"headers":[],"relativePath":"useful/前端效果实现/聊天室.md","filePath":"useful/前端效果实现/聊天室.md","lastUpdated":1709394628000}'),E={name:"useful/前端效果实现/聊天室.md"},J=Object.assign(E,{setup(t){return(e,a)=>{const n=C("ClientOnly");return d(),o("div",null,[a[0]||(a[0]=s("h1",{id:"聊天室",tabindex:"-1"},[m("聊天室 "),s("a",{class:"header-anchor",href:"#聊天室","aria-label":'Permalink to "聊天室"'},"​")],-1)),c(n,null,{default:b(()=>[s("div",O,[s("div",V,[c(u)]),s("div",j,[c(u)])])]),_:1})])}}});export{D as __pageData,J as default};
