import{u as j,c as m,L as F}from"./LinkSet.K3AEHDif.js";import{d as R,p as S,q as C,v as T,h as q,c as o,o as i,F as g,j as c,e as w,G as z,B as N,n as k,t as f,k as L,a as G}from"./framework.gpVTZwhR.js";const O=["onClick"],H={class:"mt-2"},J={key:0},P=["onClick"],Q={key:0,class:"i-twemoji:star"},Y=R({__name:"ExercisesSet",props:{originalData:{default:()=>[]},idName:{default:""},labelAliasList:{default:()=>[]},hightLabels:{default:()=>[]}},setup(E){const r=E,p=j();function I(e,l,t){p.visitedLinks.push({cateIndex:l,labelIndex:t})}const d=r.originalData,B=d.length;function D(e){const l=new Set;e.forEach(u=>{const b=u.label;if(b&&b.length)if(Array.isArray(b))for(const $ of b)l.add($);else l.add(b)});const t=Array.from(l),n=r.hightLabels,v=t.filter(u=>n.includes(u)),K=t.filter(u=>!n.includes(u));return[...v,...K]}const h=D(d);function y(e){p.visitedLinks=[],a.value=e}const x=["标签分类",...r.labelAliasList.map(e=>e.labelAlias)],a=S(""),A="selectedLabel"+r.idName;C(a,()=>{localStorage.setItem(A,a.value)});const s=S(0),_="labelAliasIndexKey"+r.idName;C(s,()=>{localStorage.setItem(_,s.value)}),T(()=>{const e=localStorage.getItem(_);e&&(s.value=Number(e));const l=localStorage.getItem(A);l&&(a.value=l)});function M(e){p.visitedLinks=[],s.value=e,s.value>=x.length&&(s.value=0)}const V=q(()=>{if(s.value===0)return a.value?m(d.filter(e=>typeof e.label=="string"?a.value===e.label:Array.isArray(e.label)?e.label.includes(a.value):!1).map(e=>({...e,label:a.value}))):m(d);{const e=r.labelAliasList[s.value-1].key;return m(d.map(l=>({...l,label:l[e]})))}});return(e,l)=>(i(),o(g,null,[c("div",null,[(i(),o(g,null,N(x,(t,n)=>c("div",{class:k(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",s.value===n?"bg-#409eff text-white":"text-#606266"]),onClick:v=>M(n)},f(t),11,O)),64))]),c("div",H,"总题目数："+f(L(B)),1),s.value===0?(i(),o("div",J,[c("div",null,"共有 "+f(L(h).length)+" 个标签",1),c("div",{class:k(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",a.value===""?"bg-#1867c0 text-white":"bg-#e3ecf7 text-#1c69c1"]),onClick:l[0]||(l[0]=t=>y(""))},"全部题目",2),c("div",null,[(i(!0),o(g,null,N(L(h),(t,n)=>(i(),o("span",{class:k(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",a.value===t?"bg-#1867c0 text-white":"bg-#e3ecf7 text-#1c69c1"]),onClick:v=>y(t)},[G(f(n+1)+"-"+f(t)+" ",1),e.hightLabels.includes(t)?(i(),o("span",Q,"   ")):w("",!0)],10,P))),256))])])):w("",!0),z(F,{data:V.value,onClickLink:I},null,8,["data"])],64))}});export{Y as _};
