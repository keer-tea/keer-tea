import{d as q,p as L,v as w,c as C,o as B,F as x,j as p,B as T,n as S,a0 as O,t as b,C as R,aK as A,G as o,w as _}from"./chunks/framework.gpVTZwhR.js";const N={class:"flex items-start"},V={class:"w-30% flex-shrink-0 self-unset"},X={class:"w-full pt-full relative"},Y=["id"],j={class:"flex items-end"},$=["checked","onChange"],U={class:"ml-5px leading-none"},G={class:"ml-20px mt-5px"},H=q({__name:"three-composite-demo",setup(D){const n=[["source-in",{desc:"新图形只在新图形和目标画布重叠的地方绘制。其他的都是透明的。"}],["source-over",{desc:"这是默认设置，并在现有画布上下文之上绘制新图形。"}],["source-out",{desc:"在不与现有画布内容重叠的地方绘制新图形。"}],["source-atop",{desc:"新图形只在与现有画布内容重叠的地方绘制。"}],["destination-over",{desc:"在现有的画布内容后面绘制新的图形。"}],["destination-in",{desc:"现有的画布内容保持在新图形和现有画布内容重叠的位置。其他的都是透明的。"}],["destination-out",{desc:"现有内容保持在新图形不重叠的地方。"}],["destination-atop",{desc:"现有的画布只保留与新图形重叠的部分，新的图形是在画布内容后面绘制的。"}],["lighter",{desc:"两个重叠图形的颜色是通过颜色值相加来确定的。"}],["copy",{desc:"只显示新图形。"}],["xor",{desc:"图像中，那些重叠和正常绘制之外的其他地方是透明的。"}],["multiply",{desc:"将顶层像素与底层相应像素相乘，结果是一幅更黑暗的图片。"}],["screen",{desc:"像素被倒转，相乘，再倒转，结果是一幅更明亮的图片。"}],["overlay",{desc:"multiply 和 screen 的结合，原本暗的地方更暗，原本亮的地方更亮。"}],["darken",{desc:"保留两个图层中最暗的像素。"}],["lighten",{desc:"保留两个图层中最亮的像素。"}],["color-dodge",{desc:"将底层除以顶层的反置。"}],["color-burn",{desc:"将反置的底层除以顶层，然后将结果反过来。"}],["hard-light",{desc:"屏幕相乘（A combination of multiply and screen）类似于叠加，但上下图层互换了。"}],["soft-light",{desc:"用顶层减去底层或者相反来得到一个正值。"}],["difference",{desc:"一个柔和版本的强光（hard-light）。纯黑或纯白不会导致纯黑或纯白。"}],["exclusion",{desc:"和 difference 相似，但对比度较低。"}],["hue",{desc:"保留了底层的亮度（luma）和色度（chroma），同时采用了顶层的色调（hue）。"}],["saturation",{desc:"保留底层的亮度（luma）和色调（hue），同时采用顶层的色度（chroma）。"}],["color",{desc:"保留了底层的亮度（luma），同时采用了顶层的色调 (hue) 和色度 (chroma)。"}],["luminosity",{desc:"保持底层的色调（hue）和色度（chroma），同时采用顶层的亮度（luma）。"}]],s=L(0);function d(l){s.value=l;const k=n[s.value][0];r(k,F)}let F;function r(l,k){const t=document.createElement("canvas");t.width=200,t.height=200;const i=t.getContext("2d");i.clearRect(-100,100,200,200),i.fillStyle="rgba(0,0,0, 0.3)",i.fillRect(0,0,200,200),i.translate(100,100),i.globalCompositeOperation=l,i.beginPath(),i.fillStyle="red",i.arc(30,0,50,0,2*Math.PI),i.fill(),i.closePath(),i.beginPath(),i.fillStyle="green",i.arc(-30,0,50,0,2*Math.PI),i.fill(),i.closePath(),i.beginPath(),i.fillStyle="blue",i.arc(0,-30,50,0,2*Math.PI),i.fill(),i.closePath(),k.clearRect(0,0,200,200),k.drawImage(t,0,0,200,200)}return w(()=>{F=document.getElementById("three-composite").getContext("2d"),r(n[s.value][0],F);for(const l of n){const k=l[0],t=document.getElementById(`test-canvas-${k}`).getContext("2d");r(k,t)}}),(l,k)=>(B(),C(x,null,[k[0]||(k[0]=p("canvas",{id:"three-composite",width:"200",height:"200"},null,-1)),k[1]||(k[1]=p("div",{class:"font-bold text-fuchsia-600"},"合成模式：",-1)),(B(),C(x,null,T(n,(t,i)=>p("div",N,[p("div",V,[p("div",X,[p("canvas",{id:"test-canvas-"+t[0],width:"200",height:"200",class:"w-full h-full absolute top-0 left-0 border-dark-50 border-.5 border-solid"},null,8,Y)])]),p("label",{class:S(["ml-10px flex flex-col",s.value===i?"text-red":""])},[p("div",j,[p("input",{type:"radio",name:"go",checked:s.value===i,onChange:O(u=>d(i),["stop"])},null,40,$),p("div",U,b(t[0]),1)]),p("div",G,b(t[1].desc),1)],2)])),64))],64))}}),z={id:"card"},J=q({__name:"scratch-ticket",setup(D){return w(()=>{const n=document.getElementById("scratch-ticket"),s=n.getContext("2d"),d=200,F=200;let r,l;n.addEventListener("mousedown",f,!1),n.addEventListener("mousemove",v,!1),n.addEventListener("mouseup",m,!1),n.addEventListener("touchstart",f,!1),n.addEventListener("touchmove",v,!1),n.addEventListener("touchend",m,!1);function k(){let a=s.getImageData(0,0,d,F).data,g=a.length,y=g/32,e=0;for(let E=0;E<g;E+=32)a[E]===0&&e++;return Math.round(e/y*100)}function t(h,a){return Math.sqrt(Math.pow(a.x-h.x,2)+Math.pow(a.y-h.y,2))}function i(h,a){return Math.atan2(a.x-h.x,a.y-h.y)}function u(h,a){var g=0,y=0,e,E;if(a.offsetParent!==void 0)do g+=a.offsetLeft,y+=a.offsetTop;while(a=a.offsetParent);return e=(h.pageX||h.touches[0].pageX)-g,E=(h.pageY||h.touches[0].pageY)-y,{x:e,y:E}}function P(h){var a;h=h||0,h>80&&((a=n==null?void 0:n.parentNode)==null||a.removeChild(n))}function f(h){r=!0,l=u(h,n)}function v(h){if(h.preventDefault(),!r)return;let a=u(h,n);const g=t(l,a),y=i(l,a);let e,E;for(let c=0;c<g;c++){e=l.x+Math.sin(y)*c*2,E=a.y+Math.cos(y)*c*2,s.globalCompositeOperation="destination-out";const M=8;s.beginPath(),s.arc(e,E,M,0,Math.PI*2,!0),s.closePath(),s.fill()}l=a,P(k())}function m(){r=!1}function I(){s.save(),s.fillStyle="#ddd",s.fillRect(0,0,d,F),s.restore()}I()}),(n,s)=>(B(),C("div",z,s[0]||(s[0]=[p("canvas",{id:"scratch-ticket",width:"200",height:"200"},null,-1)])))}}),W=JSON.parse('{"title":"canvas 合成","description":"","frontmatter":{"label":"canvas"},"headers":[{"level":2,"title":"globalCompositeOperation","slug":"globalcompositeoperation","link":"#globalcompositeoperation","children":[]},{"level":2,"title":"合成三个图形","slug":"合成三个图形","link":"#合成三个图形","children":[]},{"level":2,"title":"刮刮乐 1","slug":"刮刮乐-1","link":"#刮刮乐-1","children":[]},{"level":2,"title":"刮刮乐 2","slug":"刮刮乐-2","link":"#刮刮乐-2","children":[]}],"relativePath":"useful/canvas/05 canvas 合成.md","filePath":"useful/canvas/05 canvas 合成.md","lastUpdated":1710946996000}'),K={name:"useful/canvas/05 canvas 合成.md"},Z=Object.assign(K,{setup(D){return(n,s)=>{const d=R("clientOnly");return B(),C("div",null,[s[0]||(s[0]=A("",5)),o(d,null,{default:_(()=>[o(H)]),_:1}),s[1]||(s[1]=A("",3)),o(d,null,{default:_(()=>[o(J)]),_:1}),s[2]||(s[2]=A("",5))])}}});export{W as __pageData,Z as default};
